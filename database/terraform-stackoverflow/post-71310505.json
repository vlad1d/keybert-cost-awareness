{"Id": "71310505", "PostTypeId": "1", "AcceptedAnswerId": "71311024", "CreationDate": "2022-03-01T15:01:48.783", "Score": "0", "ViewCount": "344", "Body": "<p>I'm in the process of trying to create a list of ip's using a combination of a for loop and the range function. I'm trying to get the loop to iterate through the range of numbers and appending that number as the last digits in an ip address.</p>\n<pre><code>locals {\n  windows_ip_list = [for i in range(var.Number) : format(&quot;%s%02d&quot;, &quot;10.16.0.1&quot;, i)]\n}\n</code></pre>\n<p>Giving the variable var.Number a value of 5 creates a 5 element tuple but the following error is probvided.</p>\n<pre><code>\u2502    9:   private_ip = local.windows_ip_list  #var.win_ip[count.index]\n\u2502     \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n\u2502     \u2502 local.windows_ip_list is tuple with 5 elements\n\u2502 \n\u2502 Inappropriate value for attribute &quot;private_ip&quot;: string required.\n</code></pre>\n<pre><code>resource &quot;aws_instance&quot; &quot;Windows&quot; {\n  ami = &quot;ami-02c1f4de3809f0050&quot;\n  instance_type   = &quot;t2.large&quot;\n  #subnet_id       = aws_subnet.Engineering[count.index].id \n  subnet_id = aws_subnet.windows.id \n  security_groups = [aws_security_group.Engineering.id]\n  key_name = aws_key_pair.ENG-DEV.id\n  count    = var.Number\n  private_ip = local.windows_ip_list  #var.win_ip[count.index]\n  associate_public_ip_address = false\n</code></pre>\n<p>Any help creating the desired list would be appreciated.</p>\n<p>Thanks in advance.</p>\n", "OwnerUserId": "15695494", "LastEditorUserId": "15695494", "LastEditDate": "2022-03-01T15:18:31.303", "LastActivityDate": "2022-03-01T15:42:22.160", "Title": "Terraform ip range", "Tags": "<amazon-web-services><terraform>", "AnswerCount": "2", "CommentCount": "5", "ContentLicense": "CC BY-SA 4.0", "comments": [{"Id": "126048578", "PostId": "71310505", "Score": "0", "Text": "Are you using `for_each`? Where is your resource code?", "CreationDate": "2022-03-01T15:13:24.060", "UserId": "1032785", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}, {"Id": "126048735", "PostId": "71310505", "Score": "0", "Text": "Not using for_each as yet no. Added resource code as requested", "CreationDate": "2022-03-01T15:19:14.367", "UserId": "15695494", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}, {"Id": "126048783", "PostId": "71310505", "Score": "0", "Text": "The goal is to assign multiple public IPs to a single ec2 instance?", "CreationDate": "2022-03-01T15:20:55.513", "UserId": "1032785", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": [{"source": "Text", "text": "The goal is to assign multiple public IPs to a single ec2 instance?", "keywords": ["instance"]}]}, {"Id": "126048987", "PostId": "71310505", "Score": "0", "Text": "The goal is to have multiple instance to the value of var.Number each with an allocated ip that has been created automatically. Trying to avoid creating a large list of ip's and using the count function to iterate through. Its time consuming and not very efficient.", "CreationDate": "2022-03-01T15:28:56.953", "UserId": "15695494", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": [{"source": "Text", "text": "The goal is to have multiple instance to the value of var.", "keywords": ["instance"]}, {"source": "Text", "text": "Its time consuming and not very efficient.", "keywords": ["efficient"]}]}, {"Id": "126049224", "PostId": "71310505", "Score": "0", "Text": "How frustrating I edited the line private ip's to append with [count.index] and it works. Excellent work many thanks for all your help and quick responses.", "CreationDate": "2022-03-01T15:38:05.333", "UserId": "15695494", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}], "history": [{"Id": "265144129", "PostHistoryTypeId": "2", "PostId": "71310505", "RevisionGUID": "acdd43f0-5b06-4814-9976-2e7151fc2b58", "CreationDate": "2022-03-01T15:01:48.783", "UserId": "15695494", "Text": "I'm in the process of trying to create a list of ip's using a combination of a for loop and the range function. I'm trying to get the loop to iterate through the range of numbers and appending that number as the last digits in an ip address. \r\n\r\n```\r\nlocals {\r\n  windows_ip_list = [for i in range(var.Number) : format(\"%s%02d\", \"10.16.0.1\", i)]\r\n}\r\n```\r\nGiving the variable var.Number a value of 5 creates a 5 element tuple but the following error is probvided.\r\n\r\n```\u2502   on ec2.tf line 9, in resource \"aws_instance\" \"Windows\":\r\n\u2502    9:   private_ip = local.windows_ip_list  #var.win_ip[count.index]\r\n\u2502     \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\r\n\u2502     \u2502 local.windows_ip_list is tuple with 5 elements\r\n\u2502 \r\n\u2502 Inappropriate value for attribute \"private_ip\": string required.\r\n```\r\nAny help creating the desired list would be appreciated. \r\n\r\nThanks in advance.\r\n", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}, {"Id": "265144131", "PostHistoryTypeId": "1", "PostId": "71310505", "RevisionGUID": "acdd43f0-5b06-4814-9976-2e7151fc2b58", "CreationDate": "2022-03-01T15:01:48.783", "UserId": "15695494", "Text": "Terraform ip range", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}, {"Id": "265144132", "PostHistoryTypeId": "3", "PostId": "71310505", "RevisionGUID": "acdd43f0-5b06-4814-9976-2e7151fc2b58", "CreationDate": "2022-03-01T15:01:48.783", "UserId": "15695494", "Text": "<amazon-web-services><terraform>", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}, {"Id": "265145198", "PostHistoryTypeId": "5", "PostId": "71310505", "RevisionGUID": "3db6ce37-2744-40e2-807a-6d85bdc7ff88", "CreationDate": "2022-03-01T15:18:31.303", "UserId": "15695494", "Comment": "Added the resource code as requested. ", "Text": "I'm in the process of trying to create a list of ip's using a combination of a for loop and the range function. I'm trying to get the loop to iterate through the range of numbers and appending that number as the last digits in an ip address. \r\n\r\n```\r\nlocals {\r\n  windows_ip_list = [for i in range(var.Number) : format(\"%s%02d\", \"10.16.0.1\", i)]\r\n}\r\n```\r\nGiving the variable var.Number a value of 5 creates a 5 element tuple but the following error is probvided.\r\n\r\n```\u2502   on ec2.tf line 9, in resource \"aws_instance\" \"Windows\":\r\n\u2502    9:   private_ip = local.windows_ip_list  #var.win_ip[count.index]\r\n\u2502     \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\r\n\u2502     \u2502 local.windows_ip_list is tuple with 5 elements\r\n\u2502 \r\n\u2502 Inappropriate value for attribute \"private_ip\": string required.\r\n```\r\n```\r\nresource \"aws_instance\" \"Windows\" {\r\n  ami = \"ami-02c1f4de3809f0050\"\r\n  instance_type   = \"t2.large\"\r\n  #subnet_id       = aws_subnet.Engineering[count.index].id \r\n  subnet_id = aws_subnet.windows.id \r\n  security_groups = [aws_security_group.Engineering.id]\r\n  key_name = aws_key_pair.ENG-DEV.id\r\n  count    = var.Number\r\n  private_ip = local.windows_ip_list  #var.win_ip[count.index]\r\n  associate_public_ip_address = false\r\n```\r\nAny help creating the desired list would be appreciated. \r\n\r\nThanks in advance.\r\n", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}], "answers": [{"Id": "71311024", "PostTypeId": "2", "ParentId": "71310505", "CreationDate": "2022-03-01T15:41:14.957", "Score": "2", "Body": "<p>You should reference the index of the private ip in the windows_ip_list tuple with <code>local.windows_ip_list[count.index]</code> instead of <code>local.windows_ip_list</code>as the private_ip attribute require a string value not a list</p>\n<p>to have a clear view try to echo the values that <code>local.windows_ip_list</code> contains by :</p>\n<pre><code>terraform console\n</code></pre>\n<p>then type <code>local.windows_ip_list</code> and press enter</p>\n", "OwnerUserId": "10735209", "LastActivityDate": "2022-03-01T15:41:14.957", "CommentCount": "0", "ContentLicense": "CC BY-SA 4.0", "history": [{"Id": "265146752", "PostHistoryTypeId": "2", "PostId": "71311024", "RevisionGUID": "035d7ca5-fc2b-463a-82b1-dd0e9ace6595", "CreationDate": "2022-03-01T15:41:14.957", "UserId": "10735209", "Text": "You should reference the index of the private ip in the windows_ip_list tuple with `local.windows_ip_list[count.index]` instead of `local.windows_ip_list`as the private_ip attribute require a string value not a list\r\n\r\nto have a clear view try to echo the values that `local.windows_ip_list` contains by :\r\n\r\n    terraform console\r\nthen type `local.windows_ip_list` and press enter \r\n", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}], "filtered-sentences": []}, {"Id": "71311037", "PostTypeId": "2", "ParentId": "71310505", "CreationDate": "2022-03-01T15:42:22.160", "Score": "1", "Body": "<p>Calling the variable and using the count.index was how it was fixed.</p>\n<pre><code>private_ip = local.windows_ip_list[count.index]\n</code></pre>\n", "OwnerUserId": "15695494", "LastActivityDate": "2022-03-01T15:42:22.160", "CommentCount": "0", "ContentLicense": "CC BY-SA 4.0", "history": [{"Id": "265146807", "PostHistoryTypeId": "2", "PostId": "71311037", "RevisionGUID": "40197463-6823-42a4-ac3a-99450fdbae77", "CreationDate": "2022-03-01T15:42:22.160", "UserId": "15695494", "Text": "Calling the variable and using the count.index was how it was fixed.\r\n```\r\nprivate_ip = local.windows_ip_list[count.index]\r\n```\r\n", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}, {"Id": "265146841", "PostHistoryTypeId": "12", "PostId": "71311037", "RevisionGUID": "e7fd7aba-1ca3-478c-9226-a7dc0595faac", "CreationDate": "2022-03-01T15:43:10.033", "UserId": "15695494", "Comment": "via Vote", "Text": "{\"Voters\":[{\"Id\":15695494,\"DisplayName\":\"user15695494\"}]}", "filtered-sentences": []}, {"Id": "265146877", "PostHistoryTypeId": "13", "PostId": "71311037", "RevisionGUID": "a287d509-0811-495a-8794-4d9b34441296", "CreationDate": "2022-03-01T15:43:31.767", "UserId": "15695494", "Text": "{\"Voters\":[{\"Id\":15695494,\"DisplayName\":\"user15695494\"}]}", "filtered-sentences": []}], "filtered-sentences": []}], "contains-topic": true, "filtered-sentences": []}