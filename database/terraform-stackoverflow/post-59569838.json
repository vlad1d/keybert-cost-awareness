{"Id": "59569838", "PostTypeId": "1", "CreationDate": "2020-01-02T20:50:33.407", "Score": "0", "ViewCount": "2253", "Body": "<p>I have a Network Load Balancer and an Application Load Balancer, they work just fine, but as I need fixed IPs/hostnames I decided to create a Global Accelerator for each one.</p>\n\n<p>Global Accelerator <strong>with Application Load Balancer works</strong> but <strong>with Network Load Balancer it doesn't respond</strong>...<br>\nExample:  </p>\n\n<p><strong>ALB:</strong></p>\n\n<pre><code>$ nc -zv &lt;application-load-balancer&gt;.awsglobalaccelerator.com 80\nConnection to &lt;application-load-balancer&gt;.awsglobalaccelerator.com 80 port [tcp/*] succeeded!\n</code></pre>\n\n<p><strong>NLB:</strong></p>\n\n<pre><code>$ nc -zv &lt;network-load-balancer&gt;.awsglobalaccelerator.com 1883\nnc: connect to &lt;network-load-balancer&gt;.awsglobalaccelerator.com port 1883 (tcp) failed: Connection timed out\n</code></pre>\n\n<p>I have changed Health Check port configuration for the NLB to 1883, and the Global Accelerator is shown as \" All healthy\".\nAnd as I said, the Network Load Balancer itself works:</p>\n\n<pre><code>$ nc -zv &lt;network-load-balancer&gt;.elb.sa-east-1.amazonaws.com 1883\nConnection to &lt;network-load-balancer&gt;.elb.sa-east-1.amazonaws.com 1883 port [tcp/*] succeeded!\n</code></pre>\n\n<p>Both load balancers are very similar (similar instances, same VPC, subnets, etc).<br>\nAWS docs say I can use Global Accelerator with both types of Load Balancers.</p>\n\n<p><strong>I don't know why the NLB Global Accelerator doesn't respond.</strong><br>\n<strong>What am I missing?</strong></p>\n\n<p>More info:<br>\n- I'm testing in sa-east-1 region (South America)<br>\n- I need Global Accelerator because the LBs are part of terraform for deployment, so for every build the LBs hostname changes<br>\n- I could use Elastic IP's for NLB, but to do that I'd need to change my existing subnets (and as far as I know I can't use Elastic IPs for ALBs)...</p>\n", "OwnerUserId": "3267276", "LastActivityDate": "2020-03-14T20:54:50.700", "Title": "AWS - Global Accelerator not working with Network Load Balancer", "Tags": "<amazon-web-services><terraform-provider-aws>", "AnswerCount": "1", "CommentCount": "2", "ContentLicense": "CC BY-SA 4.0", "comments": [{"Id": "105328650", "PostId": "59569838", "Score": "1", "Text": "*\"I could use Elastic IP's for NLB, but to do that I'd need to change my existing subnets.\"* This suggests that your NLB isn't on public subnets, and that seems to be a requirement.  [*\"You can target an Application Load Balancer or an EC2 instance in a private subnet using AWS Global Accelerator...\"*](https://docs.aws.amazon.com/global-accelerator/latest/dg/about-endpoints.html) but NLB isn't mentioned.  The way GA connects to the different balancer types isn't the same, so the requirements differ.  Is this a possible explanation?", "CreationDate": "2020-01-03T15:34:25.257", "UserId": "1695906", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": [{"source": "Text", "text": "*\"I could use Elastic IP's for NLB, but to do that I'd need to change my existing subnets.\"* ", "keywords": ["change"]}, {"source": "Text", "text": "[*\"You can target an Application Load Balancer or an EC2 instance in a private subnet using AWS Global Accelerator...\"*](https://docs.aws.amazon.com/global-accelerator/latest/dg/about-endpoints.html) but NLB isn't mentioned. ", "keywords": ["instance"]}]}, {"Id": "105332412", "PostId": "59569838", "Score": "0", "Text": "@Michael-sqlbot I'm using public subnets (I've set an internet gateway to 0.0.0.0/0), all instances are accessible from the internet :/", "CreationDate": "2020-01-03T17:50:08.080", "UserId": "3267276", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}], "history": [{"Id": "212222423", "PostHistoryTypeId": "2", "PostId": "59569838", "RevisionGUID": "ed5dbed0-7cf2-4128-aebd-8ba50b09e424", "CreationDate": "2020-01-02T20:50:33.407", "UserId": "3267276", "Text": "I have a Network Load Balancer and an Application Load Balancer, they work just fine, but as I need fixed IPs/hostnames I decided to create a Global Accelerator for each one.\r\n\r\nGlobal Accelerator **with Application Load Balancer works** but **with Network Load Balancer it doesn't respond**...  \r\nExample:  \r\n\r\n**ALB:**\r\n```\r\n$ nc -zv <application-load-balancer>.awsglobalaccelerator.com 80\r\nConnection to <application-load-balancer>.awsglobalaccelerator.com 80 port [tcp/*] succeeded!\r\n```\r\n**NLB:**\r\n```\r\n$ nc -zv <network-load-balancer>.awsglobalaccelerator.com 1883\r\nnc: connect to <network-load-balancer>.awsglobalaccelerator.com port 1883 (tcp) failed: Connection timed out\r\n```\r\n\r\nI have changed Health Check port configuration for the NLB to 1883, and the Global Accelerator is shown as \" All healthy\".\r\nAnd as I said, the Network Load Balancer itself works:\r\n```\r\n$ nc -zv <network-load-balancer>.elb.sa-east-1.amazonaws.com 1883\r\nConnection to <network-load-balancer>.elb.sa-east-1.amazonaws.com 1883 port [tcp/*] succeeded!\r\n```\r\n\r\nBoth load balancers are very similar (similar instances, same VPC, subnets, etc).  \r\nAWS docs say I can use Global Accelerator with both types of Load Balancers.\r\n\r\n**I don't know why the NLB Global Accelerator doesn't respond.**  \r\n**What am I missing?**\r\n\r\nMore info:  \r\n- I'm testing in sa-east-1 region (South America)  \r\n- I need Global Accelerator because the LBs are part of terraform for deployment, so for every build the LBs hostname changes  \r\n- I could use Elastic IP's for NLB, but to do that I'd need to change my existing subnets (and as far as I know I can't use Elastic IPs for ALBs)...", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": [{"source": "Text", "text": "Example: **ALB:** ``` $ nc -zv .awsglobalaccelerator.com 80 Connection to .awsglobalaccelerator.com 80 port [tcp/*] succeeded! ``` **NLB:** ``` $ nc -zv .awsglobalaccelerator.com 1883 nc: connect to .awsglobalaccelerator.com port 1883 (tcp) failed: Connection timed out ``` I have changed Health Check port configuration for the NLB to 1883, and the Global Accelerator is shown as \" All healthy\". ", "keywords": ["change"]}, {"source": "Text", "text": "**I don't know why the NLB Global Accelerator doesn't respond.** **What am I missing?** More info: - I'm testing in sa-east-1 region (South America) - I need Global Accelerator because the LBs are part of terraform for deployment, so for every build the LBs hostname changes - I could use Elastic IP's for NLB, but to do that I'd need to change my existing subnets (and as far as I know I can't use Elastic IPs for ALBs)...", "keywords": ["change", "test"]}]}, {"Id": "212222424", "PostHistoryTypeId": "1", "PostId": "59569838", "RevisionGUID": "ed5dbed0-7cf2-4128-aebd-8ba50b09e424", "CreationDate": "2020-01-02T20:50:33.407", "UserId": "3267276", "Text": "AWS - Global Accelerator not working with Network Load Balancer", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}, {"Id": "212222425", "PostHistoryTypeId": "3", "PostId": "59569838", "RevisionGUID": "ed5dbed0-7cf2-4128-aebd-8ba50b09e424", "CreationDate": "2020-01-02T20:50:33.407", "UserId": "3267276", "Text": "<amazon-web-services><terraform-provider-aws>", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}], "answers": [{"Id": "60687221", "PostTypeId": "2", "ParentId": "59569838", "CreationDate": "2020-03-14T20:54:50.700", "Score": "1", "Body": "<p>If static ip is the only thing you need to achieve then I am not getting the point using Global accelerator and NLB together. Because both provides the features of static ip. </p>\n\n<p>For static ip facility there are 2 options </p>\n\n<ol>\n<li><p>Use Global accelerator on top of ALB(easy configuration and high cost) </p></li>\n<li><p>Use NLB and forward your request to ALB(complex configuration and cost effective)</p></li>\n</ol>\n\n<p>For 2nd option you can get reference from below link.\n<a href=\"https://www.bluematador.com/blog/static-ips-for-aws-application-load-balancer\" rel=\"nofollow noreferrer\">https://www.bluematador.com/blog/static-ips-for-aws-application-load-balancer</a></p>\n", "OwnerUserId": "6367088", "LastActivityDate": "2020-03-14T20:54:50.700", "CommentCount": "1", "CommunityOwnedDate": "2020-03-14T20:54:50.700", "ContentLicense": "CC BY-SA 4.0", "comments": [{"Id": "107692269", "PostId": "60687221", "Score": "0", "Text": "Very late reply: In the end I managed to assign Elastic IPs to my NLB without a problem using terraform, looks like using AWS Console and AWS CLI/terraform have different behaviours, as I wasn't able to assign Elastic IP's without losing the ability of automatic public IPs using the Console.\nAlso, I have to assign an Elastic IP per availability zone, this is far from ideal for me, but it was the only way of achieving static IPs on NLB.\nThat's why I thought about Global Accelerator on top of NLB.\nI can't use ALB, because my service uses many ports, ALB only works with 80/443", "CreationDate": "2020-03-26T13:33:32.907", "UserId": "3267276", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}], "history": [{"Id": "216947117", "PostHistoryTypeId": "2", "PostId": "60687221", "RevisionGUID": "cffbc458-198d-487f-be33-e9c801b77114", "CreationDate": "2020-03-14T20:54:50.700", "UserId": "6367088", "Text": "If static ip is the only thing you need to achieve then I am not getting the point using Global accelerator and NLB together. Because both provides the features of static ip. \r\n\r\nFor static ip facility there are 2 options \r\n\r\n1. Use Global accelerator on top of ALB(easy configuration and high cost) \r\n\r\n2. Use NLB and forward your request to ALB(complex configuration and cost effective)\r\n\r\nFor 2nd option you can get reference from below link.\r\nhttps://www.bluematador.com/blog/static-ips-for-aws-application-load-balancer\r\n", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": [{"source": "Text", "text": "1. Use Global accelerator on top of ALB(easy configuration and high cost) 2. Use NLB and forward your request to ALB(complex configuration and cost effective) For 2nd option you can get reference from below link. ", "keywords": ["cost"]}]}, {"Id": "216947118", "PostHistoryTypeId": "16", "PostId": "60687221", "RevisionGUID": "2cb89b57-a0a5-43c7-9467-774c00b525fc", "CreationDate": "2020-03-14T20:54:50.700", "UserId": "6367088", "filtered-sentences": []}], "filtered-sentences": [{"source": "Body", "text": "Use Global accelerator on top of ALB(easy configuration and high cost) Use NLB and forward your request to ALB(complex configuration and cost effective) For 2nd option you can get reference from below link. ", "keywords": ["cost"]}]}], "contains-topic": true, "filtered-sentences": [{"source": "Body", "text": "Example: ALB: NLB: I have changed Health Check port configuration for the NLB to 1883, and the Global Accelerator is shown as \" All healthy\". ", "keywords": ["change"]}, {"source": "Body", "text": "More info: - I'm testing in sa-east-1 region (South America) - I need Global Accelerator because the LBs are part of terraform for deployment, so for every build the LBs hostname changes - I could use Elastic IP's for NLB, but to do that I'd need to change my existing subnets (and as far as I know I can't use Elastic IPs for ALBs)...", "keywords": ["change", "test"]}]}