{"Id": "70012681", "PostTypeId": "1", "AcceptedAnswerId": "70015249", "CreationDate": "2021-11-17T23:05:16.433", "Score": "0", "ViewCount": "1450", "Body": "<p>I am defining a dynamo table and trigger like this:</p>\n<pre><code>resource &quot;aws_dynamodb_table&quot; &quot;filenames&quot; {\n  name           = local.dynamodb_table_filenames\n  billing_mode   = &quot;PROVISIONED&quot;\n  read_capacity  = 1000\n  write_capacity = 1000\n  hash_key       = &quot;filename&quot;\n  stream_enabled = true\n  stream_view_type = &quot;NEW_IMAGE&quot;\n\n  #range_key      = &quot;&quot;\n\n  attribute {\n    name = &quot;filename&quot;\n    type = &quot;S&quot;\n  }\n\n  tags = var.tags\n}\n\n\nresource &quot;aws_lambda_event_source_mapping&quot; &quot;allow_dynamodb_table_to_trigger_lambda&quot; {\n  event_source_arn  = aws_dynamodb_table.filenames.stream_arn\n  function_name     = aws_lambda_function.trigger_stepfunction_lambda.arn\n  starting_position = &quot;LATEST&quot;\n}\n</code></pre>\n<p>Upon running <code>terraform apply</code>, I get the following error:</p>\n<pre><code>error updating DynamoDB Table (xzy): ValidationException: Table already has an enabled stream: TableName: 4 xzy\n</code></pre>\n<p>I didn't see this error before I added <code>stream_enabled</code> and <code>stream_view_type</code>. If I remove these two attributes, I will get another error so I cannot remove them.</p>\n", "OwnerUserId": "12304000", "LastActivityDate": "2021-11-18T06:05:39.120", "Title": "error updating DynamoDB Table: Table already has an enabled stream", "Tags": "<amazon-web-services><aws-lambda><amazon-dynamodb><terraform><terraform-provider-aws>", "AnswerCount": "1", "CommentCount": "1", "ContentLicense": "CC BY-SA 4.0", "comments": [{"Id": "123763639", "PostId": "70012681", "Score": "0", "Text": "Have you enabled DynamoDB streams manually on the table from AWS console?", "CreationDate": "2021-11-17T23:24:55.993", "UserId": "7661119", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}], "history": [{"Id": "258216961", "PostHistoryTypeId": "2", "PostId": "70012681", "RevisionGUID": "3cda384f-6835-4116-8deb-5c02363131c3", "CreationDate": "2021-11-17T23:05:16.433", "UserId": "12304000", "Text": "I am defining a dynamo table and trigger like this:\r\n```\r\nresource \"aws_dynamodb_table\" \"filenames\" {\r\n  name           = local.dynamodb_table_filenames\r\n  billing_mode   = \"PROVISIONED\"\r\n  read_capacity  = 1000\r\n  write_capacity = 1000\r\n  hash_key       = \"filename\"\r\n  stream_enabled = true\r\n  stream_view_type = \"NEW_IMAGE\"\r\n\r\n  #range_key      = \"\"\r\n\r\n  attribute {\r\n    name = \"filename\"\r\n    type = \"S\"\r\n  }\r\n\r\n  tags = var.tags\r\n}\r\n\r\n\r\nresource \"aws_lambda_event_source_mapping\" \"allow_dynamodb_table_to_trigger_lambda\" {\r\n  event_source_arn  = aws_dynamodb_table.filenames.stream_arn\r\n  function_name     = aws_lambda_function.trigger_stepfunction_lambda.arn\r\n  starting_position = \"LATEST\"\r\n}\r\n```\r\nUpon running ```terraform apply```, I get the following error: \r\n```\r\nerror updating DynamoDB Table (xzy): ValidationException: Table already has an enabled stream: TableName: 4 xzy\r\n```\r\nI didn't see this error before I added ```stream_enabled``` and ```stream_view_type```. If I remove these two attributes, I will get another error so I cannot remove them.", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": [{"source": "Text", "text": "I am defining a dynamo table and trigger like this: ``` resource \"aws_dynamodb_table\" \"filenames\" { name = local.dynamodb_table_filenames billing_mode = \"PROVISIONED\" read_capacity = 1000 write_capacity = 1000 hash_key = \"filename\" stream_enabled = true stream_view_type = \"NEW_IMAGE\" #range_key = \"\" attribute { name = \"filename\" type = \"S\" } tags = var.tags } resource \"aws_lambda_event_source_mapping\" \"allow_dynamodb_table_to_trigger_lambda\" { event_source_arn = aws_dynamodb_table.filenames.stream_arn function_name = aws_lambda_function.trigger_stepfunction_lambda.arn starting_position = \"LATEST\" } ``` Upon running ```terraform apply```, I get the following error: ``` error updating DynamoDB Table (xzy): ValidationException: Table already has an enabled stream: TableName: 4 xzy ``` I didn't see this error before I added ```stream_enabled``` and ```stream_view_type```", "keywords": ["bill"]}]}, {"Id": "258216963", "PostHistoryTypeId": "1", "PostId": "70012681", "RevisionGUID": "3cda384f-6835-4116-8deb-5c02363131c3", "CreationDate": "2021-11-17T23:05:16.433", "UserId": "12304000", "Text": "error updating DynamoDB Table: Table already has an enabled stream", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}, {"Id": "258216964", "PostHistoryTypeId": "3", "PostId": "70012681", "RevisionGUID": "3cda384f-6835-4116-8deb-5c02363131c3", "CreationDate": "2021-11-17T23:05:16.433", "UserId": "12304000", "Text": "<amazon-web-services><aws-lambda><amazon-dynamodb><terraform><terraform-provider-aws>", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}], "answers": [{"Id": "70015249", "PostTypeId": "2", "ParentId": "70012681", "CreationDate": "2021-11-18T06:05:39.120", "Score": "2", "Body": "<p>dynamo db Stream It might have been enabled from the beigining\nYou cant change parameter of <code>stream_view_type</code> already enabled dynamodb stream, dynamodb doucmention didnt mentioned it.</p>\n<p>I suggest you Create a new table and enable the dyanmodb <code>stream_enabled: true</code> and  <code>stream_view_type:[]</code> both at once.</p>\n", "OwnerUserId": "5692366", "LastActivityDate": "2021-11-18T06:05:39.120", "CommentCount": "0", "ContentLicense": "CC BY-SA 4.0", "history": [{"Id": "258231012", "PostHistoryTypeId": "2", "PostId": "70015249", "RevisionGUID": "6ed45241-3d1d-4268-971f-46afc1a0b8d5", "CreationDate": "2021-11-18T06:05:39.120", "UserId": "5692366", "Text": "dynamo db Stream It might have been enabled from the beigining \r\nYou cant change parameter of `stream_view_type` already enabled dynamodb stream, dynamodb doucmention didnt mentioned it.\r\n\r\nI suggest you Create a new table and enable the dyanmodb `stream_enabled: true` and  `stream_view_type:[]` both at once.", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": [{"source": "Text", "text": "You cant change parameter of `stream_view_type` already enabled dynamodb stream, dynamodb doucmention didnt mentioned it. ", "keywords": ["change"]}]}], "filtered-sentences": [{"source": "Body", "text": "It might have been enabled from the beigining You cant change parameter of stream_view_type already enabled dynamodb stream, dynamodb doucmention didnt mentioned it. ", "keywords": ["change"]}]}], "contains-topic": true, "filtered-sentences": []}