{"Id": "70006706", "PostTypeId": "1", "CreationDate": "2021-11-17T14:57:10.370", "Score": "0", "ViewCount": "1637", "Body": "<p>I am trying to create a trigger such that every time a new entry in my dynamo table <code>filenames</code> is created, the lambda function <code>trigger_lambda_function</code>is triggered. I followed this: <a href=\"https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/lambda_event_source_mapping\" rel=\"nofollow noreferrer\">https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/lambda_event_source_mapping</a></p>\n<pre><code>resource &quot;aws_dynamodb_table&quot; &quot;filenames&quot; {\n  name           = local.dynamodb_table_filenames\n  billing_mode   = &quot;PROVISIONED&quot;\n  read_capacity  = 1000\n  write_capacity = 1000\n  hash_key       = &quot;filename&quot;\n\n  #range_key      = &quot;&quot;\n\n  attribute {\n    name = &quot;filename&quot;\n    type = &quot;S&quot;\n  }\n\n  tags = var.tags\n}\n\n\nresource &quot;aws_lambda_event_source_mapping&quot; &quot;allow_dynamodb_table_to_trigger_lambda&quot; {\n  event_source_arn  = aws_dynamodb_table.filenames.stream_arn\n  function_name     = aws_lambda_function.trigger_stepfunction_lambda.arn\n  starting_position = &quot;LATEST&quot;\n}\n</code></pre>\n<p>Currently, I am getting an error that:</p>\n<pre><code>\u2502 Error: error creating Lambda Event Source Mapping (): InvalidParameterValueException: Unrecognized event source.\n\u2502 {\n\u2502   RespMetadata: {\n\u2502     StatusCode: 400,\n\u2502     RequestID: &quot;5ae68da6-3f6d-4adb-b104-72ae584dbca7&quot;\n\u2502   },\n\u2502   Message_: &quot;Unrecognized event source.&quot;,\n\u2502   Type: &quot;User&quot;\n\u2502 }\n\u2502 \n\u2502   with module.ingest_system[&quot;alpegatm&quot;].aws_lambda_event_source_mapping.allow_dynamodb_table_to_trigger_lambda,\n\u2502   on ../../modules/ingest_system/dynamo.tf line 39, in resource &quot;aws_lambda_event_source_mapping&quot; &quot;allow_dynamodb_table_to_trigger_lambda&quot;:\n\u2502   39: resource &quot;aws_lambda_event_source_mapping&quot; &quot;allow_dynamodb_table_to_trigger_lambda&quot; {\n</code></pre>\n<p>How can I fix this? What is wrong with the <code>event_source_arn</code> I am using?</p>\n", "OwnerUserId": "12304000", "LastEditorUserId": "11280289", "LastEditDate": "2021-11-17T16:47:02.587", "LastActivityDate": "2021-11-25T09:45:16.267", "Title": "error creating Lambda Event Source Mapping (): InvalidParameterValueException: Unrecognized event source", "Tags": "<amazon-web-services><aws-lambda><amazon-dynamodb><terraform><terraform-provider-aws>", "AnswerCount": "1", "CommentCount": "0", "ContentLicense": "CC BY-SA 4.0", "history": [{"Id": "258185821", "PostHistoryTypeId": "2", "PostId": "70006706", "RevisionGUID": "a175e83a-824b-4031-9944-398d5311ee0b", "CreationDate": "2021-11-17T14:57:10.370", "UserId": "12304000", "Text": "I am trying to create a trigger such that every time a new entry in my dynamo table ```filenames``` is created, the lambda function ```trigger_lambda_function```is triggered. I followed this: https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/lambda_event_source_mapping\r\n```\r\nresource \"aws_dynamodb_table\" \"filenames\" {\r\n  name           = local.dynamodb_table_filenames\r\n  billing_mode   = \"PROVISIONED\"\r\n  read_capacity  = 1000\r\n  write_capacity = 1000\r\n  hash_key       = \"filename\"\r\n\r\n  #range_key      = \"\"\r\n\r\n  attribute {\r\n    name = \"filename\"\r\n    type = \"S\"\r\n  }\r\n\r\n  tags = var.tags\r\n}\r\n\r\n\r\nresource \"aws_lambda_event_source_mapping\" \"allow_dynamodb_table_to_trigger_lambda\" {\r\n  event_source_arn  = aws_dynamodb_table.filenames.stream_arn\r\n  function_name     = aws_lambda_function.trigger_stepfunction_lambda.arn\r\n  starting_position = \"LATEST\"\r\n}\r\n```\r\n\r\nCurrently, I am getting an error that:\r\n```\r\n\u2502 Error: error creating Lambda Event Source Mapping (): InvalidParameterValueException: Unrecognized event source.\r\n\u2502 {\r\n\u2502   RespMetadata: {\r\n\u2502     StatusCode: 400,\r\n\u2502     RequestID: \"5ae68da6-3f6d-4adb-b104-72ae584dbca7\"\r\n\u2502   },\r\n\u2502   Message_: \"Unrecognized event source.\",\r\n\u2502   Type: \"User\"\r\n\u2502 }\r\n\u2502 \r\n\u2502   with module.ingest_system[\"alpegatm\"].aws_lambda_event_source_mapping.allow_dynamodb_table_to_trigger_lambda,\r\n\u2502   on ../../modules/ingest_system/dynamo.tf line 39, in resource \"aws_lambda_event_source_mapping\" \"allow_dynamodb_table_to_trigger_lambda\":\r\n\u2502   39: resource \"aws_lambda_event_source_mapping\" \"allow_dynamodb_table_to_trigger_lambda\" {\r\n```\r\nHow can I fix this? What is wrong with the ```event_source_arn``` I am using? ", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": [{"source": "Text", "text": "I followed this: https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/lambda_event_source_mapping ``` resource \"aws_dynamodb_table\" \"filenames\" { name = local.dynamodb_table_filenames billing_mode = \"PROVISIONED\" read_capacity = 1000 write_capacity = 1000 hash_key = \"filename\" #range_key = \"\" attribute { name = \"filename\" type = \"S\" } tags = var.tags } resource \"aws_lambda_event_source_mapping\" \"allow_dynamodb_table_to_trigger_lambda\" { event_source_arn = aws_dynamodb_table.filenames.stream_arn function_name = aws_lambda_function.trigger_stepfunction_lambda.arn starting_position = \"LATEST\" } ``` Currently, I am getting an error that: ``` \u2502 Error: error creating Lambda Event Source Mapping (): InvalidParameterValueException: Unrecognized event source. \u2502 { \u2502 RespMetadata: { \u2502 StatusCode: 400, \u2502 RequestID: \"5ae68da6-3f6d-4adb-b104-72ae584dbca7\" \u2502 }, \u2502 Message_: \"Unrecognized event source.\", \u2502 Type: \"User\" \u2502 } \u2502 \u2502 with module.ingest_system[\"alpegatm\"].aws_lambda_event_source_mapping.allow_dynamodb_table_to_trigger_lambda, \u2502 on ../../modules/ingest_system/dynamo.tf line 39, in resource \"aws_lambda_event_source_mapping\" \"allow_dynamodb_table_to_trigger_lambda\": \u2502 39: resource \"aws_lambda_event_source_mapping\" \"allow_dynamodb_table_to_trigger_lambda\" { ``` How can I fix this", "keywords": ["bill"]}]}, {"Id": "258185823", "PostHistoryTypeId": "1", "PostId": "70006706", "RevisionGUID": "a175e83a-824b-4031-9944-398d5311ee0b", "CreationDate": "2021-11-17T14:57:10.370", "UserId": "12304000", "Text": "error creating Lambda Event Source Mapping (): InvalidParameterValueException: Unrecognized event source", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}, {"Id": "258185824", "PostHistoryTypeId": "3", "PostId": "70006706", "RevisionGUID": "a175e83a-824b-4031-9944-398d5311ee0b", "CreationDate": "2021-11-17T14:57:10.370", "UserId": "12304000", "Text": "<amazon-web-services><lambda><amazon-dynamodb><terraform><terraform-provider-aws>", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}, {"Id": "258194735", "PostHistoryTypeId": "6", "PostId": "70006706", "RevisionGUID": "11e13f88-6be1-4c27-b486-5ffbbcc17e1e", "CreationDate": "2021-11-17T16:47:02.587", "UserId": "11280289", "Comment": "changed lambda tag to aws-lambda", "Text": "<amazon-web-services><aws-lambda><amazon-dynamodb><terraform><terraform-provider-aws>", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": [{"source": "Comment", "text": "changed lambda tag to aws-lambda", "keywords": ["change"]}]}, {"Id": "258194736", "PostHistoryTypeId": "24", "PostId": "70006706", "RevisionGUID": "11e13f88-6be1-4c27-b486-5ffbbcc17e1e", "CreationDate": "2021-11-17T16:47:02.587", "Comment": "Proposed by 11280289 approved by 12304000 edit id of 5288710", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}], "answers": [{"Id": "70108892", "PostTypeId": "2", "ParentId": "70006706", "CreationDate": "2021-11-25T09:45:16.267", "Score": "3", "Body": "<p>I believe you need to turn on streaming for the dynamo table.</p>\n", "OwnerUserId": "8675201", "LastActivityDate": "2021-11-25T09:45:16.267", "CommentCount": "0", "ContentLicense": "CC BY-SA 4.0", "history": [{"Id": "258732210", "PostHistoryTypeId": "2", "PostId": "70108892", "RevisionGUID": "ed0ac8e0-13a1-45bb-9e00-6e6f564ec8fd", "CreationDate": "2021-11-25T09:45:16.267", "UserId": "8675201", "Text": "I believe you need to turn on streaming for the dynamo table.", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}], "filtered-sentences": []}], "contains-topic": true, "filtered-sentences": []}