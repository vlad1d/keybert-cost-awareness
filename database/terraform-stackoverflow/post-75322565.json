{"Id": "75322565", "PostTypeId": "1", "CreationDate": "2023-02-02T11:33:37.173", "Score": "0", "ViewCount": "381", "Body": "<p>Taking the Terraform resource example:</p>\n<pre><code>resource &quot;azurerm_billing_account_cost_management_export&quot; &quot;example&quot; {\n  name                         = &quot;example&quot;\n  billing_account_id           = &quot;example&quot;\n  recurrence_type              = &quot;Daily&quot;\n  recurrence_period_start_date = &quot;2020-08-18T00:00:00Z&quot;\n  recurrence_period_end_date   = &quot;2020-09-18T00:00:00Z&quot;\n\n  export_data_storage_location {\n    container_id     = azurerm_storage_container.example.resource_manager_id\n    root_folder_path = &quot;/root/updated&quot;\n  }\n\n  export_data_options {\n    type       = &quot;Usage&quot;\n    time_frame = &quot;Custom&quot;\n  }\n}\n</code></pre>\n<p>The documentation isn't very clear what time_frame = &quot;Custom&quot; does and what else to add here?, I would like to create an export that runs daily however it only exports that day or maybe the previous days worth of data not month-to-date being the closest to this. As i do not want all of the other days data on that export. Is Setting the time_frame to custom allow me to do this? Will i have to set a start_date and end_date? and if so can i then run an update request daily potentially to change the days in a script someway as an alternative option</p>\n<p>Tried creating a day-to-month export however the file is too large and comes with unwanted data as the end of the month comes along</p>\n", "OwnerUserId": "21132634", "LastEditorUserId": "6886501", "LastEditDate": "2023-02-02T12:40:34.113", "LastActivityDate": "2023-02-03T07:50:45.623", "Title": "How to make an azure cost management export run daily and only export that day or previous days data? Using terraform or azure api", "Tags": "<azure><terraform><cost-management>", "AnswerCount": "2", "CommentCount": "0", "ContentLicense": "CC BY-SA 4.0", "history": [{"Id": "287312969", "PostHistoryTypeId": "2", "PostId": "75322565", "RevisionGUID": "88322e91-8b2f-48ce-ab35-8b4908d4a5f9", "CreationDate": "2023-02-02T11:33:37.173", "UserId": "21132634", "Text": "Taking the Terraform resource example:\r\n\r\n```\r\nresource \"azurerm_billing_account_cost_management_export\" \"example\" {\r\n  name                         = \"example\"\r\n  billing_account_id           = \"example\"\r\n  recurrence_type              = \"Daily\"\r\n  recurrence_period_start_date = \"2020-08-18T00:00:00Z\"\r\n  recurrence_period_end_date   = \"2020-09-18T00:00:00Z\"\r\n\r\n  export_data_storage_location {\r\n    container_id     = azurerm_storage_container.example.resource_manager_id\r\n    root_folder_path = \"/root/updated\"\r\n  }\r\n\r\n  export_data_options {\r\n    type       = \"Usage\"\r\n    time_frame = \"Custom\"\r\n  }\r\n}\r\n```\r\n\r\nThe documentation isn't very clear what time_frame = \"Custom\" does and what else to add here?, I would like to create an export that runs daily however it only exports that day or maybe the previous days worth of data not month-to-date being the closest to this. As i do not want all of the other days data on that export. Is Setting the time_frame to custom allow me to do this? Will i have to set a start_date and end_date? and if so can i then run an update request daily potentially to change the days in a script someway as an alternative option\r\n\r\nTried creating a day-to-month export however the file is too large and comes with unwanted data as the end of the month comes along", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": [{"source": "Text", "text": "Taking the Terraform resource example: ``` resource \"azurerm_billing_account_cost_management_export\" \"example\" { name = \"example\" billing_account_id = \"example\" recurrence_type = \"Daily\" recurrence_period_start_date = \"2020-08-18T00:00:00Z\" recurrence_period_end_date = \"2020-09-18T00:00:00Z\" export_data_storage_location { container_id = azurerm_storage_container.example.resource_manager_id root_folder_path = \"/root/updated\" } export_data_options { type = \"Usage\" time_frame = \"Custom\" } } ``` ", "keywords": ["bill"]}, {"source": "Text", "text": "Will i have to set a start_date and end_date? and if so can i then run an update request daily potentially to change the days in a script someway as an alternative option Tried creating a day-to-month export however the file is too large and comes with unwanted data as the end of the month comes along", "keywords": ["change"]}]}, {"Id": "287312971", "PostHistoryTypeId": "1", "PostId": "75322565", "RevisionGUID": "88322e91-8b2f-48ce-ab35-8b4908d4a5f9", "CreationDate": "2023-02-02T11:33:37.173", "UserId": "21132634", "Text": "How to make an azure cost management export run daily and only export that day or previous days data? Using terraform or azure api", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": [{"source": "Text", "text": "How to make an azure cost management export run daily and only export that day or previous days data? ", "keywords": ["cost"]}]}, {"Id": "287312972", "PostHistoryTypeId": "3", "PostId": "75322565", "RevisionGUID": "88322e91-8b2f-48ce-ab35-8b4908d4a5f9", "CreationDate": "2023-02-02T11:33:37.173", "UserId": "21132634", "Text": "<azure><terraform><azure-api-management><cost-management>", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}, {"Id": "287312973", "PostHistoryTypeId": "66", "PostId": "75322565", "RevisionGUID": "88322e91-8b2f-48ce-ab35-8b4908d4a5f9", "CreationDate": "2023-02-02T11:33:37.173", "UserId": "21132634", "filtered-sentences": []}, {"Id": "287317236", "PostHistoryTypeId": "6", "PostId": "75322565", "RevisionGUID": "d207ac40-683c-4d7a-b5b1-17b26f566677", "CreationDate": "2023-02-02T12:40:34.113", "UserId": "6886501", "Comment": "Removed Tag 'azure-api-management'. It's not related to this question", "Text": "<azure><terraform><cost-management>", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}], "answers": [{"Id": "75332856", "PostTypeId": "2", "ParentId": "75322565", "CreationDate": "2023-02-03T07:50:45.623", "Score": "0", "Body": "<p>I would suggest you to use the  <a href=\"https://learn.microsoft.com/en-us/power-bi/connect-data/desktop-connect-azure-cost-management\" rel=\"nofollow noreferrer\">Azure Cost Management connector in Power BI Desktop</a> , upload that on Power BI and set a daily refresh.</p>\n<p>You can then query the Datamart like a database daily.</p>\n", "OwnerUserId": "4652358", "LastActivityDate": "2023-02-03T07:50:45.623", "CommentCount": "0", "ContentLicense": "CC BY-SA 4.0", "history": [{"Id": "287371310", "PostHistoryTypeId": "2", "PostId": "75332856", "RevisionGUID": "5f27e46c-55bd-43d7-a07b-7f25b6cb6d39", "CreationDate": "2023-02-03T07:50:45.623", "UserId": "4652358", "Text": "I would suggest you to use the  [Azure Cost Management connector in Power BI Desktop][1] , upload that on Power BI and set a daily refresh. \r\n\r\nYou can then query the Datamart like a database daily.\r\n\r\n\r\n  [1]: https://learn.microsoft.com/en-us/power-bi/connect-data/desktop-connect-azure-cost-management", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": [{"source": "Text", "text": "I would suggest you to use the [Azure Cost Management connector in Power BI Desktop][1] , upload that on Power BI and set a daily refresh. ", "keywords": ["cost"]}, {"source": "Text", "text": "[1]: https://learn.microsoft.com/en-us/power-bi/connect-data/desktop-connect-azure-cost-management", "keywords": ["cost"]}]}], "filtered-sentences": [{"source": "Body", "text": "I would suggest you to use the Azure Cost Management connector in Power BI Desktop , upload that on Power BI and set a daily refresh. ", "keywords": ["cost"]}]}, {"Id": "75332361", "PostTypeId": "2", "ParentId": "75322565", "CreationDate": "2023-02-03T06:49:07.843", "Score": "1", "Body": "<p>Is Setting the time_frame to custom allow me to do this?</p>\n<p>Yes, we can do this via <a href=\"https://learn.microsoft.com/en-us/rest/api/cost-management/exports/get?source=recommendations&amp;tabs=HTTP\" rel=\"nofollow noreferrer\">json</a> api.<br />\n<img src=\"https://i.stack.imgur.com/ZBRmr.png\" alt=\"enter image description here\" /></p>\n<p>Terraform provider it self not supporting this option. Refer below screenshots.</p>\n<p>I have replicated the ways using terraform, no luck. <strong>Using terraform we have only below custom options.</strong>  time_frame only allows below mentioned parameters.\n<img src=\"https://i.stack.imgur.com/tnU3V.png\" alt=\"enter image description here\" /></p>\n<p><strong>Possible values include:  <code>WeekToDate</code>,  <code>MonthToDate</code>,  <code>BillingMonthToDate</code>,  <code>TheLastWeek</code>,  <code>TheLastMonth</code>,  <code>TheLastBillingMonth</code>,  <code>Custom</code>.</strong></p>\n<p><strong>seems the respective custom parameters are specific to Month.</strong>\nwe can use like</p>\n<pre><code>time_frame  =  &quot;TheLastMonth&quot;\n</code></pre>\n<p><img src=\"https://i.stack.imgur.com/dwuNw.png\" alt=\"enter image description here\" /></p>\n", "OwnerUserId": "20264791", "LastActivityDate": "2023-02-03T06:49:07.843", "CommentCount": "0", "ContentLicense": "CC BY-SA 4.0", "history": [{"Id": "287368652", "PostHistoryTypeId": "2", "PostId": "75332361", "RevisionGUID": "ab601202-bf42-4880-ad53-22070179761d", "CreationDate": "2023-02-03T06:49:07.843", "UserId": "20264791", "Text": "\r\nIs Setting the time_frame to custom allow me to do this?\r\n\r\nYes, we can do this via [json](https://learn.microsoft.com/en-us/rest/api/cost-management/exports/get?source=recommendations&tabs=HTTP) api.  \r\n![enter image description here](https://i.stack.imgur.com/ZBRmr.png)\r\n\r\nTerraform provider it self not supporting this option. Refer below screenshots.\r\n\r\nI have replicated the ways using terraform, no luck. **Using terraform we have only below custom options.**  time_frame only allows below mentioned parameters.\r\n![enter image description here](https://i.stack.imgur.com/tnU3V.png)\r\n\r\n**Possible values include:  `WeekToDate`,  `MonthToDate`,  `BillingMonthToDate`,  `TheLastWeek`,  `TheLastMonth`,  `TheLastBillingMonth`,  `Custom`.**\r\n\r\n**seems the respective custom parameters are specific to Month.**\r\nwe can use like \r\n\r\n    time_frame  =  \"TheLastMonth\"\r\n![enter image description here](https://i.stack.imgur.com/dwuNw.png)", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": [{"source": "Text", "text": "Yes, we can do this via [json](https://learn.microsoft.com/en-us/rest/api/cost-management/exports/get?source=recommendations&tabs=HTTP) api. ![enter image description here](https://i.stack.imgur.com/ZBRmr.png) Terraform provider it self not supporting this option. ", "keywords": ["cost", "provider"]}]}], "filtered-sentences": [{"source": "Body", "text": "Terraform provider it self not supporting this option. ", "keywords": ["provider"]}]}], "contains-topic": true, "filtered-sentences": [{"source": "Title", "text": "How to make an azure cost management export run daily and only export that day or previous days data? ", "keywords": ["cost"]}, {"source": "Body", "text": "Will i have to set a start_date and end_date? and if so can i then run an update request daily potentially to change the days in a script someway as an alternative option Tried creating a day-to-month export however the file is too large and comes with unwanted data as the end of the month comes along", "keywords": ["change"]}]}