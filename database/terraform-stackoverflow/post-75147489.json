{"Id": "75147489", "PostTypeId": "1", "AcceptedAnswerId": "75148833", "CreationDate": "2023-01-17T13:53:44.977", "Score": "3", "ViewCount": "355", "Body": "<p>Can we automate <a href=\"https://cloud.google.com/billing/docs/how-to/export-data-bigquery\" rel=\"nofollow noreferrer\">GCP billing export into BQ</a> through Terraform?</p>\n<p>I tried below terraform code but it's not working. So, not sure if GCP billing exporting into BQ would be possible through Terraform or not.</p>\n<pre><code>resource &quot;google_logging_billing_account_sink&quot; &quot;billing-sink&quot; {\n  name            = &quot;billing-sink&quot;\n  description     = &quot;Billing export&quot;\n  billing_account = &quot;**********&quot;\n  unique_writer_identity = true\n  destination = &quot;bigquery.googleapis.com/projects/${var.project_name}/datasets/${google_bigquery_dataset.billing_export.dataset_id}&quot;\n}\n\nresource &quot;google_project_iam_member&quot; &quot;log_writer&quot; {\n  project = var.project_name\n  role    = &quot;roles/bigquery.dataEditor&quot;\n  member  = google_logging_billing_account_sink.billing-sink.writer_identity\n}\n</code></pre>\n", "OwnerUserId": "11527457", "LastActivityDate": "2023-01-17T15:41:35.997", "Title": "GCP cloud billing export into BQ through terraform", "Tags": "<google-cloud-platform><terraform><terraform-provider-gcp>", "AnswerCount": "1", "CommentCount": "0", "ContentLicense": "CC BY-SA 4.0", "history": [{"Id": "286310714", "PostHistoryTypeId": "2", "PostId": "75147489", "RevisionGUID": "e4b0ddaa-ed9e-4da7-9a1f-cebd6370d609", "CreationDate": "2023-01-17T13:53:44.977", "UserId": "11527457", "Text": "Can we automate [GCP billing export into BQ](https://cloud.google.com/billing/docs/how-to/export-data-bigquery) through Terraform?\r\n\r\nI tried below terraform code but it's not working. So, not sure if GCP billing exporting into BQ would be possible through Terraform or not.\r\n\r\n```\r\nresource \"google_logging_billing_account_sink\" \"billing-sink\" {\r\n  name            = \"billing-sink\"\r\n  description     = \"Billing export\"\r\n  billing_account = \"**********\"\r\n  unique_writer_identity = true\r\n  destination = \"bigquery.googleapis.com/projects/${var.project_name}/datasets/${google_bigquery_dataset.billing_export.dataset_id}\"\r\n}\r\n\r\nresource \"google_project_iam_member\" \"log_writer\" {\r\n  project = var.project_name\r\n  role    = \"roles/bigquery.dataEditor\"\r\n  member  = google_logging_billing_account_sink.billing-sink.writer_identity\r\n}\r\n```", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": [{"source": "Text", "text": "Can we automate [GCP billing export into BQ](https://cloud.google.com/billing/docs/how-to/export-data-bigquery) through Terraform? ", "keywords": ["bill"]}, {"source": "Text", "text": "So, not sure if GCP billing exporting into BQ would be possible through Terraform or not. ``` resource \"google_logging_billing_account_sink\" \"billing-sink\" { name = \"billing-sink\" description = \"Billing export\" billing_account = \"**********\" unique_writer_identity = true destination = \"bigquery.googleapis.com/projects/${var.project_name}/datasets/${google_bigquery_dataset.billing_export.dataset_id}\" } resource \"google_project_iam_member\" \"log_writer\" { project = var.project_name role = \"roles/bigquery.dataEditor\" member = google_logging_billing_account_sink.billing-sink.writer_identity } ```", "keywords": ["bill"]}]}, {"Id": "286310716", "PostHistoryTypeId": "1", "PostId": "75147489", "RevisionGUID": "e4b0ddaa-ed9e-4da7-9a1f-cebd6370d609", "CreationDate": "2023-01-17T13:53:44.977", "UserId": "11527457", "Text": "GCP cloud billing export into BQ through terraform", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": [{"source": "Text", "text": "GCP cloud billing export into BQ through terraform", "keywords": ["bill"]}]}, {"Id": "286310717", "PostHistoryTypeId": "3", "PostId": "75147489", "RevisionGUID": "e4b0ddaa-ed9e-4da7-9a1f-cebd6370d609", "CreationDate": "2023-01-17T13:53:44.977", "UserId": "11527457", "Text": "<google-cloud-platform><terraform><terraform-provider-gcp>", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}, {"Id": "286310718", "PostHistoryTypeId": "66", "PostId": "75147489", "RevisionGUID": "e4b0ddaa-ed9e-4da7-9a1f-cebd6370d609", "CreationDate": "2023-01-17T13:53:44.977", "UserId": "11527457", "filtered-sentences": []}], "answers": [{"Id": "75148833", "PostTypeId": "2", "ParentId": "75147489", "CreationDate": "2023-01-17T15:41:35.997", "Score": "2", "Body": "<p>Unfortunately,there is no such option. This concern is already raised under <a href=\"https://github.com/hashicorp/terraform-provider-google/issues/4848\" rel=\"nofollow noreferrer\">github</a> and this is in enhancement. Currently there is no ETA available. I can see in terraform only  <a href=\"https://registry.terraform.io/providers/hashicorp/google/latest/docs/resources/logging_billing_account_sink\" rel=\"nofollow noreferrer\">google_logging_billing_account_sink</a> and Automating <a href=\"https://kosyfrances.com/bigquery-logsink/\" rel=\"nofollow noreferrer\">logs export to BigQuery with Terraform.</a></p>\n", "OwnerUserId": "19230181", "LastActivityDate": "2023-01-17T15:41:35.997", "CommentCount": "0", "ContentLicense": "CC BY-SA 4.0", "history": [{"Id": "286318340", "PostHistoryTypeId": "2", "PostId": "75148833", "RevisionGUID": "cfe95739-2666-469a-a8b0-2bf3708a0235", "CreationDate": "2023-01-17T15:41:35.997", "UserId": "19230181", "Text": "Unfortunately,there is no such option. This concern is already raised under [github][1] and this is in enhancement. Currently there is no ETA available. I can see in terraform only  [google_logging_billing_account_sink][2] and Automating [logs export to BigQuery with Terraform.][3]\r\n\r\n\r\n  [1]: https://github.com/hashicorp/terraform-provider-google/issues/4848\r\n  [2]: https://registry.terraform.io/providers/hashicorp/google/latest/docs/resources/logging_billing_account_sink\r\n  [3]: https://kosyfrances.com/bigquery-logsink/", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": [{"source": "Text", "text": "I can see in terraform only [google_logging_billing_account_sink][2] and Automating [logs export to BigQuery with Terraform.][3] [1]: https://github.com/hashicorp/terraform-provider-google/issues/4848 [2]: https://registry.terraform.io/providers/hashicorp/google/latest/docs/resources/logging_billing_account_sink [3]: https://kosyfrances.com/bigquery-logsink/", "keywords": ["provider"]}]}], "filtered-sentences": []}], "contains-topic": true, "filtered-sentences": [{"source": "Title", "text": "GCP cloud billing export into BQ through terraform", "keywords": ["bill"]}, {"source": "Body", "text": "Can we automate GCP billing export into BQ through Terraform? ", "keywords": ["bill"]}, {"source": "Body", "text": "So, not sure if GCP billing exporting into BQ would be possible through Terraform or not.", "keywords": ["bill"]}]}