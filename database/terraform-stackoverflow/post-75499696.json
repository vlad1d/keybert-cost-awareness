{"Id": "75499696", "PostTypeId": "1", "AcceptedAnswerId": "75499784", "CreationDate": "2023-02-19T11:10:42.247", "Score": "0", "ViewCount": "189", "Body": "<p>I use the terraform modules <strong>terraform-google-modules/folders/google</strong> and <strong>terraform-google-modules/project-factory/google</strong>  and I cannot figure out how to reference one created folder that I need to use in the project factory module. The output seems to be IDS as well not one ID\n<a href=\"https://registry.terraform.io/modules/terraform-google-modules/project-factory/google/latest\" rel=\"nofollow noreferrer\">https://registry.terraform.io/modules/terraform-google-modules/project-factory/google/latest</a>\n<a href=\"https://registry.terraform.io/modules/terraform-google-modules/folders/google/latest\" rel=\"nofollow noreferrer\">https://registry.terraform.io/modules/terraform-google-modules/folders/google/latest</a></p>\n<p>I would like to reference the common folder ID so the project I create sits in the right folder hierarchy.\nI read plenty of documentation and tried to find examples but everything I find around folders is the folder resources not folder module.</p>\n<pre><code>// setup folder structure in gcp\nmodule &quot;folders&quot; {\n  source  = &quot;terraform-google-modules/folders/google&quot;\n  version = &quot;~&gt; 3.0&quot;\n\n  parent  = &quot;folders/60860476666&quot;\n\n  names = [\n    &quot;development&quot;,\n    &quot;staging&quot;,\n    &quot;production&quot;,\n    &quot;common&quot;,\n  ]\n\n  set_roles = true\n\n  prefix = &quot;fldr&quot;\n  \n  per_folder_admins = {\n    dev = &quot;group:gcp-organization-admins@mydomain.me&quot;\n    staging = &quot;group:gcp-organization-admins@mydomain.me&quot;\n    production = &quot;group:gcp-organization-admins@mydomain.me&quot;\n  }\n\n  all_folder_admins = [\n    &quot;group:gcp-organization-admins@mydomain.me&quot;,\n  ]\n}\n\n// setup logging project \nmodule &quot;project-factory-logging&quot; {\n  source                  = &quot;terraform-google-modules/project-factory/google&quot;\n  version                 = &quot;~&gt; 14.0&quot;\n  random_project_id       = true\n  name                    = &quot;shared-logging&quot;\n  folder_id               = module.folder**s.????**\n  org_id                  = var.organization_id\n  billing_account         = var.billing_account\n  default_service_account = &quot;deprivilege&quot;\n}\n</code></pre>\n", "OwnerUserId": "21244132", "LastEditorUserId": "21244132", "LastEditDate": "2023-02-19T11:11:51.873", "LastActivityDate": "2023-02-19T11:24:59.383", "Title": "Referencing folder ID from module - google terraform folders module and project factor module", "Tags": "<google-cloud-platform><terraform><terraform-provider-gcp>", "AnswerCount": "1", "CommentCount": "0", "ContentLicense": "CC BY-SA 4.0", "history": [{"Id": "288348675", "PostHistoryTypeId": "2", "PostId": "75499696", "RevisionGUID": "ae14f4d4-0cad-4161-aa8b-f8627738b248", "CreationDate": "2023-02-19T11:10:42.247", "UserId": "21244132", "Text": "I use the terraform modules **terraform-google-modules/folders/google** and **terraform-google-modules/project-factory/google**  and I cannot figure out how to reference the created folders in the project factor. The output seems to be IDS as well not one ID\r\nhttps://registry.terraform.io/modules/terraform-google-modules/project-factory/google/latest\r\nhttps://registry.terraform.io/modules/terraform-google-modules/folders/google/latest \r\n\r\nI would like to reference the common folder ID so the project I create sits in the right folder hierarchy.\r\nI read plenty of documentation and tried to find examples but everything I find around folders is the folder resources not folder module.\r\n\r\n\r\n```\r\n// setup folder structure in gcp\r\nmodule \"folders\" {\r\n  source  = \"terraform-google-modules/folders/google\"\r\n  version = \"~> 3.0\"\r\n\r\n  parent  = \"folders/60860476666\"\r\n\r\n  names = [\r\n    \"development\",\r\n    \"staging\",\r\n    \"production\",\r\n    \"common\",\r\n  ]\r\n\r\n  set_roles = true\r\n\r\n  prefix = \"fldr\"\r\n  \r\n  per_folder_admins = {\r\n    dev = \"group:gcp-organization-admins@mydomain.me\"\r\n    staging = \"group:gcp-organization-admins@mydomain.me\"\r\n    production = \"group:gcp-organization-admins@mydomain.me\"\r\n  }\r\n\r\n  all_folder_admins = [\r\n    \"group:gcp-organization-admins@mydomain.me\",\r\n  ]\r\n}\r\n\r\n// setup logging project \r\nmodule \"project-factory-logging\" {\r\n  source                  = \"terraform-google-modules/project-factory/google\"\r\n  version                 = \"~> 14.0\"\r\n  random_project_id       = true\r\n  name                    = \"shared-logging\"\r\n  folder_id               = module.folder**s.????**\r\n  org_id                  = var.organization_id\r\n  billing_account         = var.billing_account\r\n  default_service_account = \"deprivilege\"\r\n}\r\n```\r\n ", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": [{"source": "Text", "text": "?** org_id = var.organization_id billing_account = var.billing_account default_service_account = \"deprivilege\" ", "keywords": ["bill"]}]}, {"Id": "288348677", "PostHistoryTypeId": "1", "PostId": "75499696", "RevisionGUID": "ae14f4d4-0cad-4161-aa8b-f8627738b248", "CreationDate": "2023-02-19T11:10:42.247", "UserId": "21244132", "Text": "Referencing folder ID from module - google terraform folders module and project factor module", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}, {"Id": "288348678", "PostHistoryTypeId": "3", "PostId": "75499696", "RevisionGUID": "ae14f4d4-0cad-4161-aa8b-f8627738b248", "CreationDate": "2023-02-19T11:10:42.247", "UserId": "21244132", "Text": "<google-cloud-platform><terraform><terraform-provider-gcp>", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}, {"Id": "288348679", "PostHistoryTypeId": "66", "PostId": "75499696", "RevisionGUID": "ae14f4d4-0cad-4161-aa8b-f8627738b248", "CreationDate": "2023-02-19T11:10:42.247", "UserId": "21244132", "filtered-sentences": []}, {"Id": "288348713", "PostHistoryTypeId": "5", "PostId": "75499696", "RevisionGUID": "36d70d70-b8c4-4a27-9f18-ce08e0330b6f", "CreationDate": "2023-02-19T11:11:51.873", "UserId": "21244132", "Comment": "added 26 characters in body", "Text": "I use the terraform modules **terraform-google-modules/folders/google** and **terraform-google-modules/project-factory/google**  and I cannot figure out how to reference one created folder that I need to use in the project factory module. The output seems to be IDS as well not one ID\r\nhttps://registry.terraform.io/modules/terraform-google-modules/project-factory/google/latest\r\nhttps://registry.terraform.io/modules/terraform-google-modules/folders/google/latest \r\n\r\nI would like to reference the common folder ID so the project I create sits in the right folder hierarchy.\r\nI read plenty of documentation and tried to find examples but everything I find around folders is the folder resources not folder module.\r\n\r\n\r\n```\r\n// setup folder structure in gcp\r\nmodule \"folders\" {\r\n  source  = \"terraform-google-modules/folders/google\"\r\n  version = \"~> 3.0\"\r\n\r\n  parent  = \"folders/60860476666\"\r\n\r\n  names = [\r\n    \"development\",\r\n    \"staging\",\r\n    \"production\",\r\n    \"common\",\r\n  ]\r\n\r\n  set_roles = true\r\n\r\n  prefix = \"fldr\"\r\n  \r\n  per_folder_admins = {\r\n    dev = \"group:gcp-organization-admins@mydomain.me\"\r\n    staging = \"group:gcp-organization-admins@mydomain.me\"\r\n    production = \"group:gcp-organization-admins@mydomain.me\"\r\n  }\r\n\r\n  all_folder_admins = [\r\n    \"group:gcp-organization-admins@mydomain.me\",\r\n  ]\r\n}\r\n\r\n// setup logging project \r\nmodule \"project-factory-logging\" {\r\n  source                  = \"terraform-google-modules/project-factory/google\"\r\n  version                 = \"~> 14.0\"\r\n  random_project_id       = true\r\n  name                    = \"shared-logging\"\r\n  folder_id               = module.folder**s.????**\r\n  org_id                  = var.organization_id\r\n  billing_account         = var.billing_account\r\n  default_service_account = \"deprivilege\"\r\n}\r\n```\r\n ", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": [{"source": "Text", "text": "?** org_id = var.organization_id billing_account = var.billing_account default_service_account = \"deprivilege\" ", "keywords": ["bill"]}]}], "answers": [{"Id": "75499784", "PostTypeId": "2", "ParentId": "75499696", "CreationDate": "2023-02-19T11:24:59.383", "Score": "1", "Body": "<p>To get <code>common</code> folder it, the following should be enough:</p>\n<pre><code>folder_id               = module.folders.folders_map[&quot;common&quot;].name\n</code></pre>\n", "OwnerUserId": "248823", "LastActivityDate": "2023-02-19T11:24:59.383", "CommentCount": "2", "ContentLicense": "CC BY-SA 4.0", "comments": [{"Id": "133209454", "PostId": "75499784", "Score": "0", "Text": "Thank you. For my own learning/reference... where do I find in the manuals a reference to this ?   thanks", "CreationDate": "2023-02-19T14:33:28.920", "UserId": "21244132", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}, {"Id": "133214606", "PostId": "75499784", "Score": "0", "Text": "@JulianWiegmann On github https://github.com/terraform-google-modules/terraform-google-folders", "CreationDate": "2023-02-19T22:23:40.540", "UserId": "248823", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}], "history": [{"Id": "288349158", "PostHistoryTypeId": "2", "PostId": "75499784", "RevisionGUID": "71284a0c-6db4-4e0b-af31-3a92445f1376", "CreationDate": "2023-02-19T11:24:59.383", "UserId": "248823", "Text": "To get `common` folder it, the following should be enough:\r\n\r\n```\r\nfolder_id               = module.folders.folders_map[\"common\"].name\r\n```", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}], "filtered-sentences": []}], "contains-topic": true, "filtered-sentences": []}