{"Id": "69447032", "PostTypeId": "1", "CreationDate": "2021-10-05T08:20:17.377", "Score": "0", "ViewCount": "1125", "Body": "<p>I'm trying to set up a GCP billing alert using Terraform. The <a href=\"https://registry.terraform.io/providers/hashicorp/google/latest/docs/resources/billing_budget\" rel=\"nofollow noreferrer\">docs say</a>:</p>\n<blockquote>\n<p>Your account must have the serviceusage.services.use permission on the billing_project you defined.</p>\n</blockquote>\n<p>The <a href=\"https://cloud.google.com/service-usage/docs/access-control\" rel=\"nofollow noreferrer\">Google docs</a> also say to set this permission on the project but don't say how.</p>\n<p>How can I add that permission to my project (either via the console or ideally Terraform) to allow myself to create billing alerts?</p>\n<p>My provider currently looks like this:</p>\n<pre><code>provider &quot;google-beta&quot; {\n  alias                 = &quot;billing&quot;\n  billing_project       = &quot;me-${var.env}&quot;\n  project               = &quot;me-${var.env}&quot;\n  region                = &quot;europe-west1&quot;\n  zone                  = &quot;europe-west1-d&quot;\n  user_project_override = true\n}\n</code></pre>\n", "OwnerUserId": "2400966", "LastActivityDate": "2021-10-05T11:56:14.613", "Title": "How to add permissions to a project in GCP?", "Tags": "<google-cloud-platform><terraform-provider-gcp>", "AnswerCount": "1", "CommentCount": "2", "ContentLicense": "CC BY-SA 4.0", "comments": [{"Id": "122750976", "PostId": "69447032", "Score": "0", "Text": "You don't grant permissions/roles to a project, but on an account (user or service). What did you try to do?", "CreationDate": "2021-10-05T09:58:38.710", "UserId": "11372593", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}, {"Id": "122762597", "PostId": "69447032", "Score": "0", "Text": "1) CLI: **gcloud services enable serviceusage.googleapis.com** 2) GUI: https://console.cloud.google.com/apis/library/serviceusage.googleapis.com", "CreationDate": "2021-10-05T17:28:15.360", "UserId": "8016720", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}], "history": [{"Id": "255143062", "PostHistoryTypeId": "2", "PostId": "69447032", "RevisionGUID": "cda1a658-e092-4e93-ae73-b2aa9d8111a6", "CreationDate": "2021-10-05T08:20:17.377", "UserId": "2400966", "Text": "I'm trying to set up a GCP billing alert using Terraform. The [docs say](https://registry.terraform.io/providers/hashicorp/google/latest/docs/resources/billing_budget):\r\n\r\n> Your account must have the serviceusage.services.use permission on the billing_project you defined.\r\n\r\nThe [Google docs](https://cloud.google.com/service-usage/docs/access-control) also say to set this permission on the project but don't say how.\r\n\r\nHow can I add that permission to my project (either via the console or ideally Terraform) to allow myself to create billing alerts? \r\n\r\nMy provider currently looks like this:\r\n```\r\nprovider \"google-beta\" {\r\n  alias                 = \"billing\"\r\n  billing_project       = \"me-${var.env}\"\r\n  project               = \"me-${var.env}\"\r\n  region                = \"europe-west1\"\r\n  zone                  = \"europe-west1-d\"\r\n  user_project_override = true\r\n}\r\n```", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": [{"source": "Text", "text": "I'm trying to set up a GCP billing alert using Terraform. ", "keywords": ["bill"]}, {"source": "Text", "text": "The [docs say](https://registry.terraform.io/providers/hashicorp/google/latest/docs/resources/billing_budget): > Your account must have the serviceusage.services.use permission on the billing_project you defined. ", "keywords": ["bill"]}, {"source": "Text", "text": "How can I add that permission to my project (either via the console or ideally Terraform) to allow myself to create billing alerts? ", "keywords": ["bill"]}, {"source": "Text", "text": "My provider currently looks like this: ``` provider \"google-beta\" { alias = \"billing\" billing_project = \"me-${var.env}\" project = \"me-${var.env}\" region = \"europe-west1\" zone = \"europe-west1-d\" user_project_override = true } ```", "keywords": ["bill", "provider"]}]}, {"Id": "255143064", "PostHistoryTypeId": "1", "PostId": "69447032", "RevisionGUID": "cda1a658-e092-4e93-ae73-b2aa9d8111a6", "CreationDate": "2021-10-05T08:20:17.377", "UserId": "2400966", "Text": "How to add permissions to a project in GCP?", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}, {"Id": "255143065", "PostHistoryTypeId": "3", "PostId": "69447032", "RevisionGUID": "cda1a658-e092-4e93-ae73-b2aa9d8111a6", "CreationDate": "2021-10-05T08:20:17.377", "UserId": "2400966", "Text": "<google-cloud-platform><terraform-provider-gcp>", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}], "answers": [{"Id": "69449997", "PostTypeId": "2", "ParentId": "69447032", "CreationDate": "2021-10-05T11:56:14.613", "Score": "0", "Body": "<p>Cloud budgets can only be created and managed by users with a Billing Account Administrator role, or a custom role with appropriate budget management permissions. This means that project owners without the Billing Account Admin role cannot create budgets for their respective projects.</p>\n<p>To create a budget for your Cloud Billing account, you need a role that includes the following <a href=\"https://cloud.google.com/iam/docs/understanding-roles#billing-roles\" rel=\"nofollow noreferrer\">permissions</a> on the Cloud Billing account:</p>\n<ul>\n<li><a href=\"https://cloud.google.com/billing/docs/how-to/custom-roles#budget_alerts\" rel=\"nofollow noreferrer\">billing.budgets.create</a> to create a new budget.</li>\n<li><a href=\"https://cloud.google.com/billing/docs/how-to/custom-roles#budget_alerts\" rel=\"nofollow noreferrer\">billing.budgets.get and billing.budgets.list</a> to view all budgets for the Cloud Billing account.</li>\n</ul>\n<p>To gain these permissions, ask your administrator to grant you one of the following <a href=\"https://cloud.google.com/billing/docs/how-to/billing-access\" rel=\"nofollow noreferrer\">Cloud Billing IAM</a> roles on your Cloud Billing account:</p>\n<ul>\n<li>Billing Account Administrator</li>\n<li>Billing Account Costs Manager</li>\n</ul>\n<p>Steps to add or remove Cloud Billing permissions:</p>\n<p>1.Sign in to the Google Cloud Console.</p>\n<ul>\n<li><p>Open the Cloud Console <strong>Navigation menu</strong> and then select <strong>Billing</strong>.</p>\n</li>\n<li><p>If you have more than one Cloud Billing account, do one of the following:</p>\n<ul>\n<li>To manage Cloud Billing for the current project, select <strong>Go to linked billing account.</strong></li>\n<li>To locate a different Cloud Billing account, select <strong>Manage billing accounts</strong> and then choose the account that you want to manage.</li>\n</ul>\n</li>\n</ul>\n<ol start=\"2\">\n<li><p>In the Billing navigation menu, click <strong>Account management</strong>.</p>\n</li>\n<li><p>Use the <strong>Permissions</strong> panel to edit permissions for the selected Cloud Billing account. If the panel isn't already visible, click <strong>SHOW INFO PANEL</strong> to open it.</p>\n</li>\n</ol>\n<p>The <strong>Permissions panel</strong> is organized by role, along with the number of principals that have each role. For example, in your permissions panel, you might see\n- Billing Account Administrator (2 principals)\n- Billing Account User (6 principals)\n- Billing Account Viewer (10 principals)</p>\n<p>You can grant multiple roles to the same principal.</p>\n<p>To <strong>view the list of principals</strong> that have a role, click the <strong>role name</strong> to expand (or collapse) the list of principals.</p>\n<p>Refer to the links to <a href=\"https://cloud.google.com/billing/docs/how-to/billing-access#update-cloud-billing-permissions\" rel=\"nofollow noreferrer\">update Cloud Billing permissions</a> and <a href=\"https://cloud.google.com/billing/docs/how-to/budgets#overview\" rel=\"nofollow noreferrer\">creating budget alerts.</a></p>\n", "OwnerUserId": "15745136", "LastActivityDate": "2021-10-05T11:56:14.613", "CommentCount": "0", "ContentLicense": "CC BY-SA 4.0", "history": [{"Id": "255158238", "PostHistoryTypeId": "2", "PostId": "69449997", "RevisionGUID": "ccc0dc11-a9ce-4731-a23f-27257b1be1b9", "CreationDate": "2021-10-05T11:56:14.613", "UserId": "15745136", "Text": "Cloud budgets can only be created and managed by users with a Billing Account Administrator role, or a custom role with appropriate budget management permissions. This means that project owners without the Billing Account Admin role cannot create budgets for their respective projects.\r\n\r\nTo create a budget for your Cloud Billing account, you need a role that includes the following [permissions][1] on the Cloud Billing account:\r\n\r\n - [billing.budgets.create][2] to create a new budget.\r\n - [billing.budgets.get and billing.budgets.list][2] to view all budgets for the Cloud Billing account.\r\n\r\n To gain these permissions, ask your administrator to grant you one of the following [Cloud Billing IAM][3] roles on your Cloud Billing account:\r\n   \r\n   - Billing Account Administrator\r\n   - Billing Account Costs Manager\r\n\r\nSteps to add or remove Cloud Billing permissions:\r\n\r\n 1.Sign in to the Google Cloud Console.\r\n \r\n  - Open the Cloud Console **Navigation menu** and then select **Billing**.\r\n\r\n  -  If you have more than one Cloud Billing account, do one of the following:\r\n\r\n     - To manage Cloud Billing for the current project, select **Go to linked billing account.**\r\n     - To locate a different Cloud Billing account, select **Manage billing accounts** and then choose the account that you want to manage.\r\n\r\n2.  In the Billing navigation menu, click **Account management**.\r\n\r\n3. Use the **Permissions** panel to edit permissions for the selected Cloud Billing account. If the panel isn't already visible, click **SHOW INFO PANEL** to open it.\r\n\r\nThe **Permissions panel** is organized by role, along with the number of principals that have each role. For example, in your permissions panel, you might see\r\n        - Billing Account Administrator (2 principals)\r\n        - Billing Account User (6 principals)\r\n        - Billing Account Viewer (10 principals)\r\n\r\nYou can grant multiple roles to the same principal.\r\n\r\nTo **view the list of principals** that have a role, click the **role name** to expand (or collapse) the list of principals.\r\n\r\nRefer to the links to [update Cloud Billing permissions][4] and [creating budget alerts.][5]\r\n\r\n\r\n  [1]: https://cloud.google.com/iam/docs/understanding-roles#billing-roles\r\n  [2]: https://cloud.google.com/billing/docs/how-to/custom-roles#budget_alerts\r\n  [3]: https://cloud.google.com/billing/docs/how-to/billing-access\r\n  [4]: https://cloud.google.com/billing/docs/how-to/billing-access#update-cloud-billing-permissions\r\n  [5]: https://cloud.google.com/billing/docs/how-to/budgets#overview", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": [{"source": "Text", "text": "To create a budget for your Cloud Billing account, you need a role that includes the following [permissions][1] on the Cloud Billing account: - [billing.budgets.create][2] to create a new budget. - [billing.budgets.get and billing.budgets.list][2] to view all budgets for the Cloud Billing account. ", "keywords": ["bill"]}, {"source": "Text", "text": "- If you have more than one Cloud Billing account, do one of the following: - To manage Cloud Billing for the current project, select **Go to linked billing account.** - To locate a different Cloud Billing account, select **Manage billing accounts** and then choose the account that you want to manage. ", "keywords": ["bill"]}, {"source": "Text", "text": "Refer to the links to [update Cloud Billing permissions][4] and [creating budget alerts.][5] [1]: https://cloud.google.com/iam/docs/understanding-roles#billing-roles [2]: https://cloud.google.com/billing/docs/how-to/custom-roles#budget_alerts [3]: https://cloud.google.com/billing/docs/how-to/billing-access [4]: https://cloud.google.com/billing/docs/how-to/billing-access#update-cloud-billing-permissions [5]: https://cloud.google.com/billing/docs/how-to/budgets#overview", "keywords": ["bill"]}]}], "filtered-sentences": [{"source": "Body", "text": "To create a budget for your Cloud Billing account, you need a role that includes the following permissions on the Cloud Billing account: billing.budgets.create to create a new budget. ", "keywords": ["bill"]}, {"source": "Body", "text": "billing.budgets.get and billing.budgets.list to view all budgets for the Cloud Billing account. ", "keywords": ["bill"]}, {"source": "Body", "text": "If you have more than one Cloud Billing account, do one of the following: To manage Cloud Billing for the current project, select Go to linked billing account. ", "keywords": ["bill"]}, {"source": "Body", "text": "To locate a different Cloud Billing account, select Manage billing accounts and then choose the account that you want to manage. ", "keywords": ["bill"]}]}], "contains-topic": true, "filtered-sentences": [{"source": "Body", "text": "I'm trying to set up a GCP billing alert using Terraform. ", "keywords": ["bill"]}, {"source": "Body", "text": "The docs say: Your account must have the serviceusage.services.use permission on the billing_project you defined. ", "keywords": ["bill"]}, {"source": "Body", "text": "How can I add that permission to my project (either via the console or ideally Terraform) to allow myself to create billing alerts? ", "keywords": ["bill"]}, {"source": "Body", "text": "My provider currently looks like this:", "keywords": ["provider"]}]}