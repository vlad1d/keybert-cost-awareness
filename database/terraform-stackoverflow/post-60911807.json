{"Id": "60911807", "PostTypeId": "1", "CreationDate": "2020-03-29T08:33:48.153", "Score": "2", "ViewCount": "651", "Body": "<p>I cannot understand the rationale behind prohibiting a user that has no organisation to create new google cloud projects with terraform.\nIndeed, if I use <code>gcloud</code>, I am able to create new projects and I can also do that using the web console. </p>\n", "OwnerUserId": "4948552", "LastActivityDate": "2022-12-20T18:17:41.843", "Title": "Terraform: Google cloud. Why cannot I create a new project without having an organisation?", "Tags": "<google-cloud-platform><terraform><terraform-provider-gcp>", "AnswerCount": "1", "CommentCount": "4", "ContentLicense": "CC BY-SA 4.0", "comments": [{"Id": "107778245", "PostId": "60911807", "Score": "1", "Text": "Why do you think this is a requirement?", "CreationDate": "2020-03-29T19:00:49.030", "UserId": "2291321", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}, {"Id": "107789612", "PostId": "60911807", "Score": "0", "Text": "Can you please elaborate your question? \nTo me this limitation does not make sense.", "CreationDate": "2020-03-30T07:27:33.477", "UserId": "4948552", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}, {"Id": "107790000", "PostId": "60911807", "Score": "0", "Text": "I'm asking what leads you to thinking that Terraform needs you to have an organisation? Also what is wrong with having an organisation?", "CreationDate": "2020-03-30T07:44:06.880", "UserId": "2291321", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}, {"Id": "107791048", "PostId": "60911807", "Score": "0", "Text": "Sorry. It's written in the documentation: https://www.terraform.io/docs/providers/google/r/google_project.html\nOf course I can create projects with the console and use them as data resources in Terraform but this is not the point. \nHandling an organisation requires you to have a domain and provide it to Google.", "CreationDate": "2020-03-30T08:25:38.920", "UserId": "4948552", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": [{"source": "Text", "text": "Handling an organisation requires you to have a domain and provide it to Google.", "keywords": ["domain"]}]}], "history": [{"Id": "217924118", "PostHistoryTypeId": "2", "PostId": "60911807", "RevisionGUID": "e4c9fa31-2315-409e-9569-e2c3511dac72", "CreationDate": "2020-03-29T08:33:48.153", "UserId": "4948552", "Text": "I cannot understand the rationale behind prohibiting a user that has no organisation to create new google cloud projects with terraform.\r\nIndeed, if I use `gcloud`, I am able to create new projects and I can also do that using the web console. \r\n", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}, {"Id": "217924119", "PostHistoryTypeId": "1", "PostId": "60911807", "RevisionGUID": "e4c9fa31-2315-409e-9569-e2c3511dac72", "CreationDate": "2020-03-29T08:33:48.153", "UserId": "4948552", "Text": "Terraform: Google cloud. Why cannot I create a new project without having an organisation?", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}, {"Id": "217924120", "PostHistoryTypeId": "3", "PostId": "60911807", "RevisionGUID": "e4c9fa31-2315-409e-9569-e2c3511dac72", "CreationDate": "2020-03-29T08:33:48.153", "UserId": "4948552", "Text": "<google-cloud-platform><terraform><terraform-provider-gcp>", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}], "answers": [{"Id": "74866782", "PostTypeId": "2", "ParentId": "60911807", "CreationDate": "2022-12-20T17:32:04.450", "Score": "0", "Body": "<p>As mentioned in the <a href=\"https://registry.terraform.io/providers/hashicorp/google/latest/docs/resources/google_project\" rel=\"nofollow noreferrer\">documentation</a>:</p>\n<blockquote>\n<p>The user or service account that is running Terraform when creating a <code>google_project</code> resource must have <code>roles/resourcemanager.projectCreator</code> on the specified organization.</p>\n</blockquote>\n<p>The problem with <code>roles/resourcemanager.projectCreator</code> is, that it's an organization role - not project role. Therefore without organization one cannot get this role.</p>\n<p>The ability to do it using the console but not through the official Terraform way is strange indeed.</p>\n<p>But, it seems that there's a workaround, that will just require you to provide billing account and will enable you creating new project - by using the <code>project</code> module of Google's official <a href=\"https://github.com/GoogleCloudPlatform/cloud-foundation-fabric/tree/master/modules/project\" rel=\"nofollow noreferrer\">cloud-foundation-fabric</a>.</p>\n<p>Basic example:</p>\n<pre><code>module &quot;project&quot; {\n  source          = &quot;github.com/GoogleCloudPlatform/cloud-foundation-fabric//modules/project?ref=v19.0.0&quot;\n  billing_account = &quot;your-billing-account&quot;\n  name            = &quot;your-project-name&quot;\n  services = [\n    &quot;container.googleapis.com&quot;,\n  ]\n}\n</code></pre>\n<p>It might take some time (took me about 3.5 minutes), but did the job without creating organization.</p>\n", "OwnerUserId": "1269065", "LastEditorUserId": "1269065", "LastEditDate": "2022-12-20T18:17:41.843", "LastActivityDate": "2022-12-20T18:17:41.843", "CommentCount": "0", "ContentLicense": "CC BY-SA 4.0", "history": [{"Id": "284674636", "PostHistoryTypeId": "2", "PostId": "74866782", "RevisionGUID": "93439592-a8ca-43ce-bded-e3b68c248d98", "CreationDate": "2022-12-20T17:32:04.450", "UserId": "1269065", "Text": "As mentioned in the [documentation][1]:\r\n\r\n> The user or service account that is running Terraform when creating a ```google_project``` resource must have ```roles/resourcemanager.projectCreator``` on the specified organization.\r\n\r\nThe problem with ```roles/resourcemanager.projectCreator``` is, that it's an organization role - not project role. Therefore without organization one cannot get this role.  \r\n\r\nThe ability to do it using the console but not through the official Terraform way is strange indeed. \r\n\r\nBut, it seems that there's a workaround, that will just require you to provide billing account and will enable you creating new project - by using the ```project``` module of Google's official [cloud-foundation-fabric][2].  \r\n\r\nBasic example:  \r\n\r\n    terraform {\r\n      required_providers {\r\n        google = {\r\n          source  = \"hashicorp/google\"\r\n          version = \"~> 4.0\"\r\n        }\r\n      }\r\n      required_version = \">= 0.13\"\r\n    }\r\n\r\n    provider \"google\" {\r\n      project = \"your-project-name\"\r\n      region  = \"europe-west4\"\r\n      zone    = \"europe-west4-a\"\r\n    }\r\n    \r\n    module \"project\" {\r\n      source          = \"github.com/GoogleCloudPlatform/cloud-foundation-fabric//modules/project?ref=v19.0.0\"\r\n      billing_account = \"your-billing-account\"\r\n      name            = \"your-project-name\"\r\n      services = [\r\n        \"container.googleapis.com\",\r\n      ]\r\n    }\r\n\r\nIt might take some time (took me about 3.5 minutes), but did the job without creating organization.\r\n\r\n\r\n  [1]: https://registry.terraform.io/providers/hashicorp/google/latest/docs/resources/google_project\r\n  [2]: https://github.com/GoogleCloudPlatform/cloud-foundation-fabric/tree/master/modules/project", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": [{"source": "Text", "text": "But, it seems that there's a workaround, that will just require you to provide billing account and will enable you creating new project - by using the ```project``` module of Google's official [cloud-foundation-fabric][2]. ", "keywords": ["bill"]}, {"source": "Text", "text": "Basic example: terraform { required_providers { google = { source = \"hashicorp/google\" version = \"~> 4.0\" } } required_version = \">= 0.13\" } provider \"google\" { project = \"your-project-name\" region = \"europe-west4\" zone = \"europe-west4-a\" } module \"project\" { source = \"github.com/GoogleCloudPlatform/cloud-foundation-fabric//modules/project?ref=v19.0.0\" billing_account = \"your-billing-account\" name = \"your-project-name\" services = [ \"container.googleapis.com\", ] } It might take some time (took me about 3.5 minutes), but did the job without creating organization. [1]: https://registry.terraform.io/providers/hashicorp/google/latest/docs/resources/google_project [2]: https://github.com/GoogleCloudPlatform/cloud-foundation-fabric/tree/master/modules/project", "keywords": ["bill", "provider"]}]}, {"Id": "284677724", "PostHistoryTypeId": "5", "PostId": "74866782", "RevisionGUID": "ea9691df-7608-4d43-8c7c-286f8933bdcd", "CreationDate": "2022-12-20T18:17:41.843", "UserId": "1269065", "Comment": "Removing unnecessary ```terraform``` block", "Text": "As mentioned in the [documentation][1]:\r\n\r\n> The user or service account that is running Terraform when creating a ```google_project``` resource must have ```roles/resourcemanager.projectCreator``` on the specified organization.\r\n\r\nThe problem with ```roles/resourcemanager.projectCreator``` is, that it's an organization role - not project role. Therefore without organization one cannot get this role.  \r\n\r\nThe ability to do it using the console but not through the official Terraform way is strange indeed. \r\n\r\nBut, it seems that there's a workaround, that will just require you to provide billing account and will enable you creating new project - by using the ```project``` module of Google's official [cloud-foundation-fabric][2].  \r\n\r\nBasic example:  \r\n\r\n    module \"project\" {\r\n      source          = \"github.com/GoogleCloudPlatform/cloud-foundation-fabric//modules/project?ref=v19.0.0\"\r\n      billing_account = \"your-billing-account\"\r\n      name            = \"your-project-name\"\r\n      services = [\r\n        \"container.googleapis.com\",\r\n      ]\r\n    }\r\n\r\nIt might take some time (took me about 3.5 minutes), but did the job without creating organization.\r\n\r\n\r\n  [1]: https://registry.terraform.io/providers/hashicorp/google/latest/docs/resources/google_project\r\n  [2]: https://github.com/GoogleCloudPlatform/cloud-foundation-fabric/tree/master/modules/project", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": [{"source": "Text", "text": "But, it seems that there's a workaround, that will just require you to provide billing account and will enable you creating new project - by using the ```project``` module of Google's official [cloud-foundation-fabric][2]. ", "keywords": ["bill"]}, {"source": "Text", "text": "Basic example: module \"project\" { source = \"github.com/GoogleCloudPlatform/cloud-foundation-fabric//modules/project?ref=v19.0.0\" billing_account = \"your-billing-account\" name = \"your-project-name\" services = [ \"container.googleapis.com\", ] } It might take some time (took me about 3.5 minutes), but did the job without creating organization. [1]: https://registry.terraform.io/providers/hashicorp/google/latest/docs/resources/google_project [2]: https://github.com/GoogleCloudPlatform/cloud-foundation-fabric/tree/master/modules/project", "keywords": ["bill"]}]}], "filtered-sentences": [{"source": "Body", "text": "But, it seems that there's a workaround, that will just require you to provide billing account and will enable you creating new project - by using the project module of Google's official cloud-foundation-fabric. ", "keywords": ["bill"]}]}], "contains-topic": true, "filtered-sentences": []}