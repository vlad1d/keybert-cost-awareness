{"Id": "73383129", "PostTypeId": "1", "CreationDate": "2022-08-17T05:09:12.600", "Score": "0", "ViewCount": "92", "Body": "<p>I'm trying to use terraform to provision 3 athena databases. These database are going to sit in same S3 bucket but just different path inside the bucket.</p>\n<ul>\n<li>my_athena (prod): path: s3://my_s3_bucket/</li>\n<li>my_athena_uat (uat): path: s3://my_s3_bucket/uat</li>\n<li>my_athena_dev (dev): path: s3://my_s3_bucket/dev</li>\n</ul>\n<p>I checked the <a href=\"https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/athena_database\" rel=\"nofollow noreferrer\">documentation</a> in terraform but can't seem find an attribute supporting the sub-directory.</p>\n<p>Would anyone be able to advise?</p>\n<p>P.S: I understand it's probably not a best practice to put all 3 database in same bucket but it happened for some reasons I don't want to address now.</p>\n", "OwnerUserId": "3492125", "LastActivityDate": "2022-08-17T05:09:12.600", "Title": "[Terraform]: Create Athena database in S3 bucket with different prefix for different environment", "Tags": "<terraform><terraform-provider-aws><amazon-athena>", "AnswerCount": "0", "CommentCount": "2", "ContentLicense": "CC BY-SA 4.0", "comments": [{"Id": "129602887", "PostId": "73383129", "Score": "1", "Text": "There's no option for that. It's not possible. It's also a really bad idea in general to share a bucket for dev/uat/prod. S3 buckets are free, and you can create as many as you want. You only pay for the objects in the bucket, and spreading them across 3 buckets would be the same cost as having them all in one bucket, so there is no good reason to bundle multiple environments in a single bucket.", "CreationDate": "2022-08-17T12:22:26.683", "UserId": "13070", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": [{"source": "Text", "text": "You only pay for the objects in the bucket, and spreading them across 3 buckets would be the same cost as having them all in one bucket, so there is no good reason to bundle multiple environments in a single bucket.", "keywords": ["cost", "pay"]}]}, {"Id": "129619544", "PostId": "73383129", "Score": "0", "Text": "Thanks for confirming, @MarkB. I understand it's not a good practice but this is just one of the many legacy issues I inherited. I can only tackle one at a time.", "CreationDate": "2022-08-18T05:57:43.900", "UserId": "3492125", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}], "history": [{"Id": "276392070", "PostHistoryTypeId": "2", "PostId": "73383129", "RevisionGUID": "a05eb8e9-944b-4b37-a61a-91c043591508", "CreationDate": "2022-08-17T05:09:12.600", "UserId": "3492125", "Text": "I'm trying to use terraform to provision 3 athena databases. These database are going to sit in same S3 bucket but just different path inside the bucket. \r\n\r\n- my_athena (prod): path: s3://my_s3_bucket/\r\n- my_athena_uat (uat): path: s3://my_s3_bucket/uat\r\n- my_athena_dev (dev): path: s3://my_s3_bucket/dev\r\n\r\nI checked the [documentation](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/athena_database) in terraform but can't seem find an attribute supporting the sub-directory. \r\n\r\nWould anyone be able to advise? \r\n\r\nP.S: I understand it's probably not a best practice to put all 3 database in same bucket but it happened for some reasons I don't want to address now. \r\n", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}, {"Id": "276392072", "PostHistoryTypeId": "1", "PostId": "73383129", "RevisionGUID": "a05eb8e9-944b-4b37-a61a-91c043591508", "CreationDate": "2022-08-17T05:09:12.600", "UserId": "3492125", "Text": "[Terraform]: Create Athena database in S3 bucket with different prefix for different environment", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}, {"Id": "276392073", "PostHistoryTypeId": "3", "PostId": "73383129", "RevisionGUID": "a05eb8e9-944b-4b37-a61a-91c043591508", "CreationDate": "2022-08-17T05:09:12.600", "UserId": "3492125", "Text": "<terraform><terraform-provider-aws><amazon-athena>", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}], "contains-topic": true, "filtered-sentences": []}