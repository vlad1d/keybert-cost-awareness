{"Id": "70832612", "PostTypeId": "1", "AcceptedAnswerId": "70889114", "CreationDate": "2022-01-24T10:50:22.117", "Score": "-1", "ViewCount": "5164", "Body": "<p>We are trying to spin up an azure subscription using terraform. But unable to find any exact code which delivers successful subscription creation. Below is the brief description of the possible scenarios we have tried executing.</p>\n<ol>\n<li><p>We used the below code and executed it and the role we had was\n<code>Account Owner Role</code> -But the code is successful but we aren't able to\nsee the subscription in the portal. Link for the code:</p>\n<p><a href=\"https://github.com/aztfmod/terraform-azurerm-caf/tree/5.4.8/modules/subscriptions\" rel=\"nofollow noreferrer\">https://github.com/aztfmod/terraform-azurerm-caf/tree/5.4.8/modules/subscriptions</a></p>\n</li>\n<li><p>Below is the next code we tested with again <code>Account Owner role</code> - But\nthe error message is below. Link for the code: <a href=\"https://registry.terraform.io/providers/hashicorp/azurerm/latest/docs/resources/subscription#example-usage---creating-a-new-alias-and-subscription-for-a-microsoft-customer-account\" rel=\"nofollow noreferrer\">https://registry.terraform.io/providers/hashicorp/azurerm/latest/docs/resources/subscription#example-usage---creating-a-new-alias-and-subscription-for-a-microsoft-customer-account</a></p>\n<pre><code>Error Message: creating new Subscription (Alias &quot;XXXX7&quot;):\nsubscription.AliasClient#Create: Failure sending request:\nStatusCode=0 -- Original Error: Code=&quot;InvalidSubCreationScope&quot;\nMessage=&quot;Not a valid subscription creation scope&quot;, with\nazurerm_subscription.testtf, on main.tf line 31, in resource\n&quot;azurerm_subscription&quot; &quot;testtf&quot;:   31: resouce\n&quot;azurerm_subscription&quot; &quot;testtf&quot; {\n</code></pre>\n</li>\n<li><p>Another code we tried executing - But its destroying the older\nsubscription. Link for the code is same:\n<a href=\"https://registry.terraform.io/providers/hashicorp/azurerm/latest/docs/resources/subscription#example-usage---creating-a-new-alias-and-subscription-for-a-microsoft-customer-account\" rel=\"nofollow noreferrer\">https://registry.terraform.io/providers/hashicorp/azurerm/latest/docs/resources/subscription#example-usage---creating-a-new-alias-and-subscription-for-a-microsoft-customer-account</a></p>\n</li>\n</ol>\n<p>Request any suggestions/help at the earliest for the same so can help us.\nThanks in Advance!</p>\n", "OwnerUserId": "13840480", "LastEditorUserId": "15969299", "LastEditDate": "2022-01-28T05:16:00.683", "LastActivityDate": "2022-11-23T10:34:12.290", "Title": "Azure Subscription creation using Terraform", "Tags": "<azure><terraform><terraform-provider-azure>", "AnswerCount": "2", "CommentCount": "9", "ContentLicense": "CC BY-SA 4.0", "comments": [{"Id": "125220618", "PostId": "70832612", "Score": "1", "Text": "this is well documented https://registry.terraform.io/providers/hashicorp/azurerm/latest/docs/resources/subscription", "CreationDate": "2022-01-24T10:51:32.163", "UserId": "542251", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}, {"Id": "125221764", "PostId": "70832612", "Score": "0", "Text": "@Liam We have already gone through the same and the above 2 and 3  pointer depicts on that code with error message. Can we sync on the same and try once so that helpful.", "CreationDate": "2022-01-24T11:44:37.440", "UserId": "13840480", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}, {"Id": "125221892", "PostId": "70832612", "Score": "1", "Text": "Please create a [mcve]", "CreationDate": "2022-01-24T11:50:09.180", "UserId": "542251", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}, {"Id": "125222021", "PostId": "70832612", "Score": "0", "Text": "@liam we have used the same link given by you above https://registry.terraform.io/providers/hashicorp/azurerm/latest/docs/resources/subscription-  \" Example Usage - creating a new Alias and Subscription for a Microsoft Customer Account\"  Below is the message :creating new Subscription (Alias \"XXXX7\"): subscription.AliasClient#Create: Failure sending request: StatusCode=0 -- Original Error: Code=\"InvalidSubCreationScope\" Message=\"Not a valid subscription creation scope\".", "CreationDate": "2022-01-24T11:57:00.760", "UserId": "13840480", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}, {"Id": "125240814", "PostId": "70832612", "Score": "0", "Text": "Can you please provide the terraform code you are using and the versions of the terraform azure rm provider and terraform version as well ..", "CreationDate": "2022-01-25T05:39:16.523", "UserId": "15969299", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": [{"source": "Text", "text": "Can you please provide the terraform code you are using and the versions of the terraform azure rm provider and terraform version as well ..", "keywords": ["provider"]}]}, {"Id": "125240837", "PostId": "70832612", "Score": "1", "Text": "in the second point the error is because you are using a wrong billing scope for creating the subscription . What is your billing type i.e. EA/MCA/MPA ?", "CreationDate": "2022-01-25T05:41:13.310", "UserId": "15969299", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": [{"source": "Text", "text": "in the second point the error is because you are using a wrong billing scope for creating the subscription . ", "keywords": ["bill"]}, {"source": "Text", "text": "What is your billing type i.e. ", "keywords": ["bill"]}]}, {"Id": "125240951", "PostId": "70832612", "Score": "0", "Text": "for 3rd one it destroys because you are replacing the  script which you had used earlier with a new one and same is also mentioned in the bracket after detroyed", "CreationDate": "2022-01-25T05:52:45.347", "UserId": "15969299", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}, {"Id": "125242025", "PostId": "70832612", "Score": "1", "Text": "@ansumanBal-Mt \n1. Terraform version and rm provided is good and updated as we are doing in AZ CLI in portal.\n2. Its EA portal we are trying.\n3. Yes not sure\nBut we have successful done it its because we didnt mention- Billing portal no we were placing the name.Hence it wasnt.Thank to all those helped.", "CreationDate": "2022-01-25T07:17:57.220", "UserId": "13840480", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}, {"Id": "125294492", "PostId": "70832612", "Score": "0", "Text": "@ansumanBal-Mt as requested solution that was applied is shared above and edited in the last part of the question with what has been changed and screenshot .it will help future on this community.", "CreationDate": "2022-01-27T06:10:54.403", "UserId": "13840480", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": [{"source": "Text", "text": "@ansumanBal-Mt as requested solution that was applied is shared above and edited in the last part of the question with what has been changed and screenshot .it will help future on this community.", "keywords": ["change"]}]}], "history": [{"Id": "262609600", "PostHistoryTypeId": "2", "PostId": "70832612", "RevisionGUID": "acd21c6b-995a-411e-b298-96917e08ac35", "CreationDate": "2022-01-24T10:50:22.117", "UserId": "13840480", "Text": "We are trying to spin up a azure subscription using terraform. But unable to find any exact code which delivers successful subscription creation. Below is the brief description of the possible scenarios we have tried executing.\r\n1. We used the below code and executed it and the role we had was Account Owner Role -But the code is successful but we aren't able to see the subscription in the portal.\r\nLink for the code: https://github.com/aztfmod/terraform-azurerm-af/tree/5.4.8/modules/subscriptions\r\n2.Below is the next code we tested with again Account Owner role - But the error message is below.\r\nLink for the code:https://registry.terraform.io/providers/hashicorp/azurerm/latest/docs/resources/subscription#example-usage---creating-a-new-alias-and-subscription-for-a-microsoft-customer-account\r\nError Message: creating new Subscription (Alias \"XXXX7\"): subscription.AliasClient#Create: Failure sending request: StatusCode=0 -- Original Error: Code=\"InvalidSubCreationScope\" Message=\"Not a valid subscription creation scope\", with azurerm_subscription.testtf, on main.tf line 31, in resource \"azurerm_subscription\" \"testtf\":   31: resouce \"azurerm_subscription\" \"testtf\" {\r\n3. Another code we tried executing - But its destroying the older subscription.\r\nLink for the code is same: https://registry.terraform.io/providers/hashicorp/azurerm/latest/docs/resources/subscription#example-usage---creating-a-new-alias-and-subscription-for-a-microsoft-customer-account\r\nError shared in Pic below.\r\n\r\n[![enter image description here][1]][1]\r\n\r\nRequest any suggestions/help at the earliest for the same so can help us.\r\nThanks in Advance!\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/rfINJ.png", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": [{"source": "Text", "text": "Link for the code: https://github.com/aztfmod/terraform-azurerm-af/tree/5.4.8/modules/subscriptions 2.Below is the next code we tested with again Account Owner role - But the error message is below. ", "keywords": ["test"]}, {"source": "Text", "text": "Link for the code:https://registry.terraform.io/providers/hashicorp/azurerm/latest/docs/resources/subscription#example-usage---creating-a-new-alias-and-subscription-for-a-microsoft-customer-account Error Message: creating new Subscription (Alias \"XXXX7\"): subscription.AliasClient#Create: Failure sending request: StatusCode=0 -- Original Error: Code=\"InvalidSubCreationScope\" Message=\"Not a valid subscription creation scope\", with azurerm_subscription.testtf, on main.tf line 31, in resource \"azurerm_subscription\" \"testtf\": 31: resouce \"azurerm_subscription\" \"testtf\" { 3. ", "keywords": ["test"]}]}, {"Id": "262609602", "PostHistoryTypeId": "1", "PostId": "70832612", "RevisionGUID": "acd21c6b-995a-411e-b298-96917e08ac35", "CreationDate": "2022-01-24T10:50:22.117", "UserId": "13840480", "Text": "Azure Subscription creation using Terraform", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}, {"Id": "262609603", "PostHistoryTypeId": "3", "PostId": "70832612", "RevisionGUID": "acd21c6b-995a-411e-b298-96917e08ac35", "CreationDate": "2022-01-24T10:50:22.117", "UserId": "13840480", "Text": "<azure><terraform><subscription><terraform-provider-azure><script>", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}, {"Id": "262668114", "PostHistoryTypeId": "5", "PostId": "70832612", "RevisionGUID": "1201ceca-c40f-4024-9936-7461caec1be8", "CreationDate": "2022-01-25T05:28:12.680", "UserId": "15969299", "Comment": "added 100 characters in body; edited tags", "Text": "We are trying to spin up an azure subscription using terraform. But unable to find any exact code which delivers successful subscription creation. Below is the brief description of the possible scenarios we have tried executing.\r\n\r\n 1. We used the below code and executed it and the role we had was\r\n    `Account Owner Role` -But the code is successful but we aren't able to\r\n    see the subscription in the portal. Link for the code:\r\n\r\n    https://github.com/aztfmod/terraform-azurerm-caf/tree/5.4.8/modules/subscriptions\r\n 2. Below is the next code we tested with again `Account Owner role` - But\r\n    the error message is below. Link for the code: https://registry.terraform.io/providers/hashicorp/azurerm/latest/docs/resources/subscription#example-usage---creating-a-new-alias-and-subscription-for-a-microsoft-customer-account\r\n    ```\r\n    Error Message: creating new Subscription (Alias \"XXXX7\"):\r\n    subscription.AliasClient#Create: Failure sending request:\r\n    StatusCode=0 -- Original Error: Code=\"InvalidSubCreationScope\"\r\n    Message=\"Not a valid subscription creation scope\", with\r\n    azurerm_subscription.testtf, on main.tf line 31, in resource\r\n    \"azurerm_subscription\" \"testtf\":   31: resouce\r\n    \"azurerm_subscription\" \"testtf\" {\r\n    ```\r\n\r\n 3. Another code we tried executing - But its destroying the older\r\n    subscription. Link for the code is same:\r\n    https://registry.terraform.io/providers/hashicorp/azurerm/latest/docs/resources/subscription#example-usage---creating-a-new-alias-and-subscription-for-a-microsoft-customer-account\r\nError shared in Pic below.\r\n\r\n     [![enter image description here][1]][1]\r\n\r\nRequest any suggestions/help at the earliest for the same so can help us.\r\nThanks in Advance!\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/rfINJ.png", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": [{"source": "Text", "text": "Below is the next code we tested with again `Account Owner role` - But the error message is below. ", "keywords": ["test"]}, {"source": "Text", "text": "Error Message: creating new Subscription (Alias \"XXXX7\"): subscription.AliasClient#Create: Failure sending request: StatusCode=0 -- Original Error: Code=\"InvalidSubCreationScope\" Message=\"Not a valid subscription creation scope\", with azurerm_subscription.testtf, on main.tf line 31, in resource \"azurerm_subscription\" \"testtf\": 31: resouce \"azurerm_subscription\" \"testtf\" { ``` ", "keywords": ["test"]}]}, {"Id": "262668115", "PostHistoryTypeId": "6", "PostId": "70832612", "RevisionGUID": "1201ceca-c40f-4024-9936-7461caec1be8", "CreationDate": "2022-01-25T05:28:12.680", "UserId": "15969299", "Comment": "added 100 characters in body; edited tags", "Text": "<azure><terraform><terraform-provider-azure>", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}, {"Id": "262829556", "PostHistoryTypeId": "5", "PostId": "70832612", "RevisionGUID": "035b3378-8b2a-4bcc-90ab-3f1e0e65f0dc", "CreationDate": "2022-01-27T06:07:05.937", "UserId": "13840480", "Comment": "added 320 characters in body", "Text": "We are trying to spin up an azure subscription using terraform. But unable to find any exact code which delivers successful subscription creation. Below is the brief description of the possible scenarios we have tried executing.\r\n\r\n 1. We used the below code and executed it and the role we had was\r\n    `Account Owner Role` -But the code is successful but we aren't able to\r\n    see the subscription in the portal. Link for the code:\r\n\r\n    https://github.com/aztfmod/terraform-azurerm-caf/tree/5.4.8/modules/subscriptions\r\n 2. Below is the next code we tested with again `Account Owner role` - But\r\n    the error message is below. Link for the code: https://registry.terraform.io/providers/hashicorp/azurerm/latest/docs/resources/subscription#example-usage---creating-a-new-alias-and-subscription-for-a-microsoft-customer-account\r\n    ```\r\n    Error Message: creating new Subscription (Alias \"XXXX7\"):\r\n    subscription.AliasClient#Create: Failure sending request:\r\n    StatusCode=0 -- Original Error: Code=\"InvalidSubCreationScope\"\r\n    Message=\"Not a valid subscription creation scope\", with\r\n    azurerm_subscription.testtf, on main.tf line 31, in resource\r\n    \"azurerm_subscription\" \"testtf\":   31: resouce\r\n    \"azurerm_subscription\" \"testtf\" {\r\n    ```\r\n\r\n 3. Another code we tried executing - But its destroying the older\r\n    subscription. Link for the code is same:\r\n    https://registry.terraform.io/providers/hashicorp/azurerm/latest/docs/resources/subscription#example-usage---creating-a-new-alias-and-subscription-for-a-microsoft-customer-account\r\n \r\n\r\nRequest any suggestions/help at the earliest for the same so can help us.\r\nThanks in Advance!\r\n\r\n\r\n**Solution:**\r\nbelow is the picture for reference. The parameter field : billing account name and enrollment account name was earlier filled  with \"Name\" . it was to be corrected by No# for EA portal.\r\n[![enter image description here][1]][1]\r\n\r\nThanks a lot to all helped!\r\n  \r\n\r\n\r\n  [1]: https://i.stack.imgur.com/JwZiu.png", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": [{"source": "Text", "text": "Below is the next code we tested with again `Account Owner role` - But the error message is below. ", "keywords": ["test"]}, {"source": "Text", "text": "Error Message: creating new Subscription (Alias \"XXXX7\"): subscription.AliasClient#Create: Failure sending request: StatusCode=0 -- Original Error: Code=\"InvalidSubCreationScope\" Message=\"Not a valid subscription creation scope\", with azurerm_subscription.testtf, on main.tf line 31, in resource \"azurerm_subscription\" \"testtf\": 31: resouce \"azurerm_subscription\" \"testtf\" { ``` ", "keywords": ["test"]}, {"source": "Text", "text": "The parameter field : billing account name and enrollment account name was earlier filled with \"Name\" . it was to be corrected by No# for EA portal. [![enter image description here][1]][1] Thanks a lot to all helped! [1]: https://i.stack.imgur.com/JwZiu.png", "keywords": ["bill"]}]}, {"Id": "262907032", "PostHistoryTypeId": "5", "PostId": "70832612", "RevisionGUID": "04cdabfd-361e-439e-867b-f403660b6391", "CreationDate": "2022-01-28T05:16:00.683", "UserId": "15969299", "Comment": "moved the solution from question to answer.", "Text": "We are trying to spin up an azure subscription using terraform. But unable to find any exact code which delivers successful subscription creation. Below is the brief description of the possible scenarios we have tried executing.\r\n\r\n 1. We used the below code and executed it and the role we had was\r\n    `Account Owner Role` -But the code is successful but we aren't able to\r\n    see the subscription in the portal. Link for the code:\r\n\r\n    https://github.com/aztfmod/terraform-azurerm-caf/tree/5.4.8/modules/subscriptions\r\n 2. Below is the next code we tested with again `Account Owner role` - But\r\n    the error message is below. Link for the code: https://registry.terraform.io/providers/hashicorp/azurerm/latest/docs/resources/subscription#example-usage---creating-a-new-alias-and-subscription-for-a-microsoft-customer-account\r\n    ```\r\n    Error Message: creating new Subscription (Alias \"XXXX7\"):\r\n    subscription.AliasClient#Create: Failure sending request:\r\n    StatusCode=0 -- Original Error: Code=\"InvalidSubCreationScope\"\r\n    Message=\"Not a valid subscription creation scope\", with\r\n    azurerm_subscription.testtf, on main.tf line 31, in resource\r\n    \"azurerm_subscription\" \"testtf\":   31: resouce\r\n    \"azurerm_subscription\" \"testtf\" {\r\n    ```\r\n\r\n 3. Another code we tried executing - But its destroying the older\r\n    subscription. Link for the code is same:\r\n    https://registry.terraform.io/providers/hashicorp/azurerm/latest/docs/resources/subscription#example-usage---creating-a-new-alias-and-subscription-for-a-microsoft-customer-account\r\n \r\n\r\nRequest any suggestions/help at the earliest for the same so can help us.\r\nThanks in Advance!\r\n\r\n  [1]: https://i.stack.imgur.com/JwZiu.png", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": [{"source": "Text", "text": "Below is the next code we tested with again `Account Owner role` - But the error message is below. ", "keywords": ["test"]}, {"source": "Text", "text": "Error Message: creating new Subscription (Alias \"XXXX7\"): subscription.AliasClient#Create: Failure sending request: StatusCode=0 -- Original Error: Code=\"InvalidSubCreationScope\" Message=\"Not a valid subscription creation scope\", with azurerm_subscription.testtf, on main.tf line 31, in resource \"azurerm_subscription\" \"testtf\": 31: resouce \"azurerm_subscription\" \"testtf\" { ``` ", "keywords": ["test"]}]}], "answers": [{"Id": "70889114", "PostTypeId": "2", "ParentId": "70832612", "CreationDate": "2022-01-28T05:14:56.020", "Score": "2", "Body": "<pre><code>Error Message: creating new Subscription (Alias &quot;XXXX7&quot;): subscription.AliasClient#Create: Failure sending request: StatusCode=0\n-- Original Error: Code=&quot;InvalidSubCreationScope&quot; Message=&quot;Not a valid subscription creation scope&quot;, with azurerm_subscription.testtf, on main.tf line 31, in resource &quot;azurerm_subscription&quot; &quot;testtf&quot;:   31: resouce &quot;azurerm_subscription&quot; &quot;testtf&quot; {\n</code></pre>\n<p>As I have mentioned in comments , <em><strong>The above issue was with the billing scope which was being used for creating the subscription . Instead of <code>Name</code> you should use <code>Billing account No.</code> and <code>Enrollment no.</code> in the <code>billing_account_name</code> &amp; <code>enrollment_account_name</code> Arguments like below</strong></em> :</p>\n<pre><code>data &quot;azurerm_billing_enrollment_account_scope&quot; &quot;example&quot; {\n  billing_account_name    = &quot;1234567890&quot;\n  enrollment_account_name = &quot;0123456&quot;\n}\n\nresource &quot;azurerm_subscription&quot; &quot;example&quot; {\n  subscription_name = &quot;My Example EA Subscription&quot;\n  billing_scope_id  = data.azurerm_billing_enrollment_account_scope.example.id\n}\n</code></pre>\n<p><em><strong>Note: Please make sure that you are using all the correct details which are can be found from EA portal.</strong></em></p>\n", "OwnerUserId": "15969299", "LastActivityDate": "2022-01-28T05:14:56.020", "CommentCount": "0", "ContentLicense": "CC BY-SA 4.0", "history": [{"Id": "262907006", "PostHistoryTypeId": "2", "PostId": "70889114", "RevisionGUID": "2094def4-3322-437b-bce1-838b55334b1a", "CreationDate": "2022-01-28T05:14:56.020", "UserId": "15969299", "Text": "    Error Message: creating new Subscription (Alias \"XXXX7\"): subscription.AliasClient#Create: Failure sending request: StatusCode=0\r\n    -- Original Error: Code=\"InvalidSubCreationScope\" Message=\"Not a valid subscription creation scope\", with azurerm_subscription.testtf, on main.tf line 31, in resource \"azurerm_subscription\" \"testtf\":   31: resouce \"azurerm_subscription\" \"testtf\" {\r\n\r\nAs I have mentioned in comments , ***The above issue was with the billing scope which was being used for creating the subscription . Instead of `Name` you should use `Billing account No.` and `Enrollment no.` in the `billing_account_name` & `enrollment_account_name` Arguments like below*** :\r\n\r\n    data \"azurerm_billing_enrollment_account_scope\" \"example\" {\r\n      billing_account_name    = \"1234567890\"\r\n      enrollment_account_name = \"0123456\"\r\n    }\r\n    \r\n    resource \"azurerm_subscription\" \"example\" {\r\n      subscription_name = \"My Example EA Subscription\"\r\n      billing_scope_id  = data.azurerm_billing_enrollment_account_scope.example.id\r\n    }\r\n\r\n***Note: Please make sure that you are using all the correct details which are can be found from EA portal.***", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": [{"source": "Text", "text": "Error Message: creating new Subscription (Alias \"XXXX7\"): subscription.AliasClient#Create: Failure sending request: StatusCode=0 -- Original Error: Code=\"InvalidSubCreationScope\" Message=\"Not a valid subscription creation scope\", with azurerm_subscription.testtf, on main.tf line 31, in resource \"azurerm_subscription\" \"testtf\": 31: resouce \"azurerm_subscription\" \"testtf\" { As I have mentioned in comments , ***The above issue was with the billing scope which was being used for creating the subscription . ", "keywords": ["bill", "test"]}, {"source": "Text", "text": "Instead of `Name` you should use `Billing account No.` and `Enrollment no.` in the `billing_account_name` & `enrollment_account_name` ", "keywords": ["bill"]}, {"source": "Text", "text": "Arguments like below*** : data \"azurerm_billing_enrollment_account_scope\" \"example\" { billing_account_name = \"1234567890\" enrollment_account_name = \"0123456\" } resource \"azurerm_subscription\" \"example\" { subscription_name = \"My Example EA Subscription\" billing_scope_id = data.azurerm_billing_enrollment_account_scope.example.id } ***Note: Please make sure that you are using all the correct details which are can be found from EA portal.***", "keywords": ["bill"]}]}], "filtered-sentences": [{"source": "Body", "text": "As I have mentioned in comments , The above issue was with the billing scope which was being used for creating the subscription . ", "keywords": ["bill"]}, {"source": "Body", "text": "Instead of Name you should use Billing account No. and Enrollment no. in the billing_account_name & enrollment_account_name Arguments like below : Note: Please make sure that you are using all the correct details which are can be found from EA portal.", "keywords": ["bill"]}]}, {"Id": "74545396", "PostTypeId": "2", "ParentId": "70832612", "CreationDate": "2022-11-23T10:34:12.290", "Score": "0", "Body": "<p>i get this recently and the problem was that the identity which is used to call the subscription creation in Terraform does not have the subscription creator role of the new api. my spn had the subscription role of the legacy api.\nto grant the subscription role to the spn, use this link:</p>\n<p>focus on this section: Assign the subscription creator role to the SPN</p>\n<p><a href=\"https://learn.microsoft.com/en-us/azure/cost-management-billing/manage/assign-roles-azure-service-principals\" rel=\"nofollow noreferrer\">https://learn.microsoft.com/en-us/azure/cost-management-billing/manage/assign-roles-azure-service-principals</a></p>\n<p><a href=\"https://learn.microsoft.com/en-us/rest/api/billing/2019-10-01-preview/enrollment-account-role-assignments/put?tabs=HTTP\" rel=\"nofollow noreferrer\">https://learn.microsoft.com/en-us/rest/api/billing/2019-10-01-preview/enrollment-account-role-assignments/put?tabs=HTTP</a></p>\n", "OwnerUserId": "20580981", "LastActivityDate": "2022-11-23T10:34:12.290", "CommentCount": "0", "ContentLicense": "CC BY-SA 4.0", "history": [{"Id": "282829025", "PostHistoryTypeId": "2", "PostId": "74545396", "RevisionGUID": "f8025936-8455-4d97-b2cd-feef02890251", "CreationDate": "2022-11-23T10:34:12.290", "UserId": "20580981", "Text": "i get this recently and the problem was that the identity which is used to call the subscription creation in Terraform does not have the subscription creator role of the new api. my spn had the subscription role of the legacy api. \r\nto grant the subscription role to the spn, use this link: \r\n\r\nfocus on this section: Assign the subscription creator role to the SPN \r\n\r\nhttps://learn.microsoft.com/en-us/azure/cost-management-billing/manage/assign-roles-azure-service-principals\r\n\r\nhttps://learn.microsoft.com/en-us/rest/api/billing/2019-10-01-preview/enrollment-account-role-assignments/put?tabs=HTTP", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": [{"source": "Text", "text": "to grant the subscription role to the spn, use this link: focus on this section: Assign the subscription creator role to the SPN https://learn.microsoft.com/en-us/azure/cost-management-billing/manage/assign-roles-azure-service-principals https://learn.microsoft.com/en-us/rest/api/billing/2019-10-01-preview/enrollment-account-role-assignments/put?tabs=HTTP", "keywords": ["bill", "cost"]}]}], "filtered-sentences": [{"source": "Body", "text": "to grant the subscription role to the spn, use this link: focus on this section: Assign the subscription creator role to the SPN https://learn.microsoft.com/en-us/azure/cost-management-billing/manage/assign-roles-azure-service-principals https://learn.microsoft.com/en-us/rest/api/billing/2019-10-01-preview/enrollment-account-role-assignments/put?tabs=HTTP", "keywords": ["bill", "cost"]}]}], "contains-topic": true, "filtered-sentences": [{"source": "Body", "text": "Link for the code: https://github.com/aztfmod/terraform-azurerm-caf/tree/5.4.8/modules/subscriptions Below is the next code we tested with again Account Owner role - But the error message is below. ", "keywords": ["test"]}]}