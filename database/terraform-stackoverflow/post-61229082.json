{"Id": "61229082", "PostTypeId": "1", "CreationDate": "2020-04-15T12:46:30.667", "Score": "1", "ViewCount": "272", "Body": "<p>I am quite new to GCP and terraform.\nI am trying to create pubsub_topic with terraform in Google Cloud and link it with budget, so budget will use the topic as a link with cloud function (passing notifications).</p>\n\n<p>I am stuck at creating the topic.</p>\n\n<pre><code>resource \"google_pubsub_topic\" \"topic\" {\n  name    = alert_topic\n  project = my_project\n}\n\nresource \"google_billing_budget\" \"global-budget\" {\n  provider        = google-beta\n  billing_account = var.billing_account_id\n  display_name    = \"Global Billing Budget\"\n\n  amount {\n    specified_amount {\n      currency_code = \"EUR\"\n      units         = \"500\"\n    }\n  }\n\n  threshold_rules {\n    threshold_percent = 0.5\n  }\n\n  all_updates_rule {\n    pubsub_topic = projects / my_project / topics / alert_topic\n  }\n}\n</code></pre>\n\n<p><code>terraform plan</code> command results:</p>\n\n<pre><code>A reference to a resource type must be followed by at least one\nattribute access, specifying the resource name.\n</code></pre>\n\n<p>What I do wrong?</p>\n\n<pre><code>terraform version\nTerraform v0.12.23\n+ provider.google v3.13.0\n+ provider.google-beta v3.13.0\n</code></pre>\n", "OwnerUserId": "6489386", "LastActivityDate": "2020-04-15T13:29:36.353", "Title": "gcp terraform - how to add pubsub_topic", "Tags": "<google-cloud-platform><terraform><google-cloud-pubsub>", "AnswerCount": "1", "CommentCount": "2", "ContentLicense": "CC BY-SA 4.0", "comments": [{"Id": "108318282", "PostId": "61229082", "Score": "0", "Text": "What does the full error show? You seem to have cut out some of the surrounding context to the error.", "CreationDate": "2020-04-15T12:50:03.850", "UserId": "2291321", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}, {"Id": "108319712", "PostId": "61229082", "Score": "0", "Text": "I added quotes on the resources...so the problem is gone. silly.", "CreationDate": "2020-04-15T13:28:50.993", "UserId": "6489386", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}], "history": [{"Id": "219262277", "PostHistoryTypeId": "2", "PostId": "61229082", "RevisionGUID": "1e56f162-8d96-4b84-aef2-696d70fb9dc8", "CreationDate": "2020-04-15T12:46:30.667", "UserId": "6489386", "Text": "I am quite new to GCP and terraform.\r\nI am trying to create pubsub_topic with terraform in Google Cloud and link it with budget, so budget will use the topic as a link with cloud function (passing notifications).\r\n\r\nI am stuck at creating the topic.\r\n\r\n    resource \"google_pubsub_topic\" \"topic\" {\r\n      name    = alert_topic\r\n      project = my_project\r\n    }\r\n    \r\n    resource \"google_billing_budget\" \"global-budget\" {\r\n      provider        = google-beta\r\n      billing_account = var.billing_account_id\r\n      display_name    = \"Global Billing Budget\"\r\n    \r\n      amount {\r\n        specified_amount {\r\n          currency_code = \"EUR\"\r\n          units         = \"500\"\r\n        }\r\n      }\r\n    \r\n      threshold_rules {\r\n        threshold_percent = 0.5\r\n      }\r\n    \r\n      all_updates_rule {\r\n        pubsub_topic = projects / my_project / topics / alert_topic\r\n      }\r\n    }\r\n\r\n`terraform plan` command results:\r\n\r\n    A reference to a resource type must be followed by at least one\r\n    attribute access, specifying the resource name.\r\n\r\nWhat I do wrong?\r\n\r\n    terraform version\r\n    Terraform v0.12.23\r\n    + provider.google v3.13.0\r\n    + provider.google-beta v3.13.0\r\n\r\n", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": [{"source": "Text", "text": "I am stuck at creating the topic. resource \"google_pubsub_topic\" \"topic\" { name = alert_topic project = my_project } resource \"google_billing_budget\" \"global-budget\" { provider = google-beta billing_account = var.billing_account_id display_name = \"Global Billing Budget\" amount { specified_amount { currency_code = \"EUR\" units = \"500\" } } threshold_rules { threshold_percent = 0.5 } all_updates_rule { pubsub_topic = projects / my_project / topics / alert_topic } } `terraform plan` command results: A reference to a resource type must be followed by at least one attribute access, specifying the resource name. ", "keywords": ["bill", "provider"]}, {"source": "Text", "text": "What I do wrong? terraform version Terraform v0.12.23 + provider.google v3.13.0 + provider.google-beta v3.13.0", "keywords": ["provider"]}]}, {"Id": "219262278", "PostHistoryTypeId": "1", "PostId": "61229082", "RevisionGUID": "1e56f162-8d96-4b84-aef2-696d70fb9dc8", "CreationDate": "2020-04-15T12:46:30.667", "UserId": "6489386", "Text": "gcp terraform - how to add pubsub_topic", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}, {"Id": "219262279", "PostHistoryTypeId": "3", "PostId": "61229082", "RevisionGUID": "1e56f162-8d96-4b84-aef2-696d70fb9dc8", "CreationDate": "2020-04-15T12:46:30.667", "UserId": "6489386", "Text": "<google-cloud-platform><terraform><google-cloud-pubsub>", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}], "answers": [{"Id": "61230006", "PostTypeId": "2", "ParentId": "61229082", "CreationDate": "2020-04-15T13:29:36.353", "Score": "2", "Body": "<p>pubsub_topic required quotes  </p>\n\n<pre><code>all_updates_rule {\n    pubsub_topic = \"projects/my_project/topics/alert_topic\"\n  }\n</code></pre>\n", "OwnerUserId": "6489386", "LastActivityDate": "2020-04-15T13:29:36.353", "CommentCount": "0", "ContentLicense": "CC BY-SA 4.0", "history": [{"Id": "219266069", "PostHistoryTypeId": "2", "PostId": "61230006", "RevisionGUID": "6c711755-e231-4c9b-8e9d-ec91d188322d", "CreationDate": "2020-04-15T13:29:36.353", "UserId": "6489386", "Text": "pubsub_topic required quotes  \r\n\r\n    all_updates_rule {\r\n        pubsub_topic = \"projects/my_project/topics/alert_topic\"\r\n      }", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}], "filtered-sentences": []}], "contains-topic": true, "filtered-sentences": []}