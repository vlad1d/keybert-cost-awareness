{"Id": "50963361", "PostTypeId": "1", "CreationDate": "2018-06-21T08:01:50.753", "Score": "0", "ViewCount": "865", "Body": "<p>I want to add the same route53 record into multiple zones, and I can't figure it out.</p>\n\n<p>I'm trying this</p>\n\n<pre><code>resource \"aws_route53_zone\" \"internal-common-domain\" { \n  name = \"${var.internal-common-domain}\"\n  vpc_id = \"${aws_vpc.VPC.id}\"\n}\nresource \"aws_route53_zone\" \"internal-office-domain\" {\n  name = \"${var.env}-${var.internal-common-domain}\"\n  vpc_id = \"${aws_vpc.VPC.id}\"\n}\nresource \"aws_route53_record\" \"middle-tier-lb\" {\n  zone_id = \"${aws_route53_zone.*.zone_id}\"\n  name = \"middle-tier-elb.${var.internal-common-domain}\"\n  type = \"CNAME\"\n  ttl = \"300\"\n  records = [\"${aws_alb.MiddleTierLoadBalancer.dns_name}\"]\n}\n</code></pre>\n\n<p>So rather than defining a record resource for each zone I want to add it to I just want to add this record to all the defined zones.</p>\n\n<p>Note the splat in the record for zone_id, doesn't work, Can anyone tell me the most efficient way to do this in terraform ?</p>\n", "OwnerUserId": "6086406", "LastActivityDate": "2018-06-21T19:36:08.197", "Title": "terraform add route53 record to multiple zones", "Tags": "<terraform><amazon-route53>", "AnswerCount": "0", "CommentCount": "3", "ContentLicense": "CC BY-SA 4.0", "comments": [{"Id": "88927119", "PostId": "50963361", "Score": "0", "Text": "How would this work? You can't put a record called `middle-tier-elb.example.com` in a zone called `staging.example.com`. You would need two separate records here: `middle-tier-elb.example.com` and `middle-tier-elb.staging.example.com`", "CreationDate": "2018-06-21T09:46:49.727", "UserId": "2291321", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}, {"Id": "88947821", "PostId": "50963361", "Score": "0", "Text": "OK , I didn't get as far as changing the name line ... but that would need changing too.... infact ..... could I just have a variable that's a list of zone names...then have a single aws_route53_zone resource, and a single aws_route53_record ???", "CreationDate": "2018-06-21T19:07:30.043", "UserId": "6086406", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": [{"source": "Text", "text": "OK , I didn't get as far as changing the name line ... ", "keywords": ["change"]}, {"source": "Text", "text": "but that would need changing too.... ", "keywords": ["change"]}]}, {"Id": "88948505", "PostId": "50963361", "Score": "0", "Text": "YAY .. that worked....", "CreationDate": "2018-06-21T19:32:55.107", "UserId": "6086406", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}], "history": [{"Id": "176022967", "PostHistoryTypeId": "2", "PostId": "50963361", "RevisionGUID": "c0cd2a80-f127-4348-a248-e9e2551440de", "CreationDate": "2018-06-21T08:01:50.753", "UserId": "6086406", "Text": "I want to add the same route53 record into multiple zones, and I can't figure it out.\r\n\r\nI'm trying this\r\n \r\n    resource \"aws_route53_zone\" \"internal-common-domain\" { \r\n      name = \"${var.internal-common-domain}\"\r\n      vpc_id = \"${aws_vpc.VPC.id}\"\r\n    }\r\n    resource \"aws_route53_zone\" \"internal-office-domain\" {\r\n      name = \"${var.env}-${var.internal-common-domain}\"\r\n      vpc_id = \"${aws_vpc.VPC.id}\"\r\n    }\r\n    resource \"aws_route53_record\" \"middle-tier-lb\" {\r\n      zone_id = \"${aws_route53_zone.*.zone_id}\"\r\n      name = \"middle-tier-elb.${var.internal-common-domain}\"\r\n      type = \"CNAME\"\r\n      ttl = \"300\"\r\n      records = [\"${aws_alb.MiddleTierLoadBalancer.dns_name}\"]\r\n    }\r\nSo rather than defining a record resource for each zone I want to add it to I just want to add this record to all the defined zones.\r\n\r\nNote the splat in the record for zone_id, doesn't work, Can anyone tell me the most efficient way to do this in terraform ?", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": [{"source": "Text", "text": "I'm trying this resource \"aws_route53_zone\" \"internal-common-domain\" { name = \"${var.internal-common-domain}\" vpc_id = \"${aws_vpc.VPC.id}\" } resource \"aws_route53_zone\" \"internal-office-domain\" { name = \"${var.env}-${var.internal-common-domain}\" vpc_id = \"${aws_vpc.VPC.id}\" } resource \"aws_route53_record\" \"middle-tier-lb\" { zone_id = \"${aws_route53_zone.*.zone_id}\" name = \"middle-tier-elb.${var.internal-common-domain}\" type = \"CNAME\" ttl = \"300\" records = [\"${aws_alb.MiddleTierLoadBalancer.dns_name}\"] } ", "keywords": ["domain"]}, {"source": "Text", "text": "Note the splat in the record for zone_id, doesn't work, Can anyone tell me the most efficient way to do this in terraform ?", "keywords": ["efficient"]}]}, {"Id": "176022968", "PostHistoryTypeId": "1", "PostId": "50963361", "RevisionGUID": "c0cd2a80-f127-4348-a248-e9e2551440de", "CreationDate": "2018-06-21T08:01:50.753", "UserId": "6086406", "Text": "terraform add route53 record to multiple zones", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}, {"Id": "176022969", "PostHistoryTypeId": "3", "PostId": "50963361", "RevisionGUID": "c0cd2a80-f127-4348-a248-e9e2551440de", "CreationDate": "2018-06-21T08:01:50.753", "UserId": "6086406", "Text": "<terraform><amazon-route53>", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}], "contains-topic": true, "filtered-sentences": [{"source": "Body", "text": "Note the splat in the record for zone_id, doesn't work, Can anyone tell me the most efficient way to do this in terraform ?", "keywords": ["efficient"]}]}