{"Id": "74967659", "PostTypeId": "1", "CreationDate": "2022-12-31T05:18:10.403", "Score": "0", "ViewCount": "182", "Body": "<p>Running terraform apply getting below error.</p>\n<pre><code>{&quot;error&quot;:{&quot;code&quot;:403,&quot;message&quot;:&quot;The billing account for the owning project is disabled in state absent&quot;,&quot;errors&quot;:[{&quot;message&quot;:&quot;The billing account for the owning project is disabled in state absent&quot;,&quot;domain&quot;:&quot;global&quot;,&quot;reason&quot;:&quot;accountDisabled&quot;,&quot;locationType&quot;:&quot;header&quot;,&quot;location&quot;:&quot;Authorization&quot;}]}}: timestamp=2022-12-31T00:04:43.690-0500\n</code></pre>\n<p>For the project I added the billing account.</p>\n<p>I am able to run gcloud commands from shell without any errors using the same service account.</p>\n<pre><code>terraform_gcp % gcloud auth activate-service-account --key-file=sakey.json\nActivated service account credentials for: [gcp-terraform@saproject.iam.gserviceaccount.com]\nterraform_gcp % gsutil ls\ngs://mygcptfstatebucket/\nterraform_gcp % gcloud compute instances list\nListed 0 items.\n</code></pre>\n<p>my main.tf is</p>\n<pre><code>terraform {\n  required_providers {\n    google = {\n      source  = &quot;hashicorp/google&quot;\n      version = &quot;4.47.0&quot;\n    }\n  }\n}\n\n\nprovider &quot;google&quot; {\n  project = &quot;my-gcp-project&quot;\n  region  = &quot;us-east1&quot;\n  zone    = &quot;us-east1-b&quot;\n}\n</code></pre>\n<p>Any insights into this error.</p>\n", "OwnerUserId": "19100026", "LastActivityDate": "2023-01-10T09:53:59.317", "Title": "running into error 403 during terraform apply", "Tags": "<google-cloud-platform><terraform-provider-gcp>", "AnswerCount": "1", "CommentCount": "1", "ContentLicense": "CC BY-SA 4.0", "comments": [{"Id": "132296011", "PostId": "74967659", "Score": "0", "Text": "Never ever use service account key file. prefer this command line: `gcloud auth application-default login --impersonate-service-account=<service account email>`. Be sure to be (your user account) \"service account token creator\" on the service account (or the project) to impersonate it;", "CreationDate": "2022-12-31T09:23:19.703", "UserId": "11372593", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}], "history": [{"Id": "285268752", "PostHistoryTypeId": "2", "PostId": "74967659", "RevisionGUID": "2b7fc07b-9f1d-4f24-881b-b0a2d39e150a", "CreationDate": "2022-12-31T05:18:10.403", "UserId": "19100026", "Text": "Running terraform apply getting below error.\r\n\r\n```\r\n{\"error\":{\"code\":403,\"message\":\"The billing account for the owning project is disabled in state absent\",\"errors\":[{\"message\":\"The billing account for the owning project is disabled in state absent\",\"domain\":\"global\",\"reason\":\"accountDisabled\",\"locationType\":\"header\",\"location\":\"Authorization\"}]}}: timestamp=2022-12-31T00:04:43.690-0500\r\n```\r\n\r\nFor the project I added the billing account.  \r\n\r\nI am able to run gcloud commands from shell without any errors using the same service account.\r\n\r\n```\r\nterraform_gcp % gcloud auth activate-service-account --key-file=sakey.json\r\nActivated service account credentials for: [gcp-terraform@saproject.iam.gserviceaccount.com]\r\nterraform_gcp % gsutil ls\r\ngs://mygcptfstatebucket/\r\nterraform_gcp % gcloud compute instances list\r\nListed 0 items.\r\n```\r\nmy main.tf is \r\n```\r\nterraform {\r\n  required_providers {\r\n    google = {\r\n      source  = \"hashicorp/google\"\r\n      version = \"4.47.0\"\r\n    }\r\n  }\r\n}\r\n\r\n\r\nprovider \"google\" {\r\n  project = \"my-gcp-project\"\r\n  region  = \"us-east1\"\r\n  zone    = \"us-east1-b\"\r\n}\r\n```\r\n\r\nAny insights into this error.", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": [{"source": "Text", "text": "``` {\"error\":{\"code\":403,\"message\":\"The billing account for the owning project is disabled in state absent\",\"errors\":[{\"message\":\"The billing account for the owning project is disabled in state absent\",\"domain\":\"global\",\"reason\":\"accountDisabled\",\"locationType\":\"header\",\"location\":\"Authorization\"}]}}: timestamp=2022-12-31T00:04:43.690-0500 ``` ", "keywords": ["bill", "domain"]}, {"source": "Text", "text": "For the project I added the billing account. ", "keywords": ["bill"]}, {"source": "Text", "text": "``` terraform_gcp % gcloud auth activate-service-account --key-file=sakey.json Activated service account credentials for: [gcp-terraform@saproject.iam.gserviceaccount.com] terraform_gcp % gsutil ls gs://mygcptfstatebucket/ terraform_gcp % gcloud compute instances list Listed 0 items. ``` my main.tf is ``` terraform { required_providers { google = { source = \"hashicorp/google\" version = \"4.47.0\" } } } provider \"google\" { project = \"my-gcp-project\" region = \"us-east1\" zone = \"us-east1-b\" ", "keywords": ["provider"]}]}, {"Id": "285268754", "PostHistoryTypeId": "1", "PostId": "74967659", "RevisionGUID": "2b7fc07b-9f1d-4f24-881b-b0a2d39e150a", "CreationDate": "2022-12-31T05:18:10.403", "UserId": "19100026", "Text": "running into error 403 during terraform apply", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}, {"Id": "285268755", "PostHistoryTypeId": "3", "PostId": "74967659", "RevisionGUID": "2b7fc07b-9f1d-4f24-881b-b0a2d39e150a", "CreationDate": "2022-12-31T05:18:10.403", "UserId": "19100026", "Text": "<google-cloud-platform><terraform-provider-gcp>", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}], "answers": [{"Id": "74967813", "PostTypeId": "2", "ParentId": "74967659", "CreationDate": "2022-12-31T06:02:28.333", "Score": "0", "Body": "<p>Tried adding below block and its working seems issue with my configuration.</p>\n<pre class=\"lang-tf prettyprint-override\"><code>data &quot;google_project&quot; &quot;project_name&quot; {\n    project_id = &quot;projectid&quot;\n}\n</code></pre>\n<p>and referencing <code>project_id</code> in the resource block.</p>\n", "OwnerUserId": "19100026", "LastEditorUserId": "6306714", "LastEditDate": "2023-01-10T09:53:59.317", "LastActivityDate": "2023-01-10T09:53:59.317", "CommentCount": "0", "ContentLicense": "CC BY-SA 4.0", "history": [{"Id": "285269607", "PostHistoryTypeId": "2", "PostId": "74967813", "RevisionGUID": "b920a7f4-f64f-45ec-b8f9-f9ad092e5f33", "CreationDate": "2022-12-31T06:02:28.333", "UserId": "19100026", "Text": "Tried adding below block and its working seems issue with my configuration.\r\n```\r\ndata \"google_project\" \"project_name\" {\r\n    project_id = \"projectid\"\r\n}\r\n```\r\nand referencing project_id in the resource block.", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}, {"Id": "285852976", "PostHistoryTypeId": "5", "PostId": "74967813", "RevisionGUID": "ab2f8301-8cf6-4efe-9dc8-66289645aec3", "CreationDate": "2023-01-10T09:53:59.317", "UserId": "6306714", "Comment": "improve Terraform code snippet formatting", "Text": "Tried adding below block and its working seems issue with my configuration.\r\n\r\n```lang-tf\r\ndata \"google_project\" \"project_name\" {\r\n    project_id = \"projectid\"\r\n}\r\n```\r\n\r\nand referencing `project_id` in the resource block.", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}, {"Id": "285852977", "PostHistoryTypeId": "24", "PostId": "74967813", "RevisionGUID": "ab2f8301-8cf6-4efe-9dc8-66289645aec3", "CreationDate": "2023-01-10T09:53:59.317", "Comment": "Proposed by 6306714 approved by 5469686, 6277104 edit id of 5461424", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}], "filtered-sentences": []}], "contains-topic": true, "filtered-sentences": [{"source": "Body", "text": "For the project I added the billing account. ", "keywords": ["bill"]}]}