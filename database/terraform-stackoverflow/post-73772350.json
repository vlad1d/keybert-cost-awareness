{"Id": "73772350", "PostTypeId": "1", "AcceptedAnswerId": "73774652", "CreationDate": "2022-09-19T11:01:16.533", "Score": "2", "ViewCount": "2261", "Body": "<p>I'm trying to create a databricks metastore:</p>\n<pre><code>resource &quot;databricks_metastore&quot; &quot;this&quot; {\n  name = &quot;primary&quot;\n  storage_root = format(&quot;abfss://%s@%s.dfs.core.windows.net/&quot;,\n                        azurerm_storage_container.unity_catalog.name,\n                        azurerm_storage_account.unity_catalog.name\n                        )\n  force_destroy = true\n}\n</code></pre>\n<p>However, I'm getting the following error:</p>\n<pre><code>Error: cannot create metastore: Only account admin can create metastores.\n</code></pre>\n<p>Looking through the Azure <a href=\"https://learn.microsoft.com/en-us/azure/databricks/administration-guide/users-groups/\" rel=\"nofollow noreferrer\">docs</a>, I see the following:</p>\n<blockquote>\n<p>Account admins can manage your Databricks account-level configurations, including creation of workspaces, Unity Catalog metastores, billing, and cloud resources. Account admins can add users to the account and assign them admin roles. They can also give users access to workspaces, as long as those workspaces use identity federation.</p>\n</blockquote>\n<p>In my terraform project, I've logged in using <code>az login</code> and my provider declaration is like this:</p>\n<pre><code>provider &quot;databricks&quot; {\n  azure_workspace_resource_id = data.azurerm_databricks_workspace.this.id\n  host = local.databricks_workspace_host\n}\n</code></pre>\n<p>According to these <a href=\"https://learn.microsoft.com/en-us/azure/databricks/administration-guide/account-settings/account\" rel=\"nofollow noreferrer\">docs</a> I have verified that my account (i.e. the one I used with <code>az login</code>) has both roles:</p>\n<p><a href=\"https://i.stack.imgur.com/Wy1AP.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Wy1AP.png\" alt=\"-\" /></a></p>\n<p>Any idea why I'm still getting this error?</p>\n", "OwnerUserId": "1033422", "LastEditorUserId": "1033422", "LastEditDate": "2022-09-19T11:40:33.717", "LastActivityDate": "2023-04-14T18:56:27.580", "Title": "Error: cannot create metastore: Only account admin can create metastores", "Tags": "<azure-databricks><terraform-provider-databricks>", "AnswerCount": "1", "CommentCount": "2", "ContentLicense": "CC BY-SA 4.0", "comments": [{"Id": "130268273", "PostId": "73772350", "Score": "0", "Text": "Are you able to login to `accounts.azuredatabricks.net` ?", "CreationDate": "2022-09-19T12:20:35.867", "UserId": "18627", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}, {"Id": "130270414", "PostId": "73772350", "Score": "0", "Text": "Not with my personal account", "CreationDate": "2022-09-19T13:54:23.963", "UserId": "1033422", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}], "history": [{"Id": "278507860", "PostHistoryTypeId": "2", "PostId": "73772350", "RevisionGUID": "c750bf05-995b-4f86-9013-bc6b7864c923", "CreationDate": "2022-09-19T11:01:16.533", "UserId": "1033422", "Text": "I'm trying to create a databricks metastore:\r\n\r\n    resource \"databricks_metastore\" \"this\" {\r\n      name = \"primary\"\r\n      storage_root = format(\"abfss://%s@%s.dfs.core.windows.net/\",\r\n                            azurerm_storage_container.unity_catalog.name,\r\n                            azurerm_storage_account.unity_catalog.name\r\n                            )\r\n      force_destroy = true\r\n    }\r\n\r\nHowever, I'm getting the following error:\r\n\r\n    Error: cannot create metastore: Only account admin can create metastores.\r\n\r\nLooking through the Azure [docs][1], I see the following:\r\n\r\n> Account admins can manage your Databricks account-level configurations, including creation of workspaces, Unity Catalog metastores, billing, and cloud resources. Account admins can add users to the account and assign them admin roles. They can also give users access to workspaces, as long as those workspaces use identity federation.\r\n\r\nIn my terraform project, I've logged in using `az login` and my provider declaration is like this:\r\n\r\n    provider \"databricks\" {\r\n      azure_workspace_resource_id = data.azurerm_databricks_workspace.this.id\r\n      host = local.databricks_workspace_host\r\n    }\r\n\r\nHow can I check if my account is an azure databricks **account admin**?\r\n\r\n  [1]: https://learn.microsoft.com/en-us/azure/databricks/administration-guide/users-groups/", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": [{"source": "Text", "text": "Looking through the Azure [docs][1], I see the following: > Account admins can manage your Databricks account-level configurations, including creation of workspaces, Unity Catalog metastores, billing, and cloud resources. ", "keywords": ["bill"]}, {"source": "Text", "text": "In my terraform project, I've logged in using `az login` and my provider declaration is like this: provider \"databricks\" { azure_workspace_resource_id = data.azurerm_databricks_workspace.this.id host = local.databricks_workspace_host } How can I check if my account is an azure databricks **account admin**? ", "keywords": ["provider"]}]}, {"Id": "278507862", "PostHistoryTypeId": "1", "PostId": "73772350", "RevisionGUID": "c750bf05-995b-4f86-9013-bc6b7864c923", "CreationDate": "2022-09-19T11:01:16.533", "UserId": "1033422", "Text": "\"Only account admin can create metastores.\" - how can I check if my account is an azure databricks account admin?", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}, {"Id": "278507863", "PostHistoryTypeId": "3", "PostId": "73772350", "RevisionGUID": "c750bf05-995b-4f86-9013-bc6b7864c923", "CreationDate": "2022-09-19T11:01:16.533", "UserId": "1033422", "Text": "<azure-databricks><terraform-provider-databricks>", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}, {"Id": "278508361", "PostHistoryTypeId": "5", "PostId": "73772350", "RevisionGUID": "b609e232-2283-490e-8cd1-50bae48aedec", "CreationDate": "2022-09-19T11:09:08.657", "UserId": "1033422", "Comment": "added 196 characters in body; edited title", "Text": "I'm trying to create a databricks metastore:\r\n\r\n    resource \"databricks_metastore\" \"this\" {\r\n      name = \"primary\"\r\n      storage_root = format(\"abfss://%s@%s.dfs.core.windows.net/\",\r\n                            azurerm_storage_container.unity_catalog.name,\r\n                            azurerm_storage_account.unity_catalog.name\r\n                            )\r\n      force_destroy = true\r\n    }\r\n\r\nHowever, I'm getting the following error:\r\n\r\n    Error: cannot create metastore: Only account admin can create metastores.\r\n\r\nLooking through the Azure [docs][1], I see the following:\r\n\r\n> Account admins can manage your Databricks account-level configurations, including creation of workspaces, Unity Catalog metastores, billing, and cloud resources. Account admins can add users to the account and assign them admin roles. They can also give users access to workspaces, as long as those workspaces use identity federation.\r\n\r\nIn my terraform project, I've logged in using `az login` and my provider declaration is like this:\r\n\r\n    provider \"databricks\" {\r\n      azure_workspace_resource_id = data.azurerm_databricks_workspace.this.id\r\n      host = local.databricks_workspace_host\r\n    }\r\n\r\nAccording to these [docs][2] I have verified my account (i.e. the one used via `az login`) has both roles:\r\n\r\n[![-][3]][3] \r\n\r\nAny idea why I'm still getting this error?\r\n\r\n  [1]: https://learn.microsoft.com/en-us/azure/databricks/administration-guide/users-groups/\r\n  [2]: https://learn.microsoft.com/en-us/azure/databricks/administration-guide/account-settings/account\r\n  [3]: https://i.stack.imgur.com/Wy1AP.png", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": [{"source": "Text", "text": "Looking through the Azure [docs][1], I see the following: > Account admins can manage your Databricks account-level configurations, including creation of workspaces, Unity Catalog metastores, billing, and cloud resources. ", "keywords": ["bill"]}, {"source": "Text", "text": "In my terraform project, I've logged in using `az login` and my provider declaration is like this: provider \"databricks\" { azure_workspace_resource_id = data.azurerm_databricks_workspace.this.id host = local.databricks_workspace_host } According to these [docs][2] I have verified my account (i.e. the one used via `az login`) has both roles: [![-][3]][3] ", "keywords": ["provider"]}]}, {"Id": "278508362", "PostHistoryTypeId": "4", "PostId": "73772350", "RevisionGUID": "b609e232-2283-490e-8cd1-50bae48aedec", "CreationDate": "2022-09-19T11:09:08.657", "UserId": "1033422", "Comment": "added 196 characters in body; edited title", "Text": "Error: cannot create metastore: Only account admin can create metastores", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}, {"Id": "278510328", "PostHistoryTypeId": "5", "PostId": "73772350", "RevisionGUID": "c15d7627-ca1e-4c23-98a4-148dce7650d2", "CreationDate": "2022-09-19T11:40:33.717", "UserId": "1033422", "Comment": "added 8 characters in body", "Text": "I'm trying to create a databricks metastore:\r\n\r\n    resource \"databricks_metastore\" \"this\" {\r\n      name = \"primary\"\r\n      storage_root = format(\"abfss://%s@%s.dfs.core.windows.net/\",\r\n                            azurerm_storage_container.unity_catalog.name,\r\n                            azurerm_storage_account.unity_catalog.name\r\n                            )\r\n      force_destroy = true\r\n    }\r\n\r\nHowever, I'm getting the following error:\r\n\r\n    Error: cannot create metastore: Only account admin can create metastores.\r\n\r\nLooking through the Azure [docs][1], I see the following:\r\n\r\n> Account admins can manage your Databricks account-level configurations, including creation of workspaces, Unity Catalog metastores, billing, and cloud resources. Account admins can add users to the account and assign them admin roles. They can also give users access to workspaces, as long as those workspaces use identity federation.\r\n\r\nIn my terraform project, I've logged in using `az login` and my provider declaration is like this:\r\n\r\n    provider \"databricks\" {\r\n      azure_workspace_resource_id = data.azurerm_databricks_workspace.this.id\r\n      host = local.databricks_workspace_host\r\n    }\r\n\r\nAccording to these [docs][2] I have verified that my account (i.e. the one I used with `az login`) has both roles:\r\n\r\n[![-][3]][3] \r\n\r\nAny idea why I'm still getting this error?\r\n\r\n  [1]: https://learn.microsoft.com/en-us/azure/databricks/administration-guide/users-groups/\r\n  [2]: https://learn.microsoft.com/en-us/azure/databricks/administration-guide/account-settings/account\r\n  [3]: https://i.stack.imgur.com/Wy1AP.png", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": [{"source": "Text", "text": "Looking through the Azure [docs][1], I see the following: > Account admins can manage your Databricks account-level configurations, including creation of workspaces, Unity Catalog metastores, billing, and cloud resources. ", "keywords": ["bill"]}, {"source": "Text", "text": "In my terraform project, I've logged in using `az login` and my provider declaration is like this: provider \"databricks\" { azure_workspace_resource_id = data.azurerm_databricks_workspace.this.id host = local.databricks_workspace_host } According to these [docs][2] I have verified that my account (i.e. the one I used with `az login`) has both roles: [![-][3]][3] ", "keywords": ["provider"]}]}], "answers": [{"Id": "73774652", "PostTypeId": "2", "ParentId": "73772350", "CreationDate": "2022-09-19T14:02:49.487", "Score": "2", "Body": "<p>You need to be <a href=\"https://learn.microsoft.com/en-us/azure/databricks/data-governance/unity-catalog/get-started#requirements\" rel=\"nofollow noreferrer\">admin in Databricks Account Console</a> to be able to create a Metastore.</p>\n", "OwnerUserId": "18627", "LastEditorUserId": "18627", "LastEditDate": "2023-04-14T18:56:27.580", "LastActivityDate": "2023-04-14T18:56:27.580", "CommentCount": "2", "ContentLicense": "CC BY-SA 4.0", "comments": [{"Id": "130271823", "PostId": "73774652", "Score": "0", "Text": "Thanks, Alex - are there any docs describing how I can become admin?  I couldn't find anything.", "CreationDate": "2022-09-19T14:50:22.550", "UserId": "1033422", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}, {"Id": "130272040", "PostId": "73774652", "Score": "0", "Text": "https://learn.microsoft.com/en-us/azure/databricks/data-governance/unity-catalog/get-started#requirements", "CreationDate": "2022-09-19T14:58:57.673", "UserId": "18627", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}], "history": [{"Id": "278519943", "PostHistoryTypeId": "2", "PostId": "73774652", "RevisionGUID": "5fe4c67b-1fc4-40da-b7aa-9b36119fb508", "CreationDate": "2022-09-19T14:02:49.487", "UserId": "18627", "Text": "You need to be admin in Databricks Account Console to be able to create a Metastore.", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}, {"Id": "291384718", "PostHistoryTypeId": "5", "PostId": "73774652", "RevisionGUID": "f0b71de4-386c-4072-b93f-31076a68d177", "CreationDate": "2023-04-14T18:56:27.580", "UserId": "18627", "Comment": "add link", "Text": "You need to be [admin in Databricks Account Console][1] to be able to create a Metastore.\r\n\r\n\r\n  [1]: https://learn.microsoft.com/en-us/azure/databricks/data-governance/unity-catalog/get-started#requirements", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}], "filtered-sentences": []}], "contains-topic": true, "filtered-sentences": [{"source": "Body", "text": "I'm trying to create a databricks metastore: However, I'm getting the following error: Looking through the Azure docs, I see the following: Account admins can manage your Databricks account-level configurations, including creation of workspaces, Unity Catalog metastores, billing, and cloud resources. ", "keywords": ["bill"]}, {"source": "Body", "text": "In my terraform project, I've logged in using az login and my provider declaration is like this: According to these docs I have verified that my account (i.e. the one I used with az login) has both roles: Any idea why I'm still getting this error?", "keywords": ["provider"]}]}