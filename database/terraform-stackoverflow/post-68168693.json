{"Id": "68168693", "PostTypeId": "1", "AcceptedAnswerId": "68168925", "CreationDate": "2021-06-28T18:53:26.217", "Score": "4", "ViewCount": "3199", "Body": "<p>Module declaration</p>\n<pre><code>resource &quot;azurerm_app_service_plan&quot; &quot;appserviceplan&quot; {\n  name                = var.name\n  location            = var.location\n  resource_group_name = var.resource_group_name\n  kind                = var.kind\n  reserved            = var.reserved\n  is_xenon            = var.is_xenon\n\n  sku {\n    # name = var.sku_name\n    tier = var.sku_tier\n    size = var.sku_tier\n  }\n}\n</code></pre>\n<p>Calling the above module like so (in <code>main.tf</code>) ...</p>\n<pre><code>module &quot;appserviceplan1&quot; {\n  source = &quot;../modules/app_service_plan&quot;\n\n  name                = &quot;${var.project_name}-${var.environment}-appserviceplan&quot;\n  location            = var.location\n  resource_group_name = var.resource_group_name\n  kind                = var.asp_kind\n  reserved            = var.asp_reserved\n  is_xenon            = var.asp_is_xenon\n  # sku_name            = var.asp_sku_name\n  sku_tier = var.asp_sku_tier\n  sku_size = var.asp_sku_tier\n}\n</code></pre>\n<p>Input variable assignment (in <code>main.auto.tfvars</code>):</p>\n<pre><code># Variable assignment for App Service Plan\nasp_kind = &quot;xenon&quot;\n# Recommended value is false\n# Ref: https://registry.terraform.io/providers/hashicorp/azurerm/latest/docs/resources/app_service_plan\nasp_reserved = false\nasp_is_xenon = true\n# asp_sku_name = &quot;P3&quot;\nasp_sku_tier = &quot;PremiumV3&quot;\nasp_sku_size = &quot;P3v3&quot;\n</code></pre>\n<p>Getting the following error with <code>terraform apply</code>:</p>\n<pre><code>Error: Error creating/updating App Service Plan &quot;xyz-sandbox-appserviceplan&quot; (Resource Group &quot;abc-sandbox-xyz-cc-rg&quot;): web.AppServicePlansClient#CreateOrUpdate: Failure sending request: StatusCode=400 -- Original Error: Code=&quot;BadRequest&quot; Message=&quot;The parameter SKU.Name has an invalid value.&quot; Details=[{&quot;Message&quot;:&quot;The parameter SKU.Name has an invalid value.&quot;},{&quot;Code&quot;:&quot;BadRequest&quot;},{&quot;ErrorEntity&quot;:{&quot;Code&quot;:&quot;BadRequest&quot;,&quot;Message&quot;:&quot;The parameter SKU.Name has an invalid value.&quot;,&quot;MessageTemplate&quot;:&quot;The parameter {0} has an invalid value.&quot;,&quot;Parameters&quot;:[&quot;SKU.Name&quot;]}}]\n</code></pre>\n<p>I have been spinning on this for hours now. Any help would be greatly appreciated!</p>\n", "OwnerUserId": "202345", "LastActivityDate": "2021-10-19T00:38:10.137", "Title": "Terraform Azure App Service Plan Error - The parameter SKU.Name has an invalid value", "Tags": "<terraform><terraform-provider-azure>", "AnswerCount": "2", "CommentCount": "2", "FavoriteCount": "0", "ContentLicense": "CC BY-SA 4.0", "comments": [{"Id": "126478433", "PostId": "68168693", "Score": "0", "Text": "Someone is dropping the ball here. Either hashicorp or MS or both. Can someone maybe open a bug report? At least for the docs? This is a complete mess.", "CreationDate": "2022-03-21T17:30:55.503", "UserId": "82673", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}, {"Id": "133172571", "PostId": "68168693", "Score": "0", "Text": "@AndreasT that might be only up to terraform azurerm provider authors, and you need to pay 20$/user in order to contact them. On github they are useless.", "CreationDate": "2023-02-16T22:31:10.127", "UserId": "310662", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": [{"source": "Text", "text": "@AndreasT that might be only up to terraform azurerm provider authors, and you need to pay 20$/user in order to contact them. ", "keywords": ["pay", "provider"]}]}], "history": [{"Id": "249307162", "PostHistoryTypeId": "2", "PostId": "68168693", "RevisionGUID": "c6877f70-f0c4-4a10-bc87-4b2a1ad94016", "CreationDate": "2021-06-28T18:53:26.217", "UserId": "202345", "Text": "Module declaration\r\n\r\n    resource \"azurerm_app_service_plan\" \"appserviceplan\" {\r\n      name                = var.name\r\n      location            = var.location\r\n      resource_group_name = var.resource_group_name\r\n      kind                = var.kind\r\n      reserved            = var.reserved\r\n      is_xenon            = var.is_xenon\r\n    \r\n      sku {\r\n        # name = var.sku_name\r\n        tier = var.sku_tier\r\n        size = var.sku_tier\r\n      }\r\n    }\r\n\r\nCalling the above module like so (in `main.tf`) ... \r\n\r\n    module \"appserviceplan1\" {\r\n      source = \"../modules/app_service_plan\"\r\n    \r\n      name                = \"${var.project_name}-${var.environment}-appserviceplan\"\r\n      location            = var.location\r\n      resource_group_name = var.resource_group_name\r\n      kind                = var.asp_kind\r\n      reserved            = var.asp_reserved\r\n      is_xenon            = var.asp_is_xenon\r\n      # sku_name            = var.asp_sku_name\r\n      sku_tier = var.asp_sku_tier\r\n      sku_size = var.asp_sku_tier\r\n    }\r\n\r\nInput variable assignment (in `main.auto.tfvars`): \r\n\r\n    # Variable assignment for App Service Plan\r\n    asp_kind = \"xenon\"\r\n    # Recommended value is false\r\n    # Ref: https://registry.terraform.io/providers/hashicorp/azurerm/latest/docs/resources/app_service_plan\r\n    asp_reserved = false\r\n    asp_is_xenon = true\r\n    # asp_sku_name = \"P3\"\r\n    asp_sku_tier = \"PremiumV3\"\r\n    asp_sku_size = \"P3v3\"\r\n\r\nGetting the following error with `terraform apply`: \r\n\r\n    Error: Error creating/updating App Service Plan \"xyz-sandbox-appserviceplan\" (Resource Group \"abc-sandbox-xyz-cc-rg\"): web.AppServicePlansClient#CreateOrUpdate: Failure sending request: StatusCode=400 -- Original Error: Code=\"BadRequest\" Message=\"The parameter SKU.Name has an invalid value.\" Details=[{\"Message\":\"The parameter SKU.Name has an invalid value.\"},{\"Code\":\"BadRequest\"},{\"ErrorEntity\":{\"Code\":\"BadRequest\",\"Message\":\"The parameter SKU.Name has an invalid value.\",\"MessageTemplate\":\"The parameter {0} has an invalid value.\",\"Parameters\":[\"SKU.Name\"]}}]\r\n\r\nI have been spinning on this for hours now. Any help would be greatly appreciated! \r\n\r\n", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}, {"Id": "249307163", "PostHistoryTypeId": "1", "PostId": "68168693", "RevisionGUID": "c6877f70-f0c4-4a10-bc87-4b2a1ad94016", "CreationDate": "2021-06-28T18:53:26.217", "UserId": "202345", "Text": "Terraform Azure App Service Plan Error - The parameter SKU.Name has an invalid value", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}, {"Id": "249307164", "PostHistoryTypeId": "3", "PostId": "68168693", "RevisionGUID": "c6877f70-f0c4-4a10-bc87-4b2a1ad94016", "CreationDate": "2021-06-28T18:53:26.217", "UserId": "202345", "Text": "<terraform><terraform-provider-azure>", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}], "answers": [{"Id": "69623914", "PostTypeId": "2", "ParentId": "68168693", "CreationDate": "2021-10-19T00:38:10.137", "Score": "2", "Body": "<p>Thanks @KalC, the below works.</p>\n<pre><code>resource &quot;azurerm_app_service_plan&quot; &quot;af-sp&quot; {\n  name                     = &quot;af-sp&quot;\n  location                 = var.azure_functions_location\n  resource_group_name      = var.azure_functions_rg_name\n  kind                     = &quot;Linux&quot;\n  reserved                 = true\n\n  sku {\n    tier = &quot;P1v2&quot;\n    size = &quot;P1v2&quot;\n  }\n}\n</code></pre>\n", "OwnerUserId": "7011365", "LastActivityDate": "2021-10-19T00:38:10.137", "CommentCount": "0", "ContentLicense": "CC BY-SA 4.0", "history": [{"Id": "256114113", "PostHistoryTypeId": "2", "PostId": "69623914", "RevisionGUID": "fb06aee6-fae0-4c22-825c-739bfdd446ff", "CreationDate": "2021-10-19T00:38:10.137", "UserId": "7011365", "Text": "Thanks @KalC, the below works.\r\n\r\n    resource \"azurerm_app_service_plan\" \"af-sp\" {\r\n      name                     = \"af-sp\"\r\n      location                 = var.azure_functions_location\r\n      resource_group_name      = var.azure_functions_rg_name\r\n      kind                     = \"Linux\"\r\n      reserved                 = true\r\n    \r\n      sku {\r\n        tier = \"P1v2\"\r\n        size = \"P1v2\"\r\n      }\r\n    }", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}], "filtered-sentences": []}, {"Id": "68168925", "PostTypeId": "2", "ParentId": "68168693", "CreationDate": "2021-06-28T19:16:18.207", "Score": "4", "Body": "<p>Solution: I was using incorrect tier and size.</p>\n<p>Using the following solved it ..</p>\n<pre><code>asp_sku_tier = &quot;P3v3&quot;\nasp_sku_size = &quot;P3v3&quot;\n</code></pre>\n", "OwnerUserId": "202345", "LastActivityDate": "2021-06-28T19:16:18.207", "CommentCount": "1", "ContentLicense": "CC BY-SA 4.0", "comments": [{"Id": "126478476", "PostId": "68168925", "Score": "5", "Text": "This is documented exactly nowhere. Worse: it is documented wrongly. Thx!", "CreationDate": "2022-03-21T17:32:46.523", "UserId": "82673", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}], "history": [{"Id": "249308135", "PostHistoryTypeId": "2", "PostId": "68168925", "RevisionGUID": "f4ac6497-0ba1-4bcb-b7bf-fc7200a5508e", "CreationDate": "2021-06-28T19:16:18.207", "UserId": "202345", "Text": "Solution: I was using incorrect tier and size. \r\n\r\nUsing the following solved it ..\r\n\r\n    asp_sku_tier = \"P3v3\"\r\n    asp_sku_size = \"P3v3\"", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}], "filtered-sentences": []}], "contains-topic": true, "filtered-sentences": []}