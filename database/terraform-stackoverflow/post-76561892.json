{"Id": "76561892", "PostTypeId": "1", "CreationDate": "2023-06-27T05:39:00.300", "Score": "0", "ViewCount": "82", "Body": "<p>We are unable to create azure subscription using below terraform code</p>\n<pre><code>terraform {\n  required_providers {\n    azurerm = {\n      source  = &quot;hashicorp/azurerm&quot;\n      version = &quot;3.56.0&quot;\n    }   \n}\n}\n\n# Configure the Microsoft Azure Provider\nprovider &quot;azurerm&quot; {\n  features {}\n  skip_provider_registration = &quot;true&quot;\n  \n}\n\n\ndata &quot;azurerm_billing_enrollment_account_scope&quot; &quot;example&quot; {\n  billing_account_name    = &quot;account name&quot;\n  enrollment_account_name = &quot;account name&quot;\n}\n\nresource &quot;azurerm_subscription&quot; &quot;example&quot; {\n  subscription_name = &quot;My Example EA Subscription2&quot;\n  billing_scope_id  = data.azurerm_billing_enrollment_account_scope.example.id\n}\n\n\ndata &quot;azurerm_subscription&quot; &quot;current&quot; {\n}\n\nresource &quot;azurerm_management_group&quot; &quot;example_parent&quot; {\n  display_name = &quot;ParentGroup&quot;\n\n  subscription_ids = []\n}\n\nresource &quot;azurerm_management_group&quot; &quot;example_child&quot; {\n  display_name               = &quot;ChildGroup&quot;\n  parent_management_group_id = azurerm_management_group.example_parent.id\n\n  subscription_ids = []\n  # other subscription IDs can go here\n}\n</code></pre>\n<p>Getting below error:</p>\n<pre><code> Plan: 1 to add, 0 to change, 0 to destroy.\n azurerm_subscription.example: Creating...\n\n\n\n\n\u2577\n\u2502 Error: creating new Subscription (Alias &quot;6c92cfef-64f7-4ee4-b6b6-427501d2eab5&quot;): subscriptions.SubscriptionsClient#AliasCreate: Failure sending request: StatusCode=0 -- Original Error: Code=&quot;InvalidSubCreationScope&quot; Message=&quot;Not a valid subscription creation scope&quot;\n\u2502 \n\u2502   with azurerm_subscription.example,\n\u2502   on main.tf line 23, in resource &quot;azurerm_subscription&quot; &quot;example&quot;:\n\u2502   23: resource &quot;azurerm_subscription&quot; &quot;example&quot; {\n</code></pre>\n<p>Not sure what is the issue in my case Billing Name and Billing Scope is same, in my above code it is &quot;account name&quot;, or any other mistake i made?</p>\n<p>My requirement is create subscription and assign it to management group</p>\n", "OwnerUserId": "2739700", "LastActivityDate": "2023-06-27T05:39:00.300", "Title": "Create Azure subscription using Terraform", "Tags": "<azure><terraform>", "AnswerCount": "0", "CommentCount": "0", "ContentLicense": "CC BY-SA 4.0", "history": [{"Id": "294662319", "PostHistoryTypeId": "2", "PostId": "76561892", "RevisionGUID": "b86fd768-5592-49df-b0be-91169cd0247a", "CreationDate": "2023-06-27T05:39:00.300", "UserId": "2739700", "Text": "We are unable to create azure subscription using below terraform code\r\n\r\n\r\n    terraform {\r\n      required_providers {\r\n        azurerm = {\r\n          source  = \"hashicorp/azurerm\"\r\n          version = \"3.56.0\"\r\n        }   \r\n    }\r\n    }\r\n\r\n    # Configure the Microsoft Azure Provider\r\n    provider \"azurerm\" {\r\n      features {}\r\n      skip_provider_registration = \"true\"\r\n      \r\n    }\r\n\r\n\r\n    data \"azurerm_billing_enrollment_account_scope\" \"example\" {\r\n      billing_account_name    = \"account name\"\r\n      enrollment_account_name = \"account name\"\r\n    }\r\n\r\n    resource \"azurerm_subscription\" \"example\" {\r\n      subscription_name = \"My Example EA Subscription2\"\r\n      billing_scope_id  = data.azurerm_billing_enrollment_account_scope.example.id\r\n    }\r\n\r\n\r\n    data \"azurerm_subscription\" \"current\" {\r\n    }\r\n\r\n    resource \"azurerm_management_group\" \"example_parent\" {\r\n      display_name = \"ParentGroup\"\r\n\r\n      subscription_ids = []\r\n    }\r\n\r\n    resource \"azurerm_management_group\" \"example_child\" {\r\n      display_name               = \"ChildGroup\"\r\n      parent_management_group_id = azurerm_management_group.example_parent.id\r\n\r\n      subscription_ids = []\r\n      # other subscription IDs can go here\r\n    }\r\n\r\nGetting below error:\r\n\r\n     Plan: 1 to add, 0 to change, 0 to destroy.\r\n     azurerm_subscription.example: Creating...\r\n\r\n\r\n\r\n\r\n    \u2577\r\n    \u2502 Error: creating new Subscription (Alias \"6c92cfef-64f7-4ee4-b6b6-427501d2eab5\"): subscriptions.SubscriptionsClient#AliasCreate: Failure sending request: StatusCode=0 -- Original Error: Code=\"InvalidSubCreationScope\" Message=\"Not a valid subscription creation scope\"\r\n    \u2502 \r\n    \u2502   with azurerm_subscription.example,\r\n    \u2502   on main.tf line 23, in resource \"azurerm_subscription\" \"example\":\r\n    \u2502   23: resource \"azurerm_subscription\" \"example\" {\r\n\r\n\r\n\r\nNot sure what is the issue in my case Billing Name and Billing Scope is same, in my above code it is \"account name\", or any other mistake i made?\r\n\r\nMy requirement is create subscription and assign it to management group", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": [{"source": "Text", "text": "We are unable to create azure subscription using below terraform code terraform { required_providers { azurerm = { source = \"hashicorp/azurerm\" version = \"3.56.0\" } } } # Configure the Microsoft Azure Provider provider \"azurerm\" { features {} skip_provider_registration = \"true\" } data \"azurerm_billing_enrollment_account_scope\" \"example\" { billing_account_name = \"account name\" enrollment_account_name = \"account name\" } resource \"azurerm_subscription\" \"example\" { subscription_name = \"My Example EA Subscription2\" billing_scope_id = data.azurerm_billing_enrollment_account_scope.example.id } data \"azurerm_subscription\" \"current\" { } resource \"azurerm_management_group\" \"example_parent\" { display_name = \"ParentGroup\" subscription_ids = [] } resource \"azurerm_management_group\" \"example_child\" { display_name = \"ChildGroup\" parent_management_group_id = azurerm_management_group.example_parent.id subscription_ids = [] # other subscription IDs can go here } Getting below error: Plan: 1 to add, 0 to change, 0 to destroy. azurerm_subscription.example: Creating... \u2577 \u2502 Error: creating new Subscription (Alias \"6c92cfef-64f7-4ee4-b6b6-427501d2eab5\"): subscriptions.SubscriptionsClient#AliasCreate: Failure sending request: StatusCode=0 -- Original Error: Code=\"InvalidSubCreationScope\" Message=\"Not a valid subscription creation scope\" \u2502 \u2502 with azurerm_subscription.example, \u2502 on main.tf line 23, in resource \"azurerm_subscription\" \"example\": \u2502 23: resource \"azurerm_subscription\" \"example\" { Not sure what is the issue in my case Billing Name and Billing Scope is same, in my above code it is \"account name\", or any other mistake i made? ", "keywords": ["bill", "provider", "change"]}]}, {"Id": "294662321", "PostHistoryTypeId": "1", "PostId": "76561892", "RevisionGUID": "b86fd768-5592-49df-b0be-91169cd0247a", "CreationDate": "2023-06-27T05:39:00.300", "UserId": "2739700", "Text": "Create Azure subscription using Terraform", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}, {"Id": "294662322", "PostHistoryTypeId": "3", "PostId": "76561892", "RevisionGUID": "b86fd768-5592-49df-b0be-91169cd0247a", "CreationDate": "2023-06-27T05:39:00.300", "UserId": "2739700", "Text": "<azure><terraform>", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}], "contains-topic": true, "filtered-sentences": []}