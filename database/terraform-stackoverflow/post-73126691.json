{"Id": "73126691", "PostTypeId": "1", "AcceptedAnswerId": "73166137", "CreationDate": "2022-07-26T16:13:17.610", "Score": "0", "ViewCount": "583", "Body": "<p>I tried to use resource aws_glue_job, but as soon as it's prepared to be launched, an error is shown as follows:</p>\n<pre><code>\u2502 Error: error creating Glue Job (job): AccessDeniedException: Account 411xxxxxxxx (Account id) is denied access.\n\u2502 \n\u2502   with aws_glue_job.job,\n\u2502   on main.tf line 94, in resource &quot;aws_glue_job&quot; &quot;job&quot;:\n\u2502   94: resource &quot;aws_glue_job&quot; &quot;job&quot; {\n</code></pre>\n<p>I checked the policies and apparently is okay. What might be doing it?</p>\n", "OwnerUserId": "17701884", "LastEditorUserId": "17701884", "LastEditDate": "2022-07-26T16:16:16.023", "LastActivityDate": "2023-01-25T00:54:33.357", "Title": "Access Denied for Glue_Job in terraform", "Tags": "<amazon-web-services><terraform><amazon-iam><aws-glue>", "AnswerCount": "3", "CommentCount": "6", "ContentLicense": "CC BY-SA 4.0", "comments": [{"Id": "129152760", "PostId": "73126691", "Score": "1", "Text": "Is this cross-account? Also you might want to check if it is available in the region you want to create it in.", "CreationDate": "2022-07-26T16:16:44.953", "UserId": "8343484", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}, {"Id": "129153134", "PostId": "73126691", "Score": "0", "Text": "@MarkoE it's not cross-account. I'm doing it on us-east-2 region. I created all the rest in this same region like bucket, crawler, etc", "CreationDate": "2022-07-26T16:31:23.013", "UserId": "17701884", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}, {"Id": "129165590", "PostId": "73126691", "Score": "0", "Text": "Without more context it's almost impossible to make an assumption let alone answer the question. Can you add the code to the question?", "CreationDate": "2022-07-27T07:43:55.457", "UserId": "8343484", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}, {"Id": "129194918", "PostId": "73126691", "Score": "0", "Text": "We're having the same problem since yesterday in region us-east-1. Nothing changed, suddenly we cannot start our Glue jobs anymore with this error: \nFailed to start job\n[gluestudio-service.us-east-1.amazonaws.com] startJobRun: AccessDeniedException: Account <MY_ACCOUNT_NUMBER> is denied access. (Service: AWSGlue; Status Code: 400; Error Code: AccessDeniedException; Request ID: <MY_REQUEST_ID>; Proxy: null)", "CreationDate": "2022-07-28T10:37:31.350", "UserId": "1195688", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": [{"source": "Text", "text": "Nothing changed, suddenly we cannot start our Glue jobs anymore with this error: Failed to start job [gluestudio-service.us-east-1.amazonaws.com] startJobRun: AccessDeniedException: Account is denied access. (Service: AWSGlue; Status Code: 400; Error Code: AccessDeniedException; Request ID: ; Proxy: null)", "keywords": ["change"]}]}, {"Id": "129219536", "PostId": "73126691", "Score": "0", "Text": "@mikey I silves by creatina a New account and It worked. In my case, the account was used for testa. If your account is used for the Company I recommend you to talk t\u00f4 te support team from AWS and give further details about it", "CreationDate": "2022-07-29T11:34:24.443", "UserId": "17701884", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": [{"source": "Text", "text": "In my case, the account was used for testa. ", "keywords": ["test"]}]}, {"Id": "129575455", "PostId": "73126691", "Score": "0", "Text": "@FelipeLobatinho We have created a new account. First, it did work. After rolling out our components via Terraform, it was blocked again (for all sub-accounts of our org although only one accounts has been provisioned with Terraform).", "CreationDate": "2022-08-16T10:24:49.267", "UserId": "1195688", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}], "links": [{"Id": "1997061482", "CreationDate": "2022-08-10T14:38:56.877", "PostId": "73126691", "RelatedPostId": "73233710", "LinkTypeId": "1"}, {"Id": "1997061483", "CreationDate": "2022-08-10T14:38:56.877", "PostId": "73126691", "RelatedPostId": "73202225", "LinkTypeId": "1"}, {"Id": "1997061484", "CreationDate": "2022-08-10T14:38:56.877", "PostId": "73126691", "RelatedPostId": "73254895", "LinkTypeId": "1"}], "history": [{"Id": "275000469", "PostHistoryTypeId": "2", "PostId": "73126691", "RevisionGUID": "fa4e0df9-c463-46e8-9411-bf895eeb6fcc", "CreationDate": "2022-07-26T16:13:17.610", "UserId": "17701884", "Text": "I tried to use resource aws_glue_job, but as soon as it's prepared to be launched, an error is shown as follows \r\n\r\nThen, I just changed the word postgres for postgresql as follows:\r\n\r\n```\r\n\u2502 Error: failed creating IAM User (EMR_User): EntityAlreadyExists: User with name EMR_User already exists.\r\n\u2502       status code: 409, request id: 40df46d0-30f0-466f-a52b-dab6d5fdbfce\r\n\u2502 \r\n\u2502   with aws_iam_user.EMR_user,\r\n\u2502   on iam.tf line 7, in resource \"aws_iam_user\" \"EMR_user\":\r\n\u2502    7: resource \"aws_iam_user\" \"EMR_user\" {[enter image description here][1]\r\n```\r\n\r\nI checked the policies and apparently is okay. What might be doing it?\r\n\r\n", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": [{"source": "Text", "text": "Then, I just changed the word postgres for postgresql as follows: ``` \u2502 Error: failed creating IAM User (EMR_User): EntityAlreadyExists: User with name EMR_User already exists. \u2502 status code: 409, request id: 40df46d0-30f0-466f-a52b-dab6d5fdbfce \u2502 \u2502 with aws_iam_user.EMR_user, \u2502 on iam.tf line 7, in resource \"aws_iam_user\" \"EMR_user\": \u2502 7: resource \"aws_iam_user\" \"EMR_user\" {[enter image description here][1] ``` I checked the policies and apparently is okay. ", "keywords": ["change"]}]}, {"Id": "275000471", "PostHistoryTypeId": "1", "PostId": "73126691", "RevisionGUID": "fa4e0df9-c463-46e8-9411-bf895eeb6fcc", "CreationDate": "2022-07-26T16:13:17.610", "UserId": "17701884", "Text": "Access Denied in Terraform for Glue_Job", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}, {"Id": "275000472", "PostHistoryTypeId": "3", "PostId": "73126691", "RevisionGUID": "fa4e0df9-c463-46e8-9411-bf895eeb6fcc", "CreationDate": "2022-07-26T16:13:17.610", "UserId": "17701884", "Text": "<amazon-web-services><terraform><aws-glue>", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}, {"Id": "275000527", "PostHistoryTypeId": "5", "PostId": "73126691", "RevisionGUID": "6fc69208-a626-4003-8715-8ddde4ef2403", "CreationDate": "2022-07-26T16:14:06.383", "UserId": "17701884", "Comment": "deleted 127 characters in body", "Text": "I tried to use resource aws_glue_job, but as soon as it's prepared to be launched, an error is shown as follows \r\n\r\nThen, I just changed the word postgres for postgresql as follows:\r\n\r\n```\r\n\u2502 Error: error creating Glue Job (job): AccessDeniedException: Account 411991160559 is denied access.\r\n\u2502 \r\n\u2502   with aws_glue_job.job,\r\n\u2502   on main.tf line 94, in resource \"aws_glue_job\" \"job\":\r\n\u2502   94: resource \"aws_glue_job\" \"job\" {\r\n```\r\n\r\nI checked the policies and apparently is okay. What might be doing it?\r\n\r\n", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": [{"source": "Text", "text": "Then, I just changed the word postgres for postgresql as follows: ``` \u2502 Error: error creating Glue Job (job): AccessDeniedException: Account 411991160559 is denied access. \u2502 \u2502 with aws_glue_job.job, \u2502 on main.tf line 94, in resource \"aws_glue_job\" \"job\": \u2502 94: resource \"aws_glue_job\" \"job\" { ``` I checked the policies and apparently is okay. ", "keywords": ["change"]}]}, {"Id": "275000568", "PostHistoryTypeId": "5", "PostId": "73126691", "RevisionGUID": "21f60d1e-45f6-48a3-ab83-c1a3beb0c585", "CreationDate": "2022-07-26T16:14:41.787", "UserId": "17701884", "Comment": "added 12 characters in body", "Text": "I tried to use resource aws_glue_job, but as soon as it's prepared to be launched, an error is shown as follows \r\n\r\nThen, I just changed the word postgres for postgresql as follows:\r\n\r\n```\r\n\u2502 Error: error creating Glue Job (job): AccessDeniedException: Account 411xxxxxxxx (Account id) is denied access.\r\n\u2502 \r\n\u2502   with aws_glue_job.job,\r\n\u2502   on main.tf line 94, in resource \"aws_glue_job\" \"job\":\r\n\u2502   94: resource \"aws_glue_job\" \"job\" {\r\n```\r\n\r\nI checked the policies and apparently is okay. What might be doing it?\r\n\r\n", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": [{"source": "Text", "text": "Then, I just changed the word postgres for postgresql as follows: ``` \u2502 Error: error creating Glue Job (job): AccessDeniedException: Account 411xxxxxxxx (Account id) is denied access. \u2502 \u2502 with aws_glue_job.job, \u2502 on main.tf line 94, in resource \"aws_glue_job\" \"job\": \u2502 94: resource \"aws_glue_job\" \"job\" { ``` I checked the policies and apparently is okay. ", "keywords": ["change"]}]}, {"Id": "275000599", "PostHistoryTypeId": "5", "PostId": "73126691", "RevisionGUID": "767e9fe4-d350-444f-9272-3a99e4957611", "CreationDate": "2022-07-26T16:15:02.123", "UserId": "17701884", "Comment": "deleted 69 characters in body", "Text": "I tried to use resource aws_glue_job, but as soon as it's prepared to be launched, an error is shown as follows:\r\n\r\n```\r\n\u2502 Error: error creating Glue Job (job): AccessDeniedException: Account 411xxxxxxxx (Account id) is denied access.\r\n\u2502 \r\n\u2502   with aws_glue_job.job,\r\n\u2502   on main.tf line 94, in resource \"aws_glue_job\" \"job\":\r\n\u2502   94: resource \"aws_glue_job\" \"job\" {\r\n```\r\n\r\nI checked the policies and apparently is okay. What might be doing it?\r\n\r\n", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}, {"Id": "275000648", "PostHistoryTypeId": "6", "PostId": "73126691", "RevisionGUID": "c89ff270-16a2-4943-a42f-98d7ff0845a9", "CreationDate": "2022-07-26T16:15:43.410", "UserId": "17701884", "Comment": "edited tags", "Text": "<amazon-web-services><terraform><amazon-iam><aws-glue>", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}, {"Id": "275000696", "PostHistoryTypeId": "4", "PostId": "73126691", "RevisionGUID": "9c275731-632e-4cc9-98f9-1afc6c2c7a06", "CreationDate": "2022-07-26T16:16:16.023", "UserId": "17701884", "Comment": "edited title", "Text": "Access Denied for Glue_Job in terraform", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}], "answers": [{"Id": "73308253", "PostTypeId": "2", "ParentId": "73126691", "CreationDate": "2022-08-10T14:38:56.877", "Score": "0", "Body": "<p>We still have the same problem; even with sub-accounts of a totally new account. It seems like more and more people have the same issue:</p>\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/73126691/access-denied-for-glue-job-in-terraform\">Access Denied for Glue_Job in terraform</a></li>\n<li><a href=\"https://stackoverflow.com/questions/73233710/awsglue-accessdeniedexception-status-code-400\">AWSGlue AccessDeniedException, Status Code 400</a></li>\n<li><a href=\"https://stackoverflow.com/questions/73202225/access-denied-when-create-aws-glue-crawler\">Access Denied When Create AWS Glue Crawler</a></li>\n<li><a href=\"https://stackoverflow.com/questions/73254895/aws-glue-gives-accessdeniedexception\">AWS Glue gives AccessDeniedException</a></li>\n<li><a href=\"https://repost.aws/questions/QUhxdKlj4VSF-dzTXo7Xt3Iw/aws-glue-access-denied-exception-status-code-400\" rel=\"nofollow noreferrer\">https://repost.aws/questions/QUhxdKlj4VSF-dzTXo7Xt3Iw/aws-glue-access-denied-exception-status-code-400</a></li>\n<li><a href=\"https://repost.aws/questions/QU7wLjCe0rR_Wp5VFgVKTIbg/unable-to-run-create-glue-job-from-root-user-getting-access-denied-exception\" rel=\"nofollow noreferrer\">https://repost.aws/questions/QU7wLjCe0rR_Wp5VFgVKTIbg/unable-to-run-create-glue-job-from-root-user-getting-access-denied-exception</a></li>\n</ul>\n", "OwnerUserId": "1195688", "LastActivityDate": "2022-08-10T14:38:56.877", "CommentCount": "0", "ContentLicense": "CC BY-SA 4.0", "history": [{"Id": "275982639", "PostHistoryTypeId": "2", "PostId": "73308253", "RevisionGUID": "b476cd92-314f-4cbf-a9f5-0e8929888926", "CreationDate": "2022-08-10T14:38:56.877", "UserId": "1195688", "Text": "We still have the same problem; even with sub-accounts of a totally new account. It seems like more and more people have the same issue:\r\n\r\n - https://stackoverflow.com/questions/73126691/access-denied-for-glue-job-in-terraform \r\n - https://stackoverflow.com/questions/73233710/awsglue-accessdeniedexception-status-code-400 \r\n - https://stackoverflow.com/questions/73202225/access-denied-when-create-aws-glue-crawler \r\n - https://stackoverflow.com/questions/73254895/aws-glue-gives-accessdeniedexception \r\n - https://repost.aws/questions/QUhxdKlj4VSF-dzTXo7Xt3Iw/aws-glue-access-denied-exception-status-code-400 \r\n - https://repost.aws/questions/QU7wLjCe0rR_Wp5VFgVKTIbg/unable-to-run-create-glue-job-from-root-user-getting-access-denied-exception ", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}], "filtered-sentences": []}, {"Id": "75228777", "PostTypeId": "2", "ParentId": "73126691", "CreationDate": "2023-01-25T00:54:33.357", "Score": "0", "Body": "<p>I had the exact same problem. Logging with TF_LOG (<a href=\"https://developer.hashicorp.com/terraform/internals/debugging\" rel=\"nofollow noreferrer\">debbuging_terraform</a>) helped me to be sure that this was not being caused by anything that I could fix.\nIf you have already verified policies (For example I attached AWSGlueConsoleFullAccess policy to the role creating glue job) and you have also verified that aws provider is correct, see: <a href=\"https://developer.hashicorp.com/terraform/language/meta-arguments/resource-provider\" rel=\"nofollow noreferrer\">provider</a>. You can open a ticket with billing &amp; account and they will escalate this properly. They helped me and now I am able to create glue jobs again with the same account.</p>\n", "OwnerUserId": "21076573", "LastActivityDate": "2023-01-25T00:54:33.357", "CommentCount": "0", "ContentLicense": "CC BY-SA 4.0", "history": [{"Id": "286777586", "PostHistoryTypeId": "2", "PostId": "75228777", "RevisionGUID": "6b34f769-4e4a-4086-9d2d-1c2860078f3e", "CreationDate": "2023-01-25T00:54:33.357", "UserId": "21076573", "Text": "I had the exact same problem. Logging with TF_LOG ([debbuging_terraform][1]) helped me to be sure that this was not being caused by anything that I could fix.\r\nIf you have already verified policies (For example I attached AWSGlueConsoleFullAccess policy to the role creating glue job) and you have also verified that aws provider is correct, see: [provider][2]. You can open a ticket with billing & account and they will escalate this properly. They helped me and now I am able to create glue jobs again with the same account. \r\n\r\n\r\n  [1]: https://developer.hashicorp.com/terraform/internals/debugging\r\n  [2]: https://developer.hashicorp.com/terraform/language/meta-arguments/resource-provider", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": [{"source": "Text", "text": "If you have already verified policies (For example I attached AWSGlueConsoleFullAccess policy to the role creating glue job) and you have also verified that aws provider is correct, see: [provider][2]. ", "keywords": ["provider", "policy"]}, {"source": "Text", "text": "You can open a ticket with billing & account and they will escalate this properly. ", "keywords": ["bill"]}, {"source": "Text", "text": "They helped me and now I am able to create glue jobs again with the same account. [1]: https://developer.hashicorp.com/terraform/internals/debugging [2]: https://developer.hashicorp.com/terraform/language/meta-arguments/resource-provider", "keywords": ["provider"]}]}], "filtered-sentences": [{"source": "Body", "text": "If you have already verified policies (For example I attached AWSGlueConsoleFullAccess policy to the role creating glue job) and you have also verified that aws provider is correct, see: provider. ", "keywords": ["provider", "policy"]}, {"source": "Body", "text": "You can open a ticket with billing & account and they will escalate this properly. ", "keywords": ["bill"]}]}, {"Id": "73166137", "PostTypeId": "2", "ParentId": "73126691", "CreationDate": "2022-07-29T11:40:57.507", "Score": "0", "Body": "<p>For some reason my issue was solved by creating and using a new account. This account being used previously was for test, that is why I did have no problems by changing It to a new  one</p>\n", "OwnerUserId": "17701884", "LastEditorUserId": "17701884", "LastEditDate": "2022-07-29T16:09:11.057", "LastActivityDate": "2022-07-29T16:09:11.057", "CommentCount": "0", "ContentLicense": "CC BY-SA 4.0", "history": [{"Id": "275208400", "PostHistoryTypeId": "2", "PostId": "73166137", "RevisionGUID": "d4b6585f-6187-47e7-9a74-dc3ad615df5b", "CreationDate": "2022-07-29T11:40:57.507", "UserId": "17701884", "Text": "For some reason my issue was solve by creating and using a new account. This account bring used previously was for test, that is why I did have no problems by changing It to a new  one", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": [{"source": "Text", "text": "This account bring used previously was for test, that is why I did have no problems by changing ", "keywords": ["change", "test"]}]}, {"Id": "275218621", "PostHistoryTypeId": "5", "PostId": "73166137", "RevisionGUID": "c6f05d3c-e4d3-4e3a-9cab-300689cddaad", "CreationDate": "2022-07-29T16:08:56.700", "UserId": "17701884", "Comment": "added 1 character in body", "Text": "For some reason my issue was solved by creating and using a new account. This account bring used previously was for test, that is why I did have no problems by changing It to a new  one", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": [{"source": "Text", "text": "This account bring used previously was for test, that is why I did have no problems by changing ", "keywords": ["change", "test"]}]}, {"Id": "275218638", "PostHistoryTypeId": "5", "PostId": "73166137", "RevisionGUID": "e124976c-d0b5-48d8-b0c1-dd1e22376edb", "CreationDate": "2022-07-29T16:09:11.057", "UserId": "17701884", "Comment": "edited body", "Text": "For some reason my issue was solved by creating and using a new account. This account being used previously was for test, that is why I did have no problems by changing It to a new  one", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": [{"source": "Text", "text": "This account being used previously was for test, that is why I did have no problems by changing It to a new one", "keywords": ["change", "test"]}]}], "filtered-sentences": [{"source": "Body", "text": "This account being used previously was for test, that is why I did have no problems by changing It to a new one", "keywords": ["change", "test"]}]}], "contains-topic": true, "filtered-sentences": []}