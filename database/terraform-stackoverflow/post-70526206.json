{"Id": "70526206", "PostTypeId": "1", "AcceptedAnswerId": "70541593", "CreationDate": "2021-12-30T00:00:39.287", "Score": "1", "ViewCount": "1579", "Body": "<p>I was playing around with <code>terraform</code> to create an infrastructure for a couple of services on GCP. GCP organises all the infra in so called projects. I specified a project_id incrorrectly in terraform files(actually I set <code>project_id</code> to already existing in my GCP, but ptoject name was different). Terraform in plan phase was successful, but after <code>apply</code> it failed. Then I executed <code>terraform destroy</code>, set correct project_id(and name), executed <code>terraform apply</code> again, this time successfully. But when I opened the GCP console I saw that actually 2 projects were created in project list(one with correct name and id and another with some random name: smth like <code>My Project 1234</code> as name and <code>beaming-light-546562</code> as id). And now <code>gcloud projects list command</code> shows 3 projects(this random one, correct one and previously existing one).</p>\n<p>The problem is that I can't remove that &quot;random&quot; project, neither from gcloud utility nor from gcp console. I get an error</p>\n<pre><code>&lt;myuser_mail_address&gt; does not have permission to access projects instance or poject doesn't exist\n</code></pre>\n<p>Also that random project is not linked to my billing account.</p>\n<p>How can I remove that &quot;random&quot; project</p>\n<p><strong>EDIT</strong></p>\n<p>It seems strange that the project with id <code>beaming-light-546562</code> can't be removed by me(the owner of an account) with reasons that I do not have permissions to do that. Also the name of an id: it is similar to technic docker is using for generating names of running containers. I do not recall that terraform has such a feature. Could it be gcp itself who generates such random names?</p>\n", "OwnerUserId": "491790", "LastEditorUserId": "491790", "LastEditDate": "2021-12-30T15:23:12.567", "LastActivityDate": "2022-03-25T13:52:28.310", "Title": "Can't remove Google Cloud project", "Tags": "<google-cloud-platform><terraform><terraform-provider-gcp>", "AnswerCount": "1", "CommentCount": "13", "ContentLicense": "CC BY-SA 4.0", "comments": [{"Id": "124669673", "PostId": "70526206", "Score": "1", "Text": "what is your role on the organization level or folder level (the folder that contains the project)? you have to have some permissions to list and delete projects (`resourcemanager.projects.list` & `resourcemanager.projects.delete`)", "CreationDate": "2021-12-30T00:32:22.730", "UserId": "5993410", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}, {"Id": "124670083", "PostId": "70526206", "Score": "0", "Text": "@AtefHares in resource manager I see that my projects do not belong to any organization(`No organization` is shown). On that random project i can't view the roles, it says that I don't have permissions to view the permissions. On the other 2 projects I have role owner(I guess this mean that I can do everything with the project)", "CreationDate": "2021-12-30T01:20:13.543", "UserId": "491790", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}, {"Id": "124670160", "PostId": "70526206", "Score": "0", "Text": "When you used terraform to create the random project, did you use some service account or your account to authenticate to GCP?", "CreationDate": "2021-12-30T01:28:11.267", "UserId": "5993410", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}, {"Id": "124678860", "PostId": "70526206", "Score": "0", "Text": "There are a couple of steps to follow after using the terraform destroy command, Refer to the **cleaning up** section of this [documentation](https://cloud.google.com/community/tutorials/managing-gcp-projects-with-terraform) for more information on deleting a project and refer to this [documentation](https://cloud.google.com/billing/docs/how-to/view-linked#view_the_billing_account_linked_to_each_of_your_projects) for the details of the billing account associated with the project.", "CreationDate": "2021-12-30T12:53:38.333", "UserId": "15745126", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": [{"source": "Text", "text": "There are a couple of steps to follow after using the terraform destroy command, Refer to the **cleaning up** section of this [documentation](https://cloud.google.com/community/tutorials/managing-gcp-projects-with-terraform) for more information on deleting a project and refer to this [documentation](https://cloud.google.com/billing/docs/how-to/view-linked#view_the_billing_account_linked_to_each_of_your_projects) for the details of the billing account associated with the project.", "keywords": ["bill"]}]}, {"Id": "124680694", "PostId": "70526206", "Score": "0", "Text": "@AtefHares I used `gcloud auth application-default  login` to authenticate", "CreationDate": "2021-12-30T14:29:12.950", "UserId": "491790", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}, {"Id": "124681480", "PostId": "70526206", "Score": "0", "Text": "@GoliNikitha thanks for the links. I do not have orgasnization set in GCP. Also on those links I didn't find any hints how can I remove aforementioned project from resources list on GCP and from output ofgcloud command. All the recommended steps were made by me", "CreationDate": "2021-12-30T15:11:34.430", "UserId": "491790", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}, {"Id": "124681782", "PostId": "70526206", "Score": "0", "Text": "Did you check the **cleaning up** section of this [document](https://cloud.google.com/community/tutorials/managing-gcp-projects-with-terraform) and tried those steps ? steps are present at the end of the document and Did you get the information of the billing account associated to the project ?", "CreationDate": "2021-12-30T15:27:55.600", "UserId": "15745126", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": [{"source": "Text", "text": "Did you check the **cleaning up** section of this [document](https://cloud.google.com/community/tutorials/managing-gcp-projects-with-terraform) and tried those steps ? steps are present at the end of the document and Did you get the information of the billing account associated to the project ?", "keywords": ["bill"]}]}, {"Id": "124681926", "PostId": "70526206", "Score": "0", "Text": "@GoliNikitha My billing account doesn't contain the project that I'm talking about. Cleanup steps was perfomed: terraform destroy was successful(random project still there), deleting it with `gcloud delete` gives me error that I do not have permission to perform that operation(or that project id doesn't exist). Also I do not have any organizations", "CreationDate": "2021-12-30T15:35:44.113", "UserId": "491790", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": [{"source": "Text", "text": "My billing account doesn't contain the project that I'm talking about. ", "keywords": ["bill"]}]}, {"Id": "124681968", "PostId": "70526206", "Score": "0", "Text": "Looks like a potential bug in GCP. Maybe after some time it will be removed(like the projects in pending deletion section in resource manager view)", "CreationDate": "2021-12-30T15:38:13.417", "UserId": "491790", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}, {"Id": "124735460", "PostId": "70526206", "Score": "1", "Text": "@maks,It seems to be a known issue https://b.corp.google.com/issues/191214686, You might have been added into a project through a group,so it appears in the project list. However,you have not been granted permission to modify the IAM of that project,so you can't remove the group from the permission list. You can find what groups you're a member of in https://groups.google.com/my-groups. NOTE:You can leave the groups in order to lose the access,but there could be a situation where your email is added to a single role/permission and you would not be able to remove yourself from the IAM list.", "CreationDate": "2022-01-03T07:20:33.637", "UserId": "15745126", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}, {"Id": "124761886", "PostId": "70526206", "Score": "0", "Text": "@GoliNikitha sorry, which issue?(seems link requires internal google account).", "CreationDate": "2022-01-04T10:45:29.230", "UserId": "491790", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}, {"Id": "124775851", "PostId": "70526206", "Score": "0", "Text": "@GoliNikitha i can confirm that after removing my account from groups that it was in(they were some old groups which i do not track anymore), after some time that \"random\" project dissapear. Can you please add your comment as answear to the question with description of the mentioned issue? It solved my problem. Then I'll accept it as answear.", "CreationDate": "2022-01-04T20:29:36.533", "UserId": "491790", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}, {"Id": "124809391", "PostId": "70526206", "Score": "0", "Text": "@maks, I have updated my answer with the workaround.Glad it worked!!", "CreationDate": "2022-01-06T07:09:00.967", "UserId": "15745126", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}], "history": [{"Id": "260964424", "PostHistoryTypeId": "2", "PostId": "70526206", "RevisionGUID": "b42c5144-9071-43a7-9840-fd9b24e28d35", "CreationDate": "2021-12-30T00:00:39.287", "UserId": "491790", "Text": "I was playing around with `terraform` to create an infrastructure for a couple of services on GCP. GCP organises all the infra in so called projects. I specified a project_id incrorrectly in terraform files(actually I set `project_id` to already existing in my GCP, but ptoject name was different). Terraform in plan phase was successful, but after `apply` it failed. Then I executed `terraform destroy`, set correct project_id(and name), executed `terraform apply` again, this time successfully. But when I opened the GCP console I saw that actually 2 projects were created in project list(one with correct name and id and another with some random name: smth like `My Project 1234` as name and `beaming-light-546562` as id). And now `gcloud projects list command` shows 3 projects(this random one, correct one and previously existing one). \r\n\r\nThe problem is that I can't remove that \"random\" project, neither from gcloud utility nor from gcp console. I get an error\r\n\r\n    <myuser_mail_address> does not have permission to access projects instance or poject doesn't exist\r\n\r\nAlso that random project is not linked to my billing account.\r\n\r\nHow can I remove that \"random\" project", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": [{"source": "Text", "text": "I get an error does not have permission to access projects instance or poject doesn't exist Also that random project is not linked to my billing account. ", "keywords": ["bill", "instance"]}]}, {"Id": "260964426", "PostHistoryTypeId": "1", "PostId": "70526206", "RevisionGUID": "b42c5144-9071-43a7-9840-fd9b24e28d35", "CreationDate": "2021-12-30T00:00:39.287", "UserId": "491790", "Text": "Can't remove Google Cloud project", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}, {"Id": "260964427", "PostHistoryTypeId": "3", "PostId": "70526206", "RevisionGUID": "b42c5144-9071-43a7-9840-fd9b24e28d35", "CreationDate": "2021-12-30T00:00:39.287", "UserId": "491790", "Text": "<google-cloud-platform><terraform><terraform-provider-gcp>", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}, {"Id": "261002332", "PostHistoryTypeId": "5", "PostId": "70526206", "RevisionGUID": "c00c1849-4d7d-465a-ae6d-996fc64c8e4b", "CreationDate": "2021-12-30T15:23:12.567", "UserId": "491790", "Comment": "added 398 characters in body", "Text": "I was playing around with `terraform` to create an infrastructure for a couple of services on GCP. GCP organises all the infra in so called projects. I specified a project_id incrorrectly in terraform files(actually I set `project_id` to already existing in my GCP, but ptoject name was different). Terraform in plan phase was successful, but after `apply` it failed. Then I executed `terraform destroy`, set correct project_id(and name), executed `terraform apply` again, this time successfully. But when I opened the GCP console I saw that actually 2 projects were created in project list(one with correct name and id and another with some random name: smth like `My Project 1234` as name and `beaming-light-546562` as id). And now `gcloud projects list command` shows 3 projects(this random one, correct one and previously existing one). \r\n\r\nThe problem is that I can't remove that \"random\" project, neither from gcloud utility nor from gcp console. I get an error\r\n\r\n    <myuser_mail_address> does not have permission to access projects instance or poject doesn't exist\r\n\r\nAlso that random project is not linked to my billing account.\r\n\r\nHow can I remove that \"random\" project\r\n\r\n**EDIT**\r\n\r\nIt seems strange that the project with id `beaming-light-546562` can't be removed by me(the owner of an account) with reasons that I do not have permissions to do that. Also the name of an id: it is similar to technic docker is using for generating names of running containers. I do not recall that terraform has such a feature. Could it be gcp itself who generates such random names?", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": [{"source": "Text", "text": "I get an error does not have permission to access projects instance or poject doesn't exist Also that random project is not linked to my billing account. ", "keywords": ["bill", "instance"]}, {"source": "Text", "text": "I do not recall that terraform has such a feature. ", "keywords": ["feature"]}]}], "answers": [{"Id": "70541593", "PostTypeId": "2", "ParentId": "70526206", "CreationDate": "2021-12-31T11:00:07.737", "Score": "2", "Body": "<p>I tried to recreate the error i.e, I created a sample project(via console) and deleted the same sample project in cloud shell using this command\n<code>gcloud projects delete &lt;project ID&gt;</code> and again tried to delete the same sample project in cloud shell and got this error message:\n<a href=\"https://i.stack.imgur.com/WBtcu.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/WBtcu.png\" alt=\"enter image description here\" /></a></p>\n<p>You can cross verify if the reason listed in the image i.e <strong>PROJECT_DELETE_INACTIVE</strong> is present in the output of your <code>gcloud projects delete &lt;project ID&gt;</code> command.This means that the project is inactive and the project becomes inactive when it's deleted.</p>\n<p>From this <a href=\"https://cloud.google.com/resource-manager/docs/creating-managing-projects#shutting_down_projects\" rel=\"nofollow noreferrer\">document</a> :\nThe project takes approximately 30-days for complete deletion, At the end of the 30-day period, the project and all its resources are deleted and cannot be recovered.</p>\n<p><strong>Edit</strong>:</p>\n<p>It seems to be a known issue with GCP. Leaving \u201cGoogle Groups\u201d related to GCP is a fix to this issue. You can track this <a href=\"https://b.corp.google.com/issues/191214686\" rel=\"nofollow noreferrer\">Public Issue</a> for more information.</p>\n<p>You might have been added into a project through a group, so it appears in the project list. However, you have not been granted permission to modify the IAM of that project, so you can't remove the group from the permission list.</p>\n<p>As a workaround, you can leave &quot;Google Groups&quot; related to GCP and reload the GCP console webpage so that all your unknown/inaccessible projects will disappear from the projects list. You can find what groups you're a member of, using this <a href=\"https://groups.google.com/my-groups?pli=1\" rel=\"nofollow noreferrer\">Google Groups link</a>.</p>\n<p>NOTE : You can leave the groups in order to lose the access, but there could be a situation where your email is added to a single role/permission and you would not be able to remove yourself from the IAM list.</p>\n", "OwnerUserId": "15745126", "LastEditorUserId": "15745126", "LastEditDate": "2022-03-25T13:52:28.310", "LastActivityDate": "2022-03-25T13:52:28.310", "CommentCount": "4", "ContentLicense": "CC BY-SA 4.0", "comments": [{"Id": "124697085", "PostId": "70541593", "Score": "0", "Text": "`ERROR: (gcloud.projects.delete) User [my_email_address] does not have permission to access projects instance [beaming-light-546562] (or it may not exist): The caller does not have permission`. This is full  message that is printed when I do `gcloud projects delete beaming-light-546562` (this project id is shown to me when I do `gcloud projects list`). So my error messaage differs a bit from yours", "CreationDate": "2021-12-31T11:38:20.407", "UserId": "491790", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": [{"source": "Text", "text": "`ERROR: (gcloud.projects.delete) User [my_email_address] does not have permission to access projects instance [beaming-light-546562] (or it may not exist): The caller does not have permission`. ", "keywords": ["instance"]}]}, {"Id": "124697112", "PostId": "70541593", "Score": "0", "Text": "My main concern is that it is shown in a list of active projects(I assume that command `gcloud projects list` without any flags shows active projects)", "CreationDate": "2021-12-31T11:40:18.393", "UserId": "491790", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}, {"Id": "124697691", "PostId": "70541593", "Score": "0", "Text": "@maks, Go to the **Manage Billing Accounts** page and Select the **My projects** tab.\nYou will see a table that lists all your projects, and the associated billing account name and billing account ID. If a billing account is not linked to a project, in the Billing account column, you will see \"Billing is disabled\".FYI, Billing accounts are disconnected from the project within one day if the project is deleted. So confirm once if the project is connected to any billing account.", "CreationDate": "2021-12-31T12:23:44.117", "UserId": "15745126", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": [{"source": "Text", "text": "You will see a table that lists all your projects, and the associated billing account name and billing account ID. ", "keywords": ["bill"]}, {"source": "Text", "text": "If a billing account is not linked to a project, in the Billing account column, you will see \"Billing is disabled\".", "keywords": ["bill"]}, {"source": "Text", "text": "So confirm once if the project is connected to any billing account.", "keywords": ["bill"]}]}, {"Id": "124697791", "PostId": "70541593", "Score": "0", "Text": "@maks, Refer this [document](https://cloud.google.com/billing/docs/how-to/view-linked#view_the_billing_account_linked_to_each_of_your_projects) for getting more information on billing account associated with the project.We can't delete the project connected to others billing account, If that is the case then first you need to change the billing account associated to the project to your billing account and then try to delete the project. Refer this [document](https://cloud.google.com/billing/docs/how-to/modify-project#change_the_billing_account_for_a_project) for changing the billing account.", "CreationDate": "2021-12-31T12:29:42.313", "UserId": "15745126", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": [{"source": "Text", "text": "@maks, Refer this [document](https://cloud.google.com/billing/docs/how-to/view-linked#view_the_billing_account_linked_to_each_of_your_projects) for getting more information on billing account associated with the project.", "keywords": ["bill"]}, {"source": "Text", "text": "We can't delete the project connected to others billing account, ", "keywords": ["bill"]}, {"source": "Text", "text": "If that is the case then first you need to change the billing account associated to the project to your billing account and then try to delete the project. ", "keywords": ["bill", "change"]}, {"source": "Text", "text": "Refer this [document](https://cloud.google.com/billing/docs/how-to/modify-project#change_the_billing_account_for_a_project) for changing the billing account.", "keywords": ["bill", "change"]}]}], "history": [{"Id": "261044124", "PostHistoryTypeId": "2", "PostId": "70541593", "RevisionGUID": "d4f0aac6-3c39-462b-af4b-d6caa8494217", "CreationDate": "2021-12-31T11:00:07.737", "UserId": "15745126", "Text": "I tried to recreate the error i.e, I created a sample project(via console) and deleted the same sample project in cloud run using this command \r\n`gcloud projects delete <project ID>` and again tried to delete the same sample project in cloud run and got this error message:\r\n[![enter image description here][1]][1]\r\n\r\n\r\n\r\nYou can cross verify if the reason listed in the image i.e **PROJECT_DELETE_INACTIVE** is present in the output of your `gcloud projects delete <project ID>` command.This means that the project is inactive and the project becomes inactive when it's deleted.\r\n\r\nFrom this [document][2] :\r\nThe project takes approximately 30-days for complete deletion, At the end of the 30-day period, the project and all its resources are deleted and cannot be recovered.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/WBtcu.png\r\n  [2]: https://cloud.google.com/resource-manager/docs/creating-managing-projects#shutting_down_projects", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}, {"Id": "261379998", "PostHistoryTypeId": "5", "PostId": "70541593", "RevisionGUID": "8c57b3ad-79cd-4f91-bc1d-2fe8c6bf0cdc", "CreationDate": "2022-01-06T07:07:57.573", "UserId": "15745126", "Comment": "improved my answer ", "Text": "I tried to recreate the error i.e, I created a sample project(via console) and deleted the same sample project in cloud run using this command \r\n`gcloud projects delete <project ID>` and again tried to delete the same sample project in cloud run and got this error message:\r\n[![enter image description here][1]][1]\r\n\r\n\r\n\r\nYou can cross verify if the reason listed in the image i.e **PROJECT_DELETE_INACTIVE** is present in the output of your `gcloud projects delete <project ID>` command.This means that the project is inactive and the project becomes inactive when it's deleted.\r\n\r\nFrom this [document][2] :\r\nThe project takes approximately 30-days for complete deletion, At the end of the 30-day period, the project and all its resources are deleted and cannot be recovered.\r\n\r\n**Edit**:\r\n\r\nIt seems to be a known issue with GCP. Leaving \u201cGoogle Groups\u201d related to GCP is a fix to this issue. You can track this [Public Issue][3] for more information.\r\n\r\nYou might have been added into a project through a group, so it appears in the project list. However, you have not been granted permission to modify the IAM of that project, so you can't remove the group from the permission list.\r\n\r\nAs a workaround, you can leave \"Google Groups\" related to GCP and reload the GCP console webpage so that all your unknown/inaccessible projects will disappear from the projects list. You can find what groups you're a member of, using this [Google Groups link][4].\r\n\r\nNOTE : You can leave the groups in order to lose the access, but there could be a situation where your email is added to a single role/permission and you would not be able to remove yourself from the IAM list.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/WBtcu.png\r\n  [2]: https://cloud.google.com/resource-manager/docs/creating-managing-projects#shutting_down_projects\r\n  [3]: https://b.corp.google.com/issues/191214686\r\n  [4]: https://groups.google.com/my-groups?pli=1", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}, {"Id": "266783689", "PostHistoryTypeId": "5", "PostId": "70541593", "RevisionGUID": "3af41751-4033-4b73-9a31-86d47843e3b5", "CreationDate": "2022-03-25T13:52:28.310", "UserId": "15745126", "Comment": "added 2 characters in body", "Text": "I tried to recreate the error i.e, I created a sample project(via console) and deleted the same sample project in cloud shell using this command \r\n`gcloud projects delete <project ID>` and again tried to delete the same sample project in cloud shell and got this error message:\r\n[![enter image description here][1]][1]\r\n\r\n\r\n\r\nYou can cross verify if the reason listed in the image i.e **PROJECT_DELETE_INACTIVE** is present in the output of your `gcloud projects delete <project ID>` command.This means that the project is inactive and the project becomes inactive when it's deleted.\r\n\r\nFrom this [document][2] :\r\nThe project takes approximately 30-days for complete deletion, At the end of the 30-day period, the project and all its resources are deleted and cannot be recovered.\r\n\r\n**Edit**:\r\n\r\nIt seems to be a known issue with GCP. Leaving \u201cGoogle Groups\u201d related to GCP is a fix to this issue. You can track this [Public Issue][3] for more information.\r\n\r\nYou might have been added into a project through a group, so it appears in the project list. However, you have not been granted permission to modify the IAM of that project, so you can't remove the group from the permission list.\r\n\r\nAs a workaround, you can leave \"Google Groups\" related to GCP and reload the GCP console webpage so that all your unknown/inaccessible projects will disappear from the projects list. You can find what groups you're a member of, using this [Google Groups link][4].\r\n\r\nNOTE : You can leave the groups in order to lose the access, but there could be a situation where your email is added to a single role/permission and you would not be able to remove yourself from the IAM list.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/WBtcu.png\r\n  [2]: https://cloud.google.com/resource-manager/docs/creating-managing-projects#shutting_down_projects\r\n  [3]: https://b.corp.google.com/issues/191214686\r\n  [4]: https://groups.google.com/my-groups?pli=1", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}], "filtered-sentences": []}], "contains-topic": true, "filtered-sentences": [{"source": "Body", "text": "Also that random project is not linked to my billing account. ", "keywords": ["bill"]}, {"source": "Body", "text": "I do not recall that terraform has such a feature. ", "keywords": ["feature"]}]}