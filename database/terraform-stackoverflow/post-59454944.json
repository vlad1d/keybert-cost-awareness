{"Id": "59454944", "PostTypeId": "1", "CreationDate": "2019-12-23T11:55:22.013", "Score": "0", "ViewCount": "1052", "Body": "<p>I am looking for a Terraform code sample to set the quota limits for the BigQuery API.</p>\n\n<p>Can someone please provide me with an example if any?</p>\n\n<p>Thank You</p>\n", "OwnerUserId": "11230147", "LastEditorUserId": "9146820", "LastEditDate": "2019-12-23T12:57:19.787", "LastActivityDate": "2022-06-16T23:47:40.920", "Title": "Terraform - Quota limits for BigQuery API", "Tags": "<google-cloud-platform><google-bigquery><terraform>", "AnswerCount": "2", "CommentCount": "1", "ContentLicense": "CC BY-SA 4.0", "comments": [{"Id": "105091425", "PostId": "59454944", "Score": "0", "Text": "What have you tried so far? Do you know how to do it outside of Terraform?", "CreationDate": "2019-12-23T12:10:32.627", "UserId": "2291321", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}], "history": [{"Id": "211732337", "PostHistoryTypeId": "2", "PostId": "59454944", "RevisionGUID": "5d22e4b4-a34e-4cee-aaf5-daef0bae607e", "CreationDate": "2019-12-23T11:55:22.013", "UserId": "11230147", "Text": "I am looking for terraform sample code to set the quota limits for BigQuery api.\r\nCan someone please help me to provide the examples if any.\r\n\r\n\r\nThank You", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}, {"Id": "211732338", "PostHistoryTypeId": "1", "PostId": "59454944", "RevisionGUID": "5d22e4b4-a34e-4cee-aaf5-daef0bae607e", "CreationDate": "2019-12-23T11:55:22.013", "UserId": "11230147", "Text": "Terraform-Quota limits for BigQuery api", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}, {"Id": "211732339", "PostHistoryTypeId": "3", "PostId": "59454944", "RevisionGUID": "5d22e4b4-a34e-4cee-aaf5-daef0bae607e", "CreationDate": "2019-12-23T11:55:22.013", "UserId": "11230147", "Text": "<google-cloud-platform><terraform>", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}, {"Id": "211735750", "PostHistoryTypeId": "5", "PostId": "59454944", "RevisionGUID": "41c9fd3f-6bb9-4a70-b9be-1a575611fec9", "CreationDate": "2019-12-23T12:57:19.787", "UserId": "9146820", "Comment": "Formatting, grammar, added tag.", "Text": "I am looking for a Terraform code sample to set the quota limits for the BigQuery API.\r\n\r\nCan someone please provide me with an example if any?\r\n\r\n\r\nThank You", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}, {"Id": "211735751", "PostHistoryTypeId": "4", "PostId": "59454944", "RevisionGUID": "41c9fd3f-6bb9-4a70-b9be-1a575611fec9", "CreationDate": "2019-12-23T12:57:19.787", "UserId": "9146820", "Comment": "Formatting, grammar, added tag.", "Text": "Terraform - Quota limits for BigQuery API", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}, {"Id": "211735752", "PostHistoryTypeId": "6", "PostId": "59454944", "RevisionGUID": "41c9fd3f-6bb9-4a70-b9be-1a575611fec9", "CreationDate": "2019-12-23T12:57:19.787", "UserId": "9146820", "Comment": "Formatting, grammar, added tag.", "Text": "<google-cloud-platform><google-bigquery><terraform>", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}], "answers": [{"Id": "72652973", "PostTypeId": "2", "ParentId": "59454944", "CreationDate": "2022-06-16T23:47:40.920", "Score": "3", "Body": "<p>This is actually possible using the google-beta provider. You can set up the provider and quota like so:</p>\n<pre><code>variable &quot;region&quot; {\n  description = &quot;Google project default region&quot;\n}\nvariable &quot;project_id&quot; {\n  description = &quot;Google project id&quot;\n}\n\nprovider &quot;google-beta&quot; {\n  project = var.project_id\n  region  = var.region\n}\n\nresource &quot;google_service_usage_consumer_quota_override&quot; &quot;bq_usage_per_day&quot; {\n  provider = google-beta\n  project = var.project_id\n  service = &quot;bigquery.googleapis.com&quot;\n  metric = urlencode(&quot;bigquery.googleapis.com/quota/query/usage&quot;)\n  limit = urlencode(&quot;/d/project&quot;)\n  override_value = 1000000\n  force = true\n}\n</code></pre>\n<p>The above would set the quota limit to around 1,000,000 MiB (976.563 GiB)</p>\n", "OwnerUserId": "4051334", "LastActivityDate": "2022-06-16T23:47:40.920", "CommentCount": "1", "ContentLicense": "CC BY-SA 4.0", "comments": [{"Id": "135742199", "PostId": "72652973", "Score": "0", "Text": "I'm looking to set the \"per user per day\" quota as well. However, what I should put in the limit field is very mysterious and I can't find a reference anywhere. Can you point me to a reference or let me know what the limit field should be? Thanks in advance.", "CreationDate": "2023-08-29T13:25:10.030", "UserId": "1435878", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}], "history": [{"Id": "272413075", "PostHistoryTypeId": "2", "PostId": "72652973", "RevisionGUID": "3aeb4871-e371-4938-8973-47940391b256", "CreationDate": "2022-06-16T23:47:40.920", "UserId": "4051334", "Text": "This is actually possible using the google-beta provider. You can set up the provider and quota like so:\r\n``` terraform\r\nvariable \"region\" {\r\n  description = \"Google project default region\"\r\n}\r\nvariable \"project_id\" {\r\n  description = \"Google project id\"\r\n}\r\n\r\nprovider \"google-beta\" {\r\n  project = var.project_id\r\n  region  = var.region\r\n}\r\n\r\nresource \"google_service_usage_consumer_quota_override\" \"bq_usage_per_day\" {\r\n  provider = google-beta\r\n  project = var.project_id\r\n  service = \"bigquery.googleapis.com\"\r\n  metric = urlencode(\"bigquery.googleapis.com/quota/query/usage\")\r\n  limit = urlencode(\"/d/project\")\r\n  override_value = 1000000\r\n  force = true\r\n}\r\n```\r\n\r\nThe above would set the quota limit to around 1,000,000 MiB (976.563 GiB)", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": [{"source": "Text", "text": "This is actually possible using the google-beta provider. ", "keywords": ["provider"]}, {"source": "Text", "text": "You can set up the provider and quota like so: ``` terraform variable \"region\" { description = \"Google project default region\" } variable \"project_id\" { description = \"Google project id\" } provider \"google-beta\" { project = var.project_id region = var.region } resource \"google_service_usage_consumer_quota_override\" \"bq_usage_per_day\" { provider = google-beta project = var.project_id service = \"bigquery.googleapis.com\" metric = urlencode(\"bigquery.googleapis.com/quota/query/usage\") limit = urlencode(\"/d/project\") override_value = 1000000 force = true } ``` ", "keywords": ["provider"]}]}], "filtered-sentences": [{"source": "Body", "text": "This is actually possible using the google-beta provider. ", "keywords": ["provider"]}, {"source": "Body", "text": "You can set up the provider and quota like so: The above would set the quota limit to around 1,000,000 MiB (976.563 GiB)", "keywords": ["provider"]}]}, {"Id": "59466600", "PostTypeId": "2", "ParentId": "59454944", "CreationDate": "2019-12-24T09:27:42.607", "Score": "0", "Body": "<p>As of today, you are not able to set quota limits for the BigQuery API with Terraform. Nonetheless, <a href=\"https://www.terraform.io/docs/providers/google/r/bigquery_dataset.html\" rel=\"nofollow noreferrer\">here</a> you will find all Google BigQuery resources available for Terraform as a provider. </p>\n\n<p>As documented here, you will find further information regarding the different <a href=\"https://cloud.google.com/bigquery/quotas\" rel=\"nofollow noreferrer\">quotas and limits presents in BigQuery</a>. </p>\n\n<p>I will also attach how you can request an increase in your quota <a href=\"https://cloud.google.com/docs/quota#requesting_higher_quota\" rel=\"nofollow noreferrer\">here.</a> and how to create <a href=\"https://cloud.google.com/bigquery/docs/custom-quotas#controlling_query_costs_using_bigquery_custom_quotas\" rel=\"nofollow noreferrer\">custom cost controls</a> within BigQuery. </p>\n\n<p>BigQuery custom cost controls enable you to specify a limit on the number of bytes processed per day, in 10 TB increments. (Note, the minimum is 10TB increments, not 1TB).</p>\n\n<p>Finally, as a workaround, you can control cost by following BigQuery\u2019s best practices, as stated <a href=\"https://cloud.google.com/bigquery/docs/best-practices-costs#limit_query_costs_by_restricting_the_number_of_bytes_billed\" rel=\"nofollow noreferrer\">here.</a></p>\n\n<p>I hope this helps.</p>\n", "OwnerUserId": "8431081", "LastActivityDate": "2019-12-24T09:27:42.607", "CommentCount": "1", "ContentLicense": "CC BY-SA 4.0", "comments": [{"Id": "105148680", "PostId": "59466600", "Score": "0", "Text": "Yes , this is really helps to understand more on the BigQuery.                                                                      Thanks a lot.", "CreationDate": "2019-12-26T10:12:48.703", "UserId": "11230147", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}], "history": [{"Id": "211780484", "PostHistoryTypeId": "2", "PostId": "59466600", "RevisionGUID": "a803e762-5ca1-48b8-b68b-3ce78ce9711e", "CreationDate": "2019-12-24T09:27:42.607", "UserId": "8431081", "Text": "As of today, you are not able to set quota limits for the BigQuery API with Terraform. Nonetheless, [here](https://www.terraform.io/docs/providers/google/r/bigquery_dataset.html) you will find all Google BigQuery resources available for Terraform as a provider. \r\n\r\nAs documented here, you will find further information regarding the different [quotas and limits presents in BigQuery](https://cloud.google.com/bigquery/quotas). \r\n\r\nI will also attach how you can request an increase in your quota [here.](https://cloud.google.com/docs/quota#requesting_higher_quota) and how to create [custom cost controls](https://cloud.google.com/bigquery/docs/custom-quotas#controlling_query_costs_using_bigquery_custom_quotas) within BigQuery. \r\n\r\nBigQuery custom cost controls enable you to specify a limit on the number of bytes processed per day, in 10 TB increments. (Note, the minimum is 10TB increments, not 1TB).\r\n\r\nFinally, as a workaround, you can control cost by following BigQuery\u2019s best practices, as stated [here.](https://cloud.google.com/bigquery/docs/best-practices-costs#limit_query_costs_by_restricting_the_number_of_bytes_billed)\r\n\r\nI hope this helps.", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": [{"source": "Text", "text": "Nonetheless, [here](https://www.terraform.io/docs/providers/google/r/bigquery_dataset.html) you will find all Google BigQuery resources available for Terraform as a provider. ", "keywords": ["provider"]}, {"source": "Text", "text": "I will also attach how you can request an increase in your quota [here.](https://cloud.google.com/docs/quota#requesting_higher_quota) and how to create [custom cost controls](https://cloud.google.com/bigquery/docs/custom-quotas#controlling_query_costs_using_bigquery_custom_quotas) within BigQuery. ", "keywords": ["cost"]}, {"source": "Text", "text": "BigQuery custom cost controls enable you to specify a limit on the number of bytes processed per day, in 10 TB increments. ", "keywords": ["cost"]}, {"source": "Text", "text": "Finally, as a workaround, you can control cost by following BigQuery\u2019s best practices, as stated [here.](https://cloud.google.com/bigquery/docs/best-practices-costs#limit_query_costs_by_restricting_the_number_of_bytes_billed) I hope this helps.", "keywords": ["cost"]}]}], "filtered-sentences": [{"source": "Body", "text": "Nonetheless, here you will find all Google BigQuery resources available for Terraform as a provider. ", "keywords": ["provider"]}, {"source": "Body", "text": "and how to create custom cost controls within BigQuery. ", "keywords": ["cost"]}, {"source": "Body", "text": "BigQuery custom cost controls enable you to specify a limit on the number of bytes processed per day, in 10 TB increments. ", "keywords": ["cost"]}, {"source": "Body", "text": "Finally, as a workaround, you can control cost by following BigQuery\u2019s best practices, as stated here. ", "keywords": ["cost"]}]}], "contains-topic": true, "filtered-sentences": []}