{"Id": "76166456", "PostTypeId": "1", "CreationDate": "2023-05-03T17:10:49.490", "Score": "0", "ViewCount": "134", "Body": "<p>It seems nice and easy to enable the tag inheritance preview feature in the Azure portal.\nSee here <a href=\"https://learn.microsoft.com/en-us/azure/cost-management-billing/costs/enable-tag-inheritance\" rel=\"nofollow noreferrer\">https://learn.microsoft.com/en-us/azure/cost-management-billing/costs/enable-tag-inheritance</a>,\nBut I'd like to do this using Terraform.</p>\n<p>I think the Azure/azapi provider is the key to using Azure preview features.\nSee here <a href=\"https://registry.terraform.io/providers/Azure/azapi/latest/docs\" rel=\"nofollow noreferrer\">https://registry.terraform.io/providers/Azure/azapi/latest/docs</a>\nhowever, I'm stuck trying to workout out to use it to enable the feature on my subscription.</p>\n<p>I'm hoping simply enabling this preview future will mean we can avoid setting up a set of tag policies.</p>\n<p>We've added the provider to our terraform but are unsure how to use it to enable the tag inheritance preview feature. I've been looking through the rest API, but currently have not found anything <a href=\"https://learn.microsoft.com/en-us/rest/api/azure/\" rel=\"nofollow noreferrer\">https://learn.microsoft.com/en-us/rest/api/azure/</a>. and i not find any clues when web searching.</p>\n<p>Any help or pointers is appreciated</p>\n", "OwnerUserId": "21807897", "LastActivityDate": "2023-05-03T17:10:49.490", "Title": "Azure tag inheritance preview future using terraform", "Tags": "<azure><terraform><azapi>", "AnswerCount": "0", "CommentCount": "3", "ContentLicense": "CC BY-SA 4.0", "comments": [{"Id": "134326714", "PostId": "76166456", "Score": "0", "Text": "The AzureRM provider for Terraform does tend to lag behind releases, as it's not published by Microsoft. As to your tagging policies and how tag inheritance can help you, it's going to depend on what you use tags for. If it's just for billing, then tag inheritance looks like a good option to prevent adding common tags to resources. However, as the doc you shared stats it only applies to usage, so the tags wouldn't appear in the Azure Portal like defined tags and wouldn't be used for other non-billing purposes.", "CreationDate": "2023-05-04T04:25:49.673", "UserId": "18408939", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": [{"source": "Text", "text": "The AzureRM provider for Terraform does tend to lag behind releases, as it's not published by Microsoft. ", "keywords": ["provider"]}, {"source": "Text", "text": "If it's just for billing, then tag inheritance looks like a good option to prevent adding common tags to resources. ", "keywords": ["bill"]}, {"source": "Text", "text": "However, as the doc you shared stats it only applies to usage, so the tags wouldn't appear in the Azure Portal like defined tags and wouldn't be used for other non-billing purposes.", "keywords": ["bill"]}]}, {"Id": "134329728", "PostId": "76166456", "Score": "0", "Text": "Hi, thanks for the feedback, yes, I was not clear, our use case is for billing. We had the same thought,  the tag inheritance seems like an easy route to take. The rest of our setup up is in IoC \nin Terraform. I'm struggling with enabling this preview feature. One option is to turn it on manually in the portal and wait until it reaches GA and is in AzureRM. but I thought i try to explore using azapi", "CreationDate": "2023-05-04T09:13:38.123", "UserId": "21807897", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": [{"source": "Text", "text": "Hi, thanks for the feedback, yes, I was not clear, our use case is for billing. ", "keywords": ["bill"]}, {"source": "Text", "text": "I'm struggling with enabling this preview feature. ", "keywords": ["feature"]}]}, {"Id": "134331287", "PostId": "76166456", "Score": "0", "Text": "Think I've found what I was looking for :-)\nhttps://learn.microsoft.com/en-us/azure/templates/microsoft.costmanagement/2022-10-05-preview/settings?pivots=deployment-language-terraform", "CreationDate": "2023-05-04T11:06:26.497", "UserId": "21807897", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}], "history": [{"Id": "292283964", "PostHistoryTypeId": "2", "PostId": "76166456", "RevisionGUID": "a2d61c46-1055-4dff-8ec1-fa314983e02c", "CreationDate": "2023-05-03T17:10:49.490", "UserId": "21807897", "Text": "It seems nice and easy to enable the tag inheritance preview feature in the Azure portal.\r\nSee here https://learn.microsoft.com/en-us/azure/cost-management-billing/costs/enable-tag-inheritance,\r\nBut I'd like to do this using Terraform.\r\n\r\nI think the Azure/azapi provider is the key to using Azure preview features.\r\nSee here https://registry.terraform.io/providers/Azure/azapi/latest/docs\r\nhowever, I'm stuck trying to workout out to use it to enable the feature on my subscription.\r\n\r\nI'm hoping simply enabling this preview future will mean we can avoid setting up a set of tag policies.\r\n\r\nWe've added the provider to our terraform but are unsure how to use it to enable the tag inheritance preview feature. I've been looking through the rest API, but currently have not found anything https://learn.microsoft.com/en-us/rest/api/azure/. and i not find any clues when web searching.\r\n\r\nAny help or pointers is appreciated", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": [{"source": "Text", "text": "It seems nice and easy to enable the tag inheritance preview feature in the Azure portal. ", "keywords": ["feature"]}, {"source": "Text", "text": "See here https://learn.microsoft.com/en-us/azure/cost-management-billing/costs/enable-tag-inheritance, But I'd like to do this using Terraform. ", "keywords": ["bill", "cost"]}, {"source": "Text", "text": "I think the Azure/azapi provider is the key to using Azure preview features. ", "keywords": ["provider"]}, {"source": "Text", "text": "See here https://registry.terraform.io/providers/Azure/azapi/latest/docs however, I'm stuck trying to workout out to use it to enable the feature on my subscription. ", "keywords": ["feature"]}, {"source": "Text", "text": "We've added the provider to our terraform but are unsure how to use it to enable the tag inheritance preview feature. ", "keywords": ["provider", "feature"]}]}, {"Id": "292283966", "PostHistoryTypeId": "1", "PostId": "76166456", "RevisionGUID": "a2d61c46-1055-4dff-8ec1-fa314983e02c", "CreationDate": "2023-05-03T17:10:49.490", "UserId": "21807897", "Text": "Azure tag inheritance preview future using terraform", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}, {"Id": "292283967", "PostHistoryTypeId": "3", "PostId": "76166456", "RevisionGUID": "a2d61c46-1055-4dff-8ec1-fa314983e02c", "CreationDate": "2023-05-03T17:10:49.490", "UserId": "21807897", "Text": "<azure><terraform><azapi>", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}, {"Id": "292283968", "PostHistoryTypeId": "66", "PostId": "76166456", "RevisionGUID": "a2d61c46-1055-4dff-8ec1-fa314983e02c", "CreationDate": "2023-05-03T17:10:49.490", "UserId": "21807897", "filtered-sentences": []}], "contains-topic": true, "filtered-sentences": [{"source": "Body", "text": "It seems nice and easy to enable the tag inheritance preview feature in the Azure portal. ", "keywords": ["feature"]}, {"source": "Body", "text": "See here https://learn.microsoft.com/en-us/azure/cost-management-billing/costs/enable-tag-inheritance, But I'd like to do this using Terraform. ", "keywords": ["bill", "cost"]}, {"source": "Body", "text": "I think the Azure/azapi provider is the key to using Azure preview features. ", "keywords": ["provider"]}, {"source": "Body", "text": "See here https://registry.terraform.io/providers/Azure/azapi/latest/docs however, I'm stuck trying to workout out to use it to enable the feature on my subscription. ", "keywords": ["feature"]}, {"source": "Body", "text": "We've added the provider to our terraform but are unsure how to use it to enable the tag inheritance preview feature. ", "keywords": ["provider", "feature"]}]}