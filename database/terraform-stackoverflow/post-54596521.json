{"Id": "54596521", "PostTypeId": "1", "CreationDate": "2019-02-08T16:25:39.947", "Score": "2", "ViewCount": "673", "Body": "<p>As you can see bellow I apply the same code (with no changes whatsoever) twice. The first time it deletes table routes. \nThe second time it re-creates them. </p>\n\n<p>This behaviour is driving me mad. Every time I have changes to my networking, I need to run terraform twice in order to have my route tables present. </p>\n\n<p>Any light in this issue is very welcome.</p>\n\n<pre><code>$ terraform apply\n\naws_vpc.vpc: Refreshing state... (ID: [REDACTED])\naws_route_table.public_route: Refreshing state... (ID: [REDACTED])\naws_route.peer_private_1: Refreshing state... (ID: [REDACTED])\naws_route.billing_private_1: Refreshing state... (ID: [REDACTED])\naws_route.billing_public_1: Refreshing state... (ID: [REDACTED])\naws_route_table_association.route_table_pub_1: Refreshing state... (ID: [REDACTED])\naws_route.rt_public_1b: Refreshing state... (ID: [REDACTED])\naws_route.local_public_1: Refreshing state... (ID: [REDACTED])\naws_route.rt_public_1a: Refreshing state... (ID: [REDACTED])\naws_route_table.private_route_1: Refreshing state... (ID: [REDACTED])\naws_route_table_association.route_table_priv_1: Refreshing state... (ID: [REDACTED])\naws_route.rt_private_1a: Refreshing state... (ID: [REDACTED])\naws_route.local_private_1: Refreshing state... (ID: [REDACTED])\naws_route.rt_private_1b: Refreshing state... (ID: [REDACTED])\n\nAn execution plan has been generated and is shown below.\nResource actions are indicated with the following symbols:\n  ~ update in-place\n\nTerraform will perform the following actions:\n\n  ~ module.vpc_network.aws_route_table.private_route_1\n      route.#:                                    \"4\" =&gt; \"1\"\n      route.1.cidr_block:                 \"\" =&gt; \"[REDACTED]\"\n      route.1.egress_only_gateway_id:     \"\" =&gt; \"\"\n      route.1.gateway_id:                 \"\" =&gt; \"[REDACTED]\"\n      route.1.instance_id:                \"\" =&gt; \"\"\n      route.1.ipv6_cidr_block:            \"\" =&gt; \"\"\n      route.1.nat_gateway_id:             \"\" =&gt; \"\"\n      route.1.network_interface_id:       \"\" =&gt; \"\"\n      route.1.vpc_peering_connection_id:  \"\" =&gt; \"\"\n      route.2.cidr_block:                \"[REDACTED]\" =&gt; \"\"\n      route.2.egress_only_gateway_id:    \"\" =&gt; \"\"\n      route.2.gateway_id:                \"\" =&gt; \"\"\n      route.2.instance_id:               \"\" =&gt; \"\"\n      route.2.ipv6_cidr_block:           \"\" =&gt; \"\"\n      route.2.nat_gateway_id:            \"[REDACTED]\" =&gt; \"\"\n      route.2.network_interface_id:      \"\" =&gt; \"\"\n      route.2.vpc_peering_connection_id: \"\" =&gt; \"\"\n      route.3.cidr_block:                \"[REDACTED]\" =&gt; \"\"\n      route.3.egress_only_gateway_id:    \"\" =&gt; \"\"\n      route.3.gateway_id:                \"\" =&gt; \"\"\n      route.3.instance_id:               \"\" =&gt; \"\"\n      route.3.ipv6_cidr_block:           \"\" =&gt; \"\"\n      route.3.nat_gateway_id:            \"\" =&gt; \"\"\n      route.3.network_interface_id:      \"\" =&gt; \"\"\n      route.3.vpc_peering_connection_id: \"[REDACTED]\" =&gt; \"\"\n      route.4.cidr_block:                \"[REDACTED]\" =&gt; \"\"\n      route.4.egress_only_gateway_id:    \"\" =&gt; \"\"\n      route.4.gateway_id:                \"\" =&gt; \"\"\n      route.4.instance_id:               \"\" =&gt; \"\"\n      route.4.ipv6_cidr_block:           \"\" =&gt; \"\"\n      route.4.nat_gateway_id:            \"\" =&gt; \"\"\n      route.4.network_interface_id:      \"\" =&gt; \"\"\n      route.4.vpc_peering_connection_id: \"[REDACTED]\" =&gt; \"\"\n      route.5.cidr_block:                \"[REDACTED]\" =&gt; \"\"\n      route.5.egress_only_gateway_id:    \"\" =&gt; \"\"\n      route.5.gateway_id:                \"\" =&gt; \"\"\n      route.5.instance_id:               \"\" =&gt; \"\"\n      route.5.ipv6_cidr_block:           \"\" =&gt; \"\"\n      route.5.nat_gateway_id:            \"\" =&gt; \"\"\n      route.5.network_interface_id:      \"\" =&gt; \"\"\n      route.5.vpc_peering_connection_id: \"[REDACTED]\" =&gt; \"\"\n\n  ~ module.vpc_network.aws_route_table.public_route\n      route.#:                                    \"4\" =&gt; \"1\"\n      route.3.cidr_block:                \"[REDACTED]\" =&gt; \"\"\n      route.3.egress_only_gateway_id:    \"\" =&gt; \"\"\n      route.3.gateway_id:                \"\" =&gt; \"\"\n      route.3.instance_id:               \"\" =&gt; \"\"\n      route.3.ipv6_cidr_block:           \"\" =&gt; \"\"\n      route.3.nat_gateway_id:            \"\" =&gt; \"\"\n      route.3.network_interface_id:      \"\" =&gt; \"\"\n      route.3.vpc_peering_connection_id: \"[REDACTED]\" =&gt; \"\"\n      route.6.cidr_block:                \"[REDACTED]\" =&gt; \"[REDACTED]\"\n      route.6.egress_only_gateway_id:    \"\" =&gt; \"\"\n      route.6.gateway_id:                \"[REDACTED]\" =&gt; \"[REDACTED]\"\n      route.6.instance_id:               \"\" =&gt; \"\"\n      route.6.ipv6_cidr_block:           \"\" =&gt; \"\"\n      route.6.nat_gateway_id:            \"\" =&gt; \"\"\n      route.6.network_interface_id:      \"\" =&gt; \"\"\n      route.6.vpc_peering_connection_id: \"\" =&gt; \"\"\n      route.4.cidr_block:                \"[REDACTED]\" =&gt; \"\"\n      route.4.egress_only_gateway_id:    \"\" =&gt; \"\"\n      route.4.gateway_id:                \"\" =&gt; \"\"\n      route.4.instance_id:               \"\" =&gt; \"\"\n      route.4.ipv6_cidr_block:           \"\" =&gt; \"\"\n      route.4.nat_gateway_id:            \"\" =&gt; \"\"\n      route.4.network_interface_id:      \"\" =&gt; \"\"\n      route.4.vpc_peering_connection_id: \"[REDACTED]\" =&gt; \"\"\n      route.5.cidr_block:                \"[REDACTED]\" =&gt; \"\"\n      route.5.egress_only_gateway_id:    \"\" =&gt; \"\"\n      route.5.gateway_id:                \"\" =&gt; \"\"\n      route.5.instance_id:               \"\" =&gt; \"\"\n      route.5.ipv6_cidr_block:           \"\" =&gt; \"\"\n      route.5.nat_gateway_id:            \"\" =&gt; \"\"\n      route.5.network_interface_id:      \"\" =&gt; \"\"\n      route.5.vpc_peering_connection_id: \"[REDACTED]\" =&gt; \"\"\n\n\nPlan: 0 to add, 2 to change, 0 to destroy.\n\nDo you want to perform these actions?\n  Terraform will perform the actions described above.\n  Only 'yes' will be accepted to approve.\n\n  Enter a value: yes\n\nmodule.vpc_network.aws_route_table.private_route_1: Modifying... (ID: [REDACTED])\n  route.#:                                    \"4\" =&gt; \"1\"\n  route.1.cidr_block:                 \"\" =&gt; \"[REDACTED]\"\n  route.1.egress_only_gateway_id:     \"\" =&gt; \"\"\n  route.1.gateway_id:                 \"\" =&gt; \"[REDACTED]\"\n  route.1.instance_id:                \"\" =&gt; \"\"\n  route.1.ipv6_cidr_block:            \"\" =&gt; \"\"\n  route.1.nat_gateway_id:             \"\" =&gt; \"\"\n  route.1.network_interface_id:       \"\" =&gt; \"\"\n  route.1.vpc_peering_connection_id:  \"\" =&gt; \"\"\n  route.2.cidr_block:                \"[REDACTED]\" =&gt; \"\"\n  route.2.egress_only_gateway_id:    \"\" =&gt; \"\"\n  route.2.gateway_id:                \"\" =&gt; \"\"\n  route.2.instance_id:               \"\" =&gt; \"\"\n  route.2.ipv6_cidr_block:           \"\" =&gt; \"\"\n  route.2.nat_gateway_id:            \"[REDACTED]\" =&gt; \"\"\n  route.2.network_interface_id:      \"\" =&gt; \"\"\n  route.2.vpc_peering_connection_id: \"\" =&gt; \"\"\n  route.3.cidr_block:                \"[REDACTED]\" =&gt; \"\"\n  route.3.egress_only_gateway_id:    \"\" =&gt; \"\"\n  route.3.gateway_id:                \"\" =&gt; \"\"\n  route.3.instance_id:               \"\" =&gt; \"\"\n  route.3.ipv6_cidr_block:           \"\" =&gt; \"\"\n  route.3.nat_gateway_id:            \"\" =&gt; \"\"\n  route.3.network_interface_id:      \"\" =&gt; \"\"\n  route.3.vpc_peering_connection_id: \"[REDACTED]\" =&gt; \"\"\n  route.4.cidr_block:                \"[REDACTED]\" =&gt; \"\"\n  route.4.egress_only_gateway_id:    \"\" =&gt; \"\"\n  route.4.gateway_id:                \"\" =&gt; \"\"\n  route.4.instance_id:               \"\" =&gt; \"\"\n  route.4.ipv6_cidr_block:           \"\" =&gt; \"\"\n  route.4.nat_gateway_id:            \"\" =&gt; \"\"\n  route.4.network_interface_id:      \"\" =&gt; \"\"\n  route.4.vpc_peering_connection_id: \"[REDACTED]\" =&gt; \"\"\n  route.5.cidr_block:                \"[REDACTED]\" =&gt; \"\"\n  route.5.egress_only_gateway_id:    \"\" =&gt; \"\"\n  route.5.gateway_id:                \"\" =&gt; \"\"\n  route.5.instance_id:               \"\" =&gt; \"\"\n  route.5.ipv6_cidr_block:           \"\" =&gt; \"\"\n  route.5.nat_gateway_id:            \"\" =&gt; \"\"\n  route.5.network_interface_id:      \"\" =&gt; \"\"\n  route.5.vpc_peering_connection_id: \"[REDACTED]\" =&gt; \"\"\nmodule.vpc_network.aws_route_table.private_route_2: Modifying... (ID: [REDACTED])\n  route.#:                                    \"4\" =&gt; \"1\"\n  route.1.cidr_block:                 \"\" =&gt; \"[REDACTED]\"\n  route.1.egress_only_gateway_id:     \"\" =&gt; \"\"\n  route.1.gateway_id:                 \"\" =&gt; \"[REDACTED]\"\n  route.1.instance_id:                \"\" =&gt; \"\"\n  route.1.ipv6_cidr_block:            \"\" =&gt; \"\"\n  route.1.nat_gateway_id:             \"\" =&gt; \"\"\n  route.1.network_interface_id:       \"\" =&gt; \"\"\n  route.1.vpc_peering_connection_id:  \"\" =&gt; \"\"\n  route.2.cidr_block:                \"[REDACTED]\" =&gt; \"\"\n  route.2.egress_only_gateway_id:    \"\" =&gt; \"\"\n  route.2.gateway_id:                \"\" =&gt; \"\"\n  route.2.instance_id:               \"\" =&gt; \"\"\n  route.2.ipv6_cidr_block:           \"\" =&gt; \"\"\n  route.2.nat_gateway_id:            \"[REDACTED]\" =&gt; \"\"\n  route.2.network_interface_id:      \"\" =&gt; \"\"\n  route.2.vpc_peering_connection_id: \"\" =&gt; \"\"\n  route.3.cidr_block:                \"[REDACTED]\" =&gt; \"\"\n  route.3.egress_only_gateway_id:    \"\" =&gt; \"\"\n  route.3.gateway_id:                \"\" =&gt; \"\"\n  route.3.instance_id:               \"\" =&gt; \"\"\n  route.3.ipv6_cidr_block:           \"\" =&gt; \"\"\n  route.3.nat_gateway_id:            \"\" =&gt; \"\"\n  route.3.network_interface_id:      \"\" =&gt; \"\"\n  route.3.vpc_peering_connection_id: \"[REDACTED]\" =&gt; \"\"\n  route.4.cidr_block:                \"[REDACTED]\" =&gt; \"\"\n  route.4.egress_only_gateway_id:    \"\" =&gt; \"\"\n  route.4.gateway_id:                \"\" =&gt; \"\"\n  route.4.instance_id:               \"\" =&gt; \"\"\n  route.4.ipv6_cidr_block:           \"\" =&gt; \"\"\n  route.4.nat_gateway_id:            \"\" =&gt; \"\"\n  route.4.network_interface_id:      \"\" =&gt; \"\"\n  route.4.vpc_peering_connection_id: \"[REDACTED]\" =&gt; \"\"\n  route.5.cidr_block:                \"[REDACTED]\" =&gt; \"\"\n  route.5.egress_only_gateway_id:    \"\" =&gt; \"\"\n  route.5.gateway_id:                \"\" =&gt; \"\"\n  route.5.instance_id:               \"\" =&gt; \"\"\n  route.5.ipv6_cidr_block:           \"\" =&gt; \"\"\n  route.5.nat_gateway_id:            \"\" =&gt; \"\"\n  route.5.network_interface_id:      \"\" =&gt; \"\"\n  route.5.vpc_peering_connection_id: \"[REDACTED]\" =&gt; \"\"\nmodule.vpc_network.aws_route_table.public_route: Modifying... (ID: [REDACTED])\n  route.#:                                    \"4\" =&gt; \"1\"\n  route.3.cidr_block:                \"[REDACTED]\" =&gt; \"\"\n  route.3.egress_only_gateway_id:    \"\" =&gt; \"\"\n  route.3.gateway_id:                \"\" =&gt; \"\"\n  route.3.instance_id:               \"\" =&gt; \"\"\n  route.3.ipv6_cidr_block:           \"\" =&gt; \"\"\n  route.3.nat_gateway_id:            \"\" =&gt; \"\"\n  route.3.network_interface_id:      \"\" =&gt; \"\"\n  route.3.vpc_peering_connection_id: \"[REDACTED]\" =&gt; \"\"\n  route.6.cidr_block:                \"[REDACTED]\" =&gt; \"[REDACTED]\"\n  route.6.egress_only_gateway_id:    \"\" =&gt; \"\"\n  route.6.gateway_id:                \"[REDACTED]\" =&gt; \"[REDACTED]\"\n  route.6.instance_id:               \"\" =&gt; \"\"\n  route.6.ipv6_cidr_block:           \"\" =&gt; \"\"\n  route.6.nat_gateway_id:            \"\" =&gt; \"\"\n  route.6.network_interface_id:      \"\" =&gt; \"\"\n  route.6.vpc_peering_connection_id: \"\" =&gt; \"\"\n  route.4.cidr_block:                \"[REDACTED]\" =&gt; \"\"\n  route.4.egress_only_gateway_id:    \"\" =&gt; \"\"\n  route.4.gateway_id:                \"\" =&gt; \"\"\n  route.4.instance_id:               \"\" =&gt; \"\"\n  route.4.ipv6_cidr_block:           \"\" =&gt; \"\"\n  route.4.nat_gateway_id:            \"\" =&gt; \"\"\n  route.4.network_interface_id:      \"\" =&gt; \"\"\n  route.4.vpc_peering_connection_id: \"[REDACTED]\" =&gt; \"\"\n  route.5.cidr_block:                \"[REDACTED]\" =&gt; \"\"\n  route.5.egress_only_gateway_id:    \"\" =&gt; \"\"\n  route.5.gateway_id:                \"\" =&gt; \"\"\n  route.5.instance_id:               \"\" =&gt; \"\"\n  route.5.ipv6_cidr_block:           \"\" =&gt; \"\"\n  route.5.nat_gateway_id:            \"\" =&gt; \"\"\n  route.5.network_interface_id:      \"\" =&gt; \"\"\n  route.5.vpc_peering_connection_id: \"[REDACTED]\" =&gt; \"\"\nmodule.vpc_network.aws_route_table.public_route: Modifications complete after 1s (ID: [REDACTED])\nmodule.vpc_network.aws_route_table.private_route_1: Modifications complete after 1s (ID: [REDACTED])\nmodule.vpc_network.aws_route_table.private_route_2: Modifications complete after 1s (ID: [REDACTED])\n\nApply complete! Resources: 0 added, 5 changed, 0 destroyed.\n</code></pre>\n\n<pre><code>$ terraform apply\n\naws_route_table.public_route: Refreshing state... (ID: [REDACTED])\naws_route.peer_private_1: Refreshing state... (ID: [REDACTED])\naws_vpc_peering_connection_accepter.peer: Refreshing state... (ID: [REDACTED])\naws_route.peer_public_1: Refreshing state... (ID: [REDACTED])\naws_route.billing_private_1: Refreshing state... (ID: [REDACTED])\naws_route.billing_public_1: Refreshing state... (ID: [REDACTED])\naws_route_table_association.route_table_pub_1: Refreshing state... (ID: [REDACTED])\naws_route.rt_public_1a: Refreshing state... (ID: [REDACTED])\naws_route.rt_public_1b: Refreshing state... (ID: [REDACTED])\naws_route.local_public_1: Refreshing state... (ID: [REDACTED])\naws_route_table.private_route_1: Refreshing state... (ID: [REDACTED])\naws_route_table_association.route_table_priv_1: Refreshing state... (ID: [REDACTED])\naws_route.local_private_1: Refreshing state... (ID: [REDACTED])\naws_route.rt_private_1a: Refreshing state... (ID: [REDACTED])\naws_route.rt_private_1b: Refreshing state... (ID: [REDACTED])\n\nAn execution plan has been generated and is shown below.\nResource actions are indicated with the following symbols:\n  + create\n  ~ update in-place\n\nTerraform will perform the following actions:\n\n  ~ module.vpc_network.aws_route_table.private_route_1\n      route.1.cidr_block:                 \"\" =&gt; \"[REDACTED]\"\n      route.1.egress_only_gateway_id:     \"\" =&gt; \"\"\n      route.1.gateway_id:                 \"\" =&gt; \"[REDACTED]\"\n      route.1.instance_id:                \"\" =&gt; \"\"\n      route.1.ipv6_cidr_block:            \"\" =&gt; \"\"\n      route.1.nat_gateway_id:             \"\" =&gt; \"\"\n      route.1.network_interface_id:       \"\" =&gt; \"\"\n      route.1.vpc_peering_connection_id:  \"\" =&gt; \"\"\n      route.2.cidr_block:                \"[REDACTED]\" =&gt; \"\"\n      route.2.egress_only_gateway_id:    \"\" =&gt; \"\"\n      route.2.gateway_id:                \"\" =&gt; \"\"\n      route.2.instance_id:               \"\" =&gt; \"\"\n      route.2.ipv6_cidr_block:           \"\" =&gt; \"\"\n      route.2.nat_gateway_id:            \"[REDACTED]\" =&gt; \"\"\n      route.2.network_interface_id:      \"\" =&gt; \"\"\n      route.2.vpc_peering_connection_id: \"\" =&gt; \"\"\n\n  + module.vpc_peering.aws_route.local_private_1\n      id:                                         &lt;computed&gt;\n      destination_cidr_block:                     \"[REDACTED]\"\n      destination_prefix_list_id:                 &lt;computed&gt;\n      egress_only_gateway_id:                     &lt;computed&gt;\n      gateway_id:                                 &lt;computed&gt;\n      instance_id:                                &lt;computed&gt;\n      instance_owner_id:                          &lt;computed&gt;\n      nat_gateway_id:                             &lt;computed&gt;\n      network_interface_id:                       &lt;computed&gt;\n      origin:                                     &lt;computed&gt;\n      route_table_id:                             \"[REDACTED]\"\n      state:                                      &lt;computed&gt;\n      vpc_peering_connection_id:                  \"[REDACTED]\"\n\n  + module.vpc_peering.aws_route.local_public_1\n      id:                                         &lt;computed&gt;\n      destination_cidr_block:                     \"[REDACTED]\"\n      destination_prefix_list_id:                 &lt;computed&gt;\n      egress_only_gateway_id:                     &lt;computed&gt;\n      gateway_id:                                 &lt;computed&gt;\n      instance_id:                                &lt;computed&gt;\n      instance_owner_id:                          &lt;computed&gt;\n      nat_gateway_id:                             &lt;computed&gt;\n      network_interface_id:                       &lt;computed&gt;\n      origin:                                     &lt;computed&gt;\n      route_table_id:                             \"[REDACTED]\"\n      state:                                      &lt;computed&gt;\n      vpc_peering_connection_id:                  \"[REDACTED]\"\n\n  + module.vpc_peering_billing.aws_route.rt_private_1a\n      id:                                         &lt;computed&gt;\n      destination_cidr_block:                     \"[REDACTED]\"\n      destination_prefix_list_id:                 &lt;computed&gt;\n      egress_only_gateway_id:                     &lt;computed&gt;\n      gateway_id:                                 &lt;computed&gt;\n      instance_id:                                &lt;computed&gt;\n      instance_owner_id:                          &lt;computed&gt;\n      nat_gateway_id:                             &lt;computed&gt;\n      network_interface_id:                       &lt;computed&gt;\n      origin:                                     &lt;computed&gt;\n      route_table_id:                             \"[REDACTED]\"\n      state:                                      &lt;computed&gt;\n      vpc_peering_connection_id:                  \"[REDACTED]\"\n\n  + module.vpc_peering_billing.aws_route.rt_private_1b\n      id:                                         &lt;computed&gt;\n      destination_cidr_block:                     \"[REDACTED]\"\n      destination_prefix_list_id:                 &lt;computed&gt;\n      egress_only_gateway_id:                     &lt;computed&gt;\n      gateway_id:                                 &lt;computed&gt;\n      instance_id:                                &lt;computed&gt;\n      instance_owner_id:                          &lt;computed&gt;\n      nat_gateway_id:                             &lt;computed&gt;\n      network_interface_id:                       &lt;computed&gt;\n      origin:                                     &lt;computed&gt;\n      route_table_id:                             \"[REDACTED]\"\n      state:                                      &lt;computed&gt;\n      vpc_peering_connection_id:                  \"[REDACTED]\"\n\n  + module.vpc_peering_billing.aws_route.rt_public_1a\n      id:                                         &lt;computed&gt;\n      destination_cidr_block:                     \"[REDACTED]\"\n      destination_prefix_list_id:                 &lt;computed&gt;\n      egress_only_gateway_id:                     &lt;computed&gt;\n      gateway_id:                                 &lt;computed&gt;\n      instance_id:                                &lt;computed&gt;\n      instance_owner_id:                          &lt;computed&gt;\n      nat_gateway_id:                             &lt;computed&gt;\n      network_interface_id:                       &lt;computed&gt;\n      origin:                                     &lt;computed&gt;\n      route_table_id:                             \"[REDACTED]\"\n      state:                                      &lt;computed&gt;\n      vpc_peering_connection_id:                  \"[REDACTED]\"\n\n  + module.vpc_peering_billing.aws_route.rt_public_1b\n      id:                                         &lt;computed&gt;\n      destination_cidr_block:                     \"[REDACTED]\"\n      destination_prefix_list_id:                 &lt;computed&gt;\n      egress_only_gateway_id:                     &lt;computed&gt;\n      gateway_id:                                 &lt;computed&gt;\n      instance_id:                                &lt;computed&gt;\n      instance_owner_id:                          &lt;computed&gt;\n      nat_gateway_id:                             &lt;computed&gt;\n      network_interface_id:                       &lt;computed&gt;\n      origin:                                     &lt;computed&gt;\n      route_table_id:                             \"[REDACTED]\"\n      state:                                      &lt;computed&gt;\n      vpc_peering_connection_id:                  \"[REDACTED]\"\n\n\nPlan: 4 to add, 1 to change, 0 to destroy.\n\nDo you want to perform these actions?\n  Terraform will perform the actions described above.\n  Only 'yes' will be accepted to approve.\n\n  Enter a value:\nmodule.vpc_peering_billing.aws_route.rt_public_1a: Creating...\n  destination_cidr_block:     \"\" =&gt; \"[REDACTED]\"\n  destination_prefix_list_id: \"\" =&gt; \"&lt;computed&gt;\"\n  egress_only_gateway_id:     \"\" =&gt; \"&lt;computed&gt;\"\n  gateway_id:                 \"\" =&gt; \"&lt;computed&gt;\"\n  instance_id:                \"\" =&gt; \"&lt;computed&gt;\"\n  instance_owner_id:          \"\" =&gt; \"&lt;computed&gt;\"\n  nat_gateway_id:             \"\" =&gt; \"&lt;computed&gt;\"\n  network_interface_id:       \"\" =&gt; \"&lt;computed&gt;\"\n  origin:                     \"\" =&gt; \"&lt;computed&gt;\"\n  route_table_id:             \"\" =&gt; \"[REDACTED]\"\n  state:                      \"\" =&gt; \"&lt;computed&gt;\"\n  vpc_peering_connection_id:  \"\" =&gt; \"[REDACTED]\"\nmodule.vpc_peering_billing.aws_route.rt_public_1b: Creating...\n  destination_cidr_block:     \"\" =&gt; \"[REDACTED]\"\n  destination_prefix_list_id: \"\" =&gt; \"&lt;computed&gt;\"\n  egress_only_gateway_id:     \"\" =&gt; \"&lt;computed&gt;\"\n  gateway_id:                 \"\" =&gt; \"&lt;computed&gt;\"\n  instance_id:                \"\" =&gt; \"&lt;computed&gt;\"\n  instance_owner_id:          \"\" =&gt; \"&lt;computed&gt;\"\n  nat_gateway_id:             \"\" =&gt; \"&lt;computed&gt;\"\n  network_interface_id:       \"\" =&gt; \"&lt;computed&gt;\"\n  origin:                     \"\" =&gt; \"&lt;computed&gt;\"\n  route_table_id:             \"\" =&gt; \"[REDACTED]\"\n  state:                      \"\" =&gt; \"&lt;computed&gt;\"\n  vpc_peering_connection_id:  \"\" =&gt; \"[REDACTED]\"\nmodule.vpc_network.aws_route_table.private_route_1: Modifying... (ID: [REDACTED])\n  route.1.cidr_block:                 \"\" =&gt; \"[REDACTED]\"\n  route.1.egress_only_gateway_id:     \"\" =&gt; \"\"\n  route.1.gateway_id:                 \"\" =&gt; \"[REDACTED]\"\n  route.1.instance_id:                \"\" =&gt; \"\"\n  route.1.ipv6_cidr_block:            \"\" =&gt; \"\"\n  route.1.nat_gateway_id:             \"\" =&gt; \"\"\n  route.1.network_interface_id:       \"\" =&gt; \"\"\n  route.1.vpc_peering_connection_id:  \"\" =&gt; \"\"\n  route.2.cidr_block:                \"[REDACTED]\" =&gt; \"\"\n  route.2.egress_only_gateway_id:    \"\" =&gt; \"\"\n  route.2.gateway_id:                \"\" =&gt; \"\"\n  route.2.instance_id:               \"\" =&gt; \"\"\n  route.2.ipv6_cidr_block:           \"\" =&gt; \"\"\n  route.2.nat_gateway_id:            \"[REDACTED]\" =&gt; \"\"\n  route.2.network_interface_id:      \"\" =&gt; \"\"\n  route.2.vpc_peering_connection_id: \"\" =&gt; \"\"\nmodule.vpc_peering.aws_route.local_public_1: Creating...\n  destination_cidr_block:     \"\" =&gt; \"[REDACTED]\"\n  destination_prefix_list_id: \"\" =&gt; \"&lt;computed&gt;\"\n  egress_only_gateway_id:     \"\" =&gt; \"&lt;computed&gt;\"\n  gateway_id:                 \"\" =&gt; \"&lt;computed&gt;\"\n  instance_id:                \"\" =&gt; \"&lt;computed&gt;\"\n  instance_owner_id:          \"\" =&gt; \"&lt;computed&gt;\"\n  nat_gateway_id:             \"\" =&gt; \"&lt;computed&gt;\"\n  network_interface_id:       \"\" =&gt; \"&lt;computed&gt;\"\n  origin:                     \"\" =&gt; \"&lt;computed&gt;\"\n  route_table_id:             \"\" =&gt; \"[REDACTED]\"\n  state:                      \"\" =&gt; \"&lt;computed&gt;\"\n  vpc_peering_connection_id:  \"\" =&gt; \"[REDACTED]\"\nmodule.vpc_peering_billing.aws_route.rt_public_1b: Creation complete after 0s (ID: [REDACTED])\nmodule.vpc_peering.aws_route.local_public_1: Creation complete after 0s (ID: [REDACTED])\nmodule.vpc_peering_billing.aws_route.rt_public_1a: Creation complete after 0s (ID: [REDACTED])\nmodule.vpc_network.aws_route_table.private_route_1: Modifications complete after 0s (ID: [REDACTED])\nmodule.vpc_peering_billing.aws_route.rt_private_1b: Creating...\n  destination_cidr_block:     \"\" =&gt; \"[REDACTED]\"\n  destination_prefix_list_id: \"\" =&gt; \"&lt;computed&gt;\"\n  egress_only_gateway_id:     \"\" =&gt; \"&lt;computed&gt;\"\n  gateway_id:                 \"\" =&gt; \"&lt;computed&gt;\"\n  instance_id:                \"\" =&gt; \"&lt;computed&gt;\"\n  instance_owner_id:          \"\" =&gt; \"&lt;computed&gt;\"\n  nat_gateway_id:             \"\" =&gt; \"&lt;computed&gt;\"\n  network_interface_id:       \"\" =&gt; \"&lt;computed&gt;\"\n  origin:                     \"\" =&gt; \"&lt;computed&gt;\"\n  route_table_id:             \"\" =&gt; \"[REDACTED]\"\n  state:                      \"\" =&gt; \"&lt;computed&gt;\"\n  vpc_peering_connection_id:  \"\" =&gt; \"[REDACTED]\"\nmodule.vpc_peering_billing.aws_route.rt_private_1a: Creating...\n  destination_cidr_block:     \"\" =&gt; \"[REDACTED]\"\n  destination_prefix_list_id: \"\" =&gt; \"&lt;computed&gt;\"\n  egress_only_gateway_id:     \"\" =&gt; \"&lt;computed&gt;\"\n  gateway_id:                 \"\" =&gt; \"&lt;computed&gt;\"\n  instance_id:                \"\" =&gt; \"&lt;computed&gt;\"\n  instance_owner_id:          \"\" =&gt; \"&lt;computed&gt;\"\n  nat_gateway_id:             \"\" =&gt; \"&lt;computed&gt;\"\n  network_interface_id:       \"\" =&gt; \"&lt;computed&gt;\"\n  origin:                     \"\" =&gt; \"&lt;computed&gt;\"\n  route_table_id:             \"\" =&gt; \"[REDACTED]\"\n  state:                      \"\" =&gt; \"&lt;computed&gt;\"\n  vpc_peering_connection_id:  \"\" =&gt; \"[REDACTED]\"\nmodule.vpc_peering.aws_route.local_private_1: Creating...\n  destination_cidr_block:     \"\" =&gt; \"[REDACTED]\"\n  destination_prefix_list_id: \"\" =&gt; \"&lt;computed&gt;\"\n  egress_only_gateway_id:     \"\" =&gt; \"&lt;computed&gt;\"\n  gateway_id:                 \"\" =&gt; \"&lt;computed&gt;\"\n  instance_id:                \"\" =&gt; \"&lt;computed&gt;\"\n  instance_owner_id:          \"\" =&gt; \"&lt;computed&gt;\"\n  nat_gateway_id:             \"\" =&gt; \"&lt;computed&gt;\"\n  network_interface_id:       \"\" =&gt; \"&lt;computed&gt;\"\n  origin:                     \"\" =&gt; \"&lt;computed&gt;\"\n  route_table_id:             \"\" =&gt; \"[REDACTED]\"\n  state:                      \"\" =&gt; \"&lt;computed&gt;\"\n  vpc_peering_connection_id:  \"\" =&gt; \"[REDACTED]\"\nmodule.vpc_peering.aws_route.local_private_1: Creation complete after 0s (ID: [REDACTED])\nmodule.vpc_peering_billing.aws_route.rt_private_1b: Creation complete after 0s (ID: [REDACTED])\nmodule.vpc_peering_billing.aws_route.rt_private_1a: Creation complete after 0s (ID: [REDACTED])\n\nApply complete! Resources: 4 added, 1 changed, 0 destroyed.\n</code></pre>\n", "OwnerUserId": "3759761", "LastEditorUserId": "3759761", "LastEditDate": "2019-02-08T16:37:26.507", "LastActivityDate": "2020-04-21T20:12:10.247", "Title": "Terraform deletes route tables then adds them on second run (no changes). Bug or am I missing something?", "Tags": "<amazon-web-services><terraform>", "AnswerCount": "1", "CommentCount": "3", "ContentLicense": "CC BY-SA 4.0", "comments": [{"Id": "95991378", "PostId": "54596521", "Score": "0", "Text": "Please share your template.", "CreationDate": "2019-02-08T17:37:37.293", "UserId": "1723857", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}, {"Id": "95991725", "PostId": "54596521", "Score": "0", "Text": "This would be much easier to answer if you shared your Terraform code. However, I'd guess you are using both the `aws_route_table` resource with `route` blocks and also `aws_route` resources and have ignored the note in the [docs](https://www.terraform.io/docs/providers/aws/r/route_table.html)?", "CreationDate": "2019-02-08T17:51:32.380", "UserId": "2291321", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}, {"Id": "96008096", "PostId": "54596521", "Score": "2", "Text": "I had a problem like this with routes and routetables. It was all about ordering, you can add routes to a route table either as inline objects or as separate route objects that attached to route tables, think i had to use separate route resources to avoid this ordering and reordering issues. seeing your code would help.", "CreationDate": "2019-02-09T13:02:33.043", "UserId": "592308", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}], "history": [{"Id": "191241115", "PostHistoryTypeId": "2", "PostId": "54596521", "RevisionGUID": "506f68f6-dbcb-4b82-a7c9-e5c5cf41e9d1", "CreationDate": "2019-02-08T16:25:39.947", "UserId": "3759761", "Text": "As you can see bellow I apply the same code (with no changes whatsoever) twice. The first time it deletes table routes. The second time it re-creates them. This behaviour is driving me mad. Every time I have changes to my networking, I need to run terraform twice in order to have my route tables present. Any light in this issue is very welcome.\r\n\r\n```\r\n$ terraform apply\r\n\r\naws_vpc.vpc: Refreshing state... (ID: [REDACTED])\r\naws_route_table.public_route: Refreshing state... (ID: [REDACTED])\r\naws_route.peer_private_1: Refreshing state... (ID: [REDACTED])\r\naws_route.billing_private_1: Refreshing state... (ID: [REDACTED])\r\naws_route.billing_public_1: Refreshing state... (ID: [REDACTED])\r\naws_route_table_association.route_table_pub_1: Refreshing state... (ID: [REDACTED])\r\naws_route.rt_public_1b: Refreshing state... (ID: [REDACTED])\r\naws_route.local_public_1: Refreshing state... (ID: [REDACTED])\r\naws_route.rt_public_1a: Refreshing state... (ID: [REDACTED])\r\naws_route_table.private_route_1: Refreshing state... (ID: [REDACTED])\r\naws_route_table_association.route_table_priv_1: Refreshing state... (ID: [REDACTED])\r\naws_route.rt_private_1a: Refreshing state... (ID: [REDACTED])\r\naws_route.local_private_1: Refreshing state... (ID: [REDACTED])\r\naws_route.rt_private_1b: Refreshing state... (ID: [REDACTED])\r\n\r\nAn execution plan has been generated and is shown below.\r\nResource actions are indicated with the following symbols:\r\n  ~ update in-place\r\n\r\nTerraform will perform the following actions:\r\n\r\n  ~ module.vpc_network.aws_route_table.private_route_1\r\n      route.#:                                    \"4\" => \"1\"\r\n      route.153935322.cidr_block:                 \"\" => \"[REDACTED]\"\r\n      route.153935322.egress_only_gateway_id:     \"\" => \"\"\r\n      route.153935322.gateway_id:                 \"\" => \"[REDACTED]\"\r\n      route.153935322.instance_id:                \"\" => \"\"\r\n      route.153935322.ipv6_cidr_block:            \"\" => \"\"\r\n      route.153935322.nat_gateway_id:             \"\" => \"\"\r\n      route.153935322.network_interface_id:       \"\" => \"\"\r\n      route.153935322.vpc_peering_connection_id:  \"\" => \"\"\r\n      route.2392047182.cidr_block:                \"[REDACTED]\" => \"\"\r\n      route.2392047182.egress_only_gateway_id:    \"\" => \"\"\r\n      route.2392047182.gateway_id:                \"\" => \"\"\r\n      route.2392047182.instance_id:               \"\" => \"\"\r\n      route.2392047182.ipv6_cidr_block:           \"\" => \"\"\r\n      route.2392047182.nat_gateway_id:            \"[REDACTED]\" => \"\"\r\n      route.2392047182.network_interface_id:      \"\" => \"\"\r\n      route.2392047182.vpc_peering_connection_id: \"\" => \"\"\r\n      route.2546124669.cidr_block:                \"[REDACTED]\" => \"\"\r\n      route.2546124669.egress_only_gateway_id:    \"\" => \"\"\r\n      route.2546124669.gateway_id:                \"\" => \"\"\r\n      route.2546124669.instance_id:               \"\" => \"\"\r\n      route.2546124669.ipv6_cidr_block:           \"\" => \"\"\r\n      route.2546124669.nat_gateway_id:            \"\" => \"\"\r\n      route.2546124669.network_interface_id:      \"\" => \"\"\r\n      route.2546124669.vpc_peering_connection_id: \"[REDACTED]\" => \"\"\r\n      route.3625533711.cidr_block:                \"[REDACTED]\" => \"\"\r\n      route.3625533711.egress_only_gateway_id:    \"\" => \"\"\r\n      route.3625533711.gateway_id:                \"\" => \"\"\r\n      route.3625533711.instance_id:               \"\" => \"\"\r\n      route.3625533711.ipv6_cidr_block:           \"\" => \"\"\r\n      route.3625533711.nat_gateway_id:            \"\" => \"\"\r\n      route.3625533711.network_interface_id:      \"\" => \"\"\r\n      route.3625533711.vpc_peering_connection_id: \"[REDACTED]\" => \"\"\r\n      route.4198773799.cidr_block:                \"[REDACTED]\" => \"\"\r\n      route.4198773799.egress_only_gateway_id:    \"\" => \"\"\r\n      route.4198773799.gateway_id:                \"\" => \"\"\r\n      route.4198773799.instance_id:               \"\" => \"\"\r\n      route.4198773799.ipv6_cidr_block:           \"\" => \"\"\r\n      route.4198773799.nat_gateway_id:            \"\" => \"\"\r\n      route.4198773799.network_interface_id:      \"\" => \"\"\r\n      route.4198773799.vpc_peering_connection_id: \"[REDACTED]\" => \"\"\r\n\r\n  ~ module.vpc_network.aws_route_table.public_route\r\n      route.#:                                    \"4\" => \"1\"\r\n      route.2546124669.cidr_block:                \"[REDACTED]\" => \"\"\r\n      route.2546124669.egress_only_gateway_id:    \"\" => \"\"\r\n      route.2546124669.gateway_id:                \"\" => \"\"\r\n      route.2546124669.instance_id:               \"\" => \"\"\r\n      route.2546124669.ipv6_cidr_block:           \"\" => \"\"\r\n      route.2546124669.nat_gateway_id:            \"\" => \"\"\r\n      route.2546124669.network_interface_id:      \"\" => \"\"\r\n      route.2546124669.vpc_peering_connection_id: \"[REDACTED]\" => \"\"\r\n      route.3243626339.cidr_block:                \"[REDACTED]\" => \"0.0.0.0/0\"\r\n      route.3243626339.egress_only_gateway_id:    \"\" => \"\"\r\n      route.3243626339.gateway_id:                \"[REDACTED]\" => \"[REDACTED]\"\r\n      route.3243626339.instance_id:               \"\" => \"\"\r\n      route.3243626339.ipv6_cidr_block:           \"\" => \"\"\r\n      route.3243626339.nat_gateway_id:            \"\" => \"\"\r\n      route.3243626339.network_interface_id:      \"\" => \"\"\r\n      route.3243626339.vpc_peering_connection_id: \"\" => \"\"\r\n      route.3625533711.cidr_block:                \"[REDACTED]\" => \"\"\r\n      route.3625533711.egress_only_gateway_id:    \"\" => \"\"\r\n      route.3625533711.gateway_id:                \"\" => \"\"\r\n      route.3625533711.instance_id:               \"\" => \"\"\r\n      route.3625533711.ipv6_cidr_block:           \"\" => \"\"\r\n      route.3625533711.nat_gateway_id:            \"\" => \"\"\r\n      route.3625533711.network_interface_id:      \"\" => \"\"\r\n      route.3625533711.vpc_peering_connection_id: \"[REDACTED]\" => \"\"\r\n      route.4198773799.cidr_block:                \"[REDACTED]\" => \"\"\r\n      route.4198773799.egress_only_gateway_id:    \"\" => \"\"\r\n      route.4198773799.gateway_id:                \"\" => \"\"\r\n      route.4198773799.instance_id:               \"\" => \"\"\r\n      route.4198773799.ipv6_cidr_block:           \"\" => \"\"\r\n      route.4198773799.nat_gateway_id:            \"\" => \"\"\r\n      route.4198773799.network_interface_id:      \"\" => \"\"\r\n      route.4198773799.vpc_peering_connection_id: \"[REDACTED]\" => \"\"\r\n\r\n\r\nPlan: 0 to add, 2 to change, 0 to destroy.\r\n\r\nDo you want to perform these actions?\r\n  Terraform will perform the actions described above.\r\n  Only 'yes' will be accepted to approve.\r\n\r\n  Enter a value: yes\r\n\r\nmodule.vpc_network.aws_route_table.private_route_1: Modifying... (ID: rtb-0b3eb1982817dd285)\r\n  route.#:                                    \"4\" => \"1\"\r\n  route.153935322.cidr_block:                 \"\" => \"[REDACTED]\"\r\n  route.153935322.egress_only_gateway_id:     \"\" => \"\"\r\n  route.153935322.gateway_id:                 \"\" => \"[REDACTED]\"\r\n  route.153935322.instance_id:                \"\" => \"\"\r\n  route.153935322.ipv6_cidr_block:            \"\" => \"\"\r\n  route.153935322.nat_gateway_id:             \"\" => \"\"\r\n  route.153935322.network_interface_id:       \"\" => \"\"\r\n  route.153935322.vpc_peering_connection_id:  \"\" => \"\"\r\n  route.2392047182.cidr_block:                \"[REDACTED]\" => \"\"\r\n  route.2392047182.egress_only_gateway_id:    \"\" => \"\"\r\n  route.2392047182.gateway_id:                \"\" => \"\"\r\n  route.2392047182.instance_id:               \"\" => \"\"\r\n  route.2392047182.ipv6_cidr_block:           \"\" => \"\"\r\n  route.2392047182.nat_gateway_id:            \"[REDACTED]\" => \"\"\r\n  route.2392047182.network_interface_id:      \"\" => \"\"\r\n  route.2392047182.vpc_peering_connection_id: \"\" => \"\"\r\n  route.2546124669.cidr_block:                \"[REDACTED]\" => \"\"\r\n  route.2546124669.egress_only_gateway_id:    \"\" => \"\"\r\n  route.2546124669.gateway_id:                \"\" => \"\"\r\n  route.2546124669.instance_id:               \"\" => \"\"\r\n  route.2546124669.ipv6_cidr_block:           \"\" => \"\"\r\n  route.2546124669.nat_gateway_id:            \"\" => \"\"\r\n  route.2546124669.network_interface_id:      \"\" => \"\"\r\n  route.2546124669.vpc_peering_connection_id: \"[REDACTED]\" => \"\"\r\n  route.3625533711.cidr_block:                \"[REDACTED]\" => \"\"\r\n  route.3625533711.egress_only_gateway_id:    \"\" => \"\"\r\n  route.3625533711.gateway_id:                \"\" => \"\"\r\n  route.3625533711.instance_id:               \"\" => \"\"\r\n  route.3625533711.ipv6_cidr_block:           \"\" => \"\"\r\n  route.3625533711.nat_gateway_id:            \"\" => \"\"\r\n  route.3625533711.network_interface_id:      \"\" => \"\"\r\n  route.3625533711.vpc_peering_connection_id: \"[REDACTED]\" => \"\"\r\n  route.4198773799.cidr_block:                \"[REDACTED]\" => \"\"\r\n  route.4198773799.egress_only_gateway_id:    \"\" => \"\"\r\n  route.4198773799.gateway_id:                \"\" => \"\"\r\n  route.4198773799.instance_id:               \"\" => \"\"\r\n  route.4198773799.ipv6_cidr_block:           \"\" => \"\"\r\n  route.4198773799.nat_gateway_id:            \"\" => \"\"\r\n  route.4198773799.network_interface_id:      \"\" => \"\"\r\n  route.4198773799.vpc_peering_connection_id: \"[REDACTED]\" => \"\"\r\nmodule.vpc_network.aws_route_table.private_route_2: Modifying... (ID: [REDACTED])\r\n  route.#:                                    \"4\" => \"1\"\r\n  route.153935322.cidr_block:                 \"\" => \"[REDACTED]\"\r\n  route.153935322.egress_only_gateway_id:     \"\" => \"\"\r\n  route.153935322.gateway_id:                 \"\" => \"[REDACTED]\"\r\n  route.153935322.instance_id:                \"\" => \"\"\r\n  route.153935322.ipv6_cidr_block:            \"\" => \"\"\r\n  route.153935322.nat_gateway_id:             \"\" => \"\"\r\n  route.153935322.network_interface_id:       \"\" => \"\"\r\n  route.153935322.vpc_peering_connection_id:  \"\" => \"\"\r\n  route.2392047182.cidr_block:                \"[REDACTED]\" => \"\"\r\n  route.2392047182.egress_only_gateway_id:    \"\" => \"\"\r\n  route.2392047182.gateway_id:                \"\" => \"\"\r\n  route.2392047182.instance_id:               \"\" => \"\"\r\n  route.2392047182.ipv6_cidr_block:           \"\" => \"\"\r\n  route.2392047182.nat_gateway_id:            \"[REDACTED]\" => \"\"\r\n  route.2392047182.network_interface_id:      \"\" => \"\"\r\n  route.2392047182.vpc_peering_connection_id: \"\" => \"\"\r\n  route.2546124669.cidr_block:                \"[REDACTED]\" => \"\"\r\n  route.2546124669.egress_only_gateway_id:    \"\" => \"\"\r\n  route.2546124669.gateway_id:                \"\" => \"\"\r\n  route.2546124669.instance_id:               \"\" => \"\"\r\n  route.2546124669.ipv6_cidr_block:           \"\" => \"\"\r\n  route.2546124669.nat_gateway_id:            \"\" => \"\"\r\n  route.2546124669.network_interface_id:      \"\" => \"\"\r\n  route.2546124669.vpc_peering_connection_id: \"[REDACTED]\" => \"\"\r\n  route.3625533711.cidr_block:                \"[REDACTED]\" => \"\"\r\n  route.3625533711.egress_only_gateway_id:    \"\" => \"\"\r\n  route.3625533711.gateway_id:                \"\" => \"\"\r\n  route.3625533711.instance_id:               \"\" => \"\"\r\n  route.3625533711.ipv6_cidr_block:           \"\" => \"\"\r\n  route.3625533711.nat_gateway_id:            \"\" => \"\"\r\n  route.3625533711.network_interface_id:      \"\" => \"\"\r\n  route.3625533711.vpc_peering_connection_id: \"[REDACTED]\" => \"\"\r\n  route.4198773799.cidr_block:                \"[REDACTED]\" => \"\"\r\n  route.4198773799.egress_only_gateway_id:    \"\" => \"\"\r\n  route.4198773799.gateway_id:                \"\" => \"\"\r\n  route.4198773799.instance_id:               \"\" => \"\"\r\n  route.4198773799.ipv6_cidr_block:           \"\" => \"\"\r\n  route.4198773799.nat_gateway_id:            \"\" => \"\"\r\n  route.4198773799.network_interface_id:      \"\" => \"\"\r\n  route.4198773799.vpc_peering_connection_id: \"[REDACTED]\" => \"\"\r\nmodule.vpc_network.aws_route_table.public_route: Modifying... (ID: [REDACTED])\r\n  route.#:                                    \"4\" => \"1\"\r\n  route.2546124669.cidr_block:                \"[REDACTED]\" => \"\"\r\n  route.2546124669.egress_only_gateway_id:    \"\" => \"\"\r\n  route.2546124669.gateway_id:                \"\" => \"\"\r\n  route.2546124669.instance_id:               \"\" => \"\"\r\n  route.2546124669.ipv6_cidr_block:           \"\" => \"\"\r\n  route.2546124669.nat_gateway_id:            \"\" => \"\"\r\n  route.2546124669.network_interface_id:      \"\" => \"\"\r\n  route.2546124669.vpc_peering_connection_id: \"[REDACTED]\" => \"\"\r\n  route.3243626339.cidr_block:                \"[REDACTED]\" => \"[REDACTED]\"\r\n  route.3243626339.egress_only_gateway_id:    \"\" => \"\"\r\n  route.3243626339.gateway_id:                \"[REDACTED]\" => \"[REDACTED]\"\r\n  route.3243626339.instance_id:               \"\" => \"\"\r\n  route.3243626339.ipv6_cidr_block:           \"\" => \"\"\r\n  route.3243626339.nat_gateway_id:            \"\" => \"\"\r\n  route.3243626339.network_interface_id:      \"\" => \"\"\r\n  route.3243626339.vpc_peering_connection_id: \"\" => \"\"\r\n  route.3625533711.cidr_block:                \"[REDACTED]\" => \"\"\r\n  route.3625533711.egress_only_gateway_id:    \"\" => \"\"\r\n  route.3625533711.gateway_id:                \"\" => \"\"\r\n  route.3625533711.instance_id:               \"\" => \"\"\r\n  route.3625533711.ipv6_cidr_block:           \"\" => \"\"\r\n  route.3625533711.nat_gateway_id:            \"\" => \"\"\r\n  route.3625533711.network_interface_id:      \"\" => \"\"\r\n  route.3625533711.vpc_peering_connection_id: \"[REDACTED]\" => \"\"\r\n  route.4198773799.cidr_block:                \"[REDACTED]\" => \"\"\r\n  route.4198773799.egress_only_gateway_id:    \"\" => \"\"\r\n  route.4198773799.gateway_id:                \"\" => \"\"\r\n  route.4198773799.instance_id:               \"\" => \"\"\r\n  route.4198773799.ipv6_cidr_block:           \"\" => \"\"\r\n  route.4198773799.nat_gateway_id:            \"\" => \"\"\r\n  route.4198773799.network_interface_id:      \"\" => \"\"\r\n  route.4198773799.vpc_peering_connection_id: \"[REDACTED]\" => \"\"\r\nmodule.vpc_network.aws_route_table.public_route: Modifications complete after 1s (ID: [REDACTED])\r\nmodule.vpc_network.aws_route_table.private_route_1: Modifications complete after 1s (ID: [REDACTED])\r\nmodule.vpc_network.aws_route_table.private_route_2: Modifications complete after 1s (ID: [REDACTED])\r\n\r\nApply complete! Resources: 0 added, 3 changed, 0 destroyed.\r\n```\r\n```\r\n$ terraform apply\r\n\r\naws_route_table.public_route: Refreshing state... (ID: [REDACTED])\r\naws_route.peer_private_1: Refreshing state... (ID: [REDACTED])\r\naws_vpc_peering_connection_accepter.peer: Refreshing state... (ID: [REDACTED])\r\naws_route.peer_public_1: Refreshing state... (ID: r-rtb-038475178038bb20c1557265332)\r\naws_route.billing_private_1: Refreshing state... (ID: r-rtb-1d3cd5781557265332)\r\naws_route.billing_public_1: Refreshing state... (ID: r-rtb-1c3cd5791557265332)\r\naws_route_table_association.route_table_pub_1: Refreshing state... (ID: rtbassoc-08d0a5e40c95517b8)\r\naws_route.rt_public_1a: Refreshing state... (ID: r-rtb-0f711391d7fb6cbcb464353785)\r\naws_route.rt_public_1b: Refreshing state... (ID: r-rtb-0f711391d7fb6cbcb2637761367)\r\naws_route.local_public_1: Refreshing state... (ID: r-rtb-0f711391d7fb6cbcb3529440343)\r\naws_route_table.private_route_1: Refreshing state... (ID: rtb-0b3eb1982817dd285)\r\naws_route_table_association.route_table_priv_1: Refreshing state... (ID: rtbassoc-0785d652c4c01c5dc)\r\naws_route.local_private_1: Refreshing state... (ID: r-rtb-0b3eb1982817dd2853529440343)\r\naws_route.rt_private_1a: Refreshing state... (ID: r-rtb-0b3eb1982817dd285464353785)\r\naws_route.rt_private_1b: Refreshing state... (ID: r-rtb-0b3eb1982817dd2852637761367)\r\n\r\nAn execution plan has been generated and is shown below.\r\nResource actions are indicated with the following symbols:\r\n  + create\r\n  ~ update in-place\r\n\r\nTerraform will perform the following actions:\r\n\r\n  ~ module.vpc_network.aws_route_table.private_route_1\r\n      route.153935322.cidr_block:                 \"\" => \"[REDACTED]\"\r\n      route.153935322.egress_only_gateway_id:     \"\" => \"\"\r\n      route.153935322.gateway_id:                 \"\" => \"[REDACTED]\"\r\n      route.153935322.instance_id:                \"\" => \"\"\r\n      route.153935322.ipv6_cidr_block:            \"\" => \"\"\r\n      route.153935322.nat_gateway_id:             \"\" => \"\"\r\n      route.153935322.network_interface_id:       \"\" => \"\"\r\n      route.153935322.vpc_peering_connection_id:  \"\" => \"\"\r\n      route.2392047182.cidr_block:                \"[REDACTED]\" => \"\"\r\n      route.2392047182.egress_only_gateway_id:    \"\" => \"\"\r\n      route.2392047182.gateway_id:                \"\" => \"\"\r\n      route.2392047182.instance_id:               \"\" => \"\"\r\n      route.2392047182.ipv6_cidr_block:           \"\" => \"\"\r\n      route.2392047182.nat_gateway_id:            \"[REDACTED]\" => \"\"\r\n      route.2392047182.network_interface_id:      \"\" => \"\"\r\n      route.2392047182.vpc_peering_connection_id: \"\" => \"\"\r\n\r\n  + module.vpc_peering.aws_route.local_private_1\r\n      id:                                         <computed>\r\n      destination_cidr_block:                     \"[REDACTED]\"\r\n      destination_prefix_list_id:                 <computed>\r\n      egress_only_gateway_id:                     <computed>\r\n      gateway_id:                                 <computed>\r\n      instance_id:                                <computed>\r\n      instance_owner_id:                          <computed>\r\n      nat_gateway_id:                             <computed>\r\n      network_interface_id:                       <computed>\r\n      origin:                                     <computed>\r\n      route_table_id:                             \"[REDACTED]\"\r\n      state:                                      <computed>\r\n      vpc_peering_connection_id:                  \"[REDACTED]\"\r\n\r\n  + module.vpc_peering.aws_route.local_public_1\r\n      id:                                         <computed>\r\n      destination_cidr_block:                     \"[REDACTED]\"\r\n      destination_prefix_list_id:                 <computed>\r\n      egress_only_gateway_id:                     <computed>\r\n      gateway_id:                                 <computed>\r\n      instance_id:                                <computed>\r\n      instance_owner_id:                          <computed>\r\n      nat_gateway_id:                             <computed>\r\n      network_interface_id:                       <computed>\r\n      origin:                                     <computed>\r\n      route_table_id:                             \"[REDACTED]\"\r\n      state:                                      <computed>\r\n      vpc_peering_connection_id:                  \"[REDACTED]\"\r\n\r\n  + module.vpc_peering_billing.aws_route.rt_private_1a\r\n      id:                                         <computed>\r\n      destination_cidr_block:                     \"[REDACTED]\"\r\n      destination_prefix_list_id:                 <computed>\r\n      egress_only_gateway_id:                     <computed>\r\n      gateway_id:                                 <computed>\r\n      instance_id:                                <computed>\r\n      instance_owner_id:                          <computed>\r\n      nat_gateway_id:                             <computed>\r\n      network_interface_id:                       <computed>\r\n      origin:                                     <computed>\r\n      route_table_id:                             \"[REDACTED]\"\r\n      state:                                      <computed>\r\n      vpc_peering_connection_id:                  \"[REDACTED]\"\r\n\r\n  + module.vpc_peering_billing.aws_route.rt_private_1b\r\n      id:                                         <computed>\r\n      destination_cidr_block:                     \"[REDACTED]\"\r\n      destination_prefix_list_id:                 <computed>\r\n      egress_only_gateway_id:                     <computed>\r\n      gateway_id:                                 <computed>\r\n      instance_id:                                <computed>\r\n      instance_owner_id:                          <computed>\r\n      nat_gateway_id:                             <computed>\r\n      network_interface_id:                       <computed>\r\n      origin:                                     <computed>\r\n      route_table_id:                             \"[REDACTED]\"\r\n      state:                                      <computed>\r\n      vpc_peering_connection_id:                  \"[REDACTED]\"\r\n\r\n  + module.vpc_peering_billing.aws_route.rt_public_1a\r\n      id:                                         <computed>\r\n      destination_cidr_block:                     \"[REDACTED]\"\r\n      destination_prefix_list_id:                 <computed>\r\n      egress_only_gateway_id:                     <computed>\r\n      gateway_id:                                 <computed>\r\n      instance_id:                                <computed>\r\n      instance_owner_id:                          <computed>\r\n      nat_gateway_id:                             <computed>\r\n      network_interface_id:                       <computed>\r\n      origin:                                     <computed>\r\n      route_table_id:                             \"[REDACTED]\"\r\n      state:                                      <computed>\r\n      vpc_peering_connection_id:                  \"[REDACTED]\"\r\n\r\n  + module.vpc_peering_billing.aws_route.rt_public_1b\r\n      id:                                         <computed>\r\n      destination_cidr_block:                     \"[REDACTED]\"\r\n      destination_prefix_list_id:                 <computed>\r\n      egress_only_gateway_id:                     <computed>\r\n      gateway_id:                                 <computed>\r\n      instance_id:                                <computed>\r\n      instance_owner_id:                          <computed>\r\n      nat_gateway_id:                             <computed>\r\n      network_interface_id:                       <computed>\r\n      origin:                                     <computed>\r\n      route_table_id:                             \"[REDACTED]\"\r\n      state:                                      <computed>\r\n      vpc_peering_connection_id:                  \"[REDACTED]\"\r\n\r\n\r\nPlan: 4 to add, 1 to change, 0 to destroy.\r\n\r\nDo you want to perform these actions?\r\n  Terraform will perform the actions described above.\r\n  Only 'yes' will be accepted to approve.\r\n\r\n  Enter a value:\r\nmodule.vpc_peering_billing.aws_route.rt_public_1a: Creating...\r\n  destination_cidr_block:     \"\" => \"[REDACTED]\"\r\n  destination_prefix_list_id: \"\" => \"<computed>\"\r\n  egress_only_gateway_id:     \"\" => \"<computed>\"\r\n  gateway_id:                 \"\" => \"<computed>\"\r\n  instance_id:                \"\" => \"<computed>\"\r\n  instance_owner_id:          \"\" => \"<computed>\"\r\n  nat_gateway_id:             \"\" => \"<computed>\"\r\n  network_interface_id:       \"\" => \"<computed>\"\r\n  origin:                     \"\" => \"<computed>\"\r\n  route_table_id:             \"\" => \"[REDACTED]\"\r\n  state:                      \"\" => \"<computed>\"\r\n  vpc_peering_connection_id:  \"\" => \"[REDACTED]\"\r\nmodule.vpc_peering_billing.aws_route.rt_public_1b: Creating...\r\n  destination_cidr_block:     \"\" => \"[REDACTED]\"\r\n  destination_prefix_list_id: \"\" => \"<computed>\"\r\n  egress_only_gateway_id:     \"\" => \"<computed>\"\r\n  gateway_id:                 \"\" => \"<computed>\"\r\n  instance_id:                \"\" => \"<computed>\"\r\n  instance_owner_id:          \"\" => \"<computed>\"\r\n  nat_gateway_id:             \"\" => \"<computed>\"\r\n  network_interface_id:       \"\" => \"<computed>\"\r\n  origin:                     \"\" => \"<computed>\"\r\n  route_table_id:             \"\" => \"[REDACTED]\"\r\n  state:                      \"\" => \"<computed>\"\r\n  vpc_peering_connection_id:  \"\" => \"[REDACTED]\"\r\nmodule.vpc_network.aws_route_table.private_route_1: Modifying... (ID: [REDACTED])\r\n  route.153935322.cidr_block:                 \"\" => \"[REDACTED]\"\r\n  route.153935322.egress_only_gateway_id:     \"\" => \"\"\r\n  route.153935322.gateway_id:                 \"\" => \"[REDACTED]\"\r\n  route.153935322.instance_id:                \"\" => \"\"\r\n  route.153935322.ipv6_cidr_block:            \"\" => \"\"\r\n  route.153935322.nat_gateway_id:             \"\" => \"\"\r\n  route.153935322.network_interface_id:       \"\" => \"\"\r\n  route.153935322.vpc_peering_connection_id:  \"\" => \"\"\r\n  route.2392047182.cidr_block:                \"[REDACTED]\" => \"\"\r\n  route.2392047182.egress_only_gateway_id:    \"\" => \"\"\r\n  route.2392047182.gateway_id:                \"\" => \"\"\r\n  route.2392047182.instance_id:               \"\" => \"\"\r\n  route.2392047182.ipv6_cidr_block:           \"\" => \"\"\r\n  route.2392047182.nat_gateway_id:            \"[REDACTED]\" => \"\"\r\n  route.2392047182.network_interface_id:      \"\" => \"\"\r\n  route.2392047182.vpc_peering_connection_id: \"\" => \"\"\r\nmodule.vpc_peering.aws_route.local_public_1: Creating...\r\n  destination_cidr_block:     \"\" => \"10.11.0.0/16\"\r\n  destination_prefix_list_id: \"\" => \"<computed>\"\r\n  egress_only_gateway_id:     \"\" => \"<computed>\"\r\n  gateway_id:                 \"\" => \"<computed>\"\r\n  instance_id:                \"\" => \"<computed>\"\r\n  instance_owner_id:          \"\" => \"<computed>\"\r\n  nat_gateway_id:             \"\" => \"<computed>\"\r\n  network_interface_id:       \"\" => \"<computed>\"\r\n  origin:                     \"\" => \"<computed>\"\r\n  route_table_id:             \"\" => \"rtb-0f711391d7fb6cbcb\"\r\n  state:                      \"\" => \"<computed>\"\r\n  vpc_peering_connection_id:  \"\" => \"pcx-0f25e6c5233d39cde\"\r\nmodule.vpc_peering_billing.aws_route.rt_public_1b: Creation complete after 0s (ID: r-rtb-0f711391d7fb6cbcb2637761367)\r\nmodule.vpc_peering.aws_route.local_public_1: Creation complete after 0s (ID: r-rtb-0f711391d7fb6cbcb3529440343)\r\nmodule.vpc_peering_billing.aws_route.rt_public_1a: Creation complete after 0s (ID: r-rtb-0f711391d7fb6cbcb464353785)\r\nmodule.vpc_network.aws_route_table.private_route_1: Modifications complete after 0s (ID: rtb-0b3eb1982817dd285)\r\nmodule.vpc_peering_billing.aws_route.rt_private_1b: Creating...\r\n  destination_cidr_block:     \"\" => \"10.160.52.0/24\"\r\n  destination_prefix_list_id: \"\" => \"<computed>\"\r\n  egress_only_gateway_id:     \"\" => \"<computed>\"\r\n  gateway_id:                 \"\" => \"<computed>\"\r\n  instance_id:                \"\" => \"<computed>\"\r\n  instance_owner_id:          \"\" => \"<computed>\"\r\n  nat_gateway_id:             \"\" => \"<computed>\"\r\n  network_interface_id:       \"\" => \"<computed>\"\r\n  origin:                     \"\" => \"<computed>\"\r\n  route_table_id:             \"\" => \"rtb-0b3eb1982817dd285\"\r\n  state:                      \"\" => \"<computed>\"\r\n  vpc_peering_connection_id:  \"\" => \"pcx-0ca0ce7f4c5ff69fa\"\r\nmodule.vpc_peering_billing.aws_route.rt_private_1a: Creating...\r\n  destination_cidr_block:     \"\" => \"10.160.51.0/24\"\r\n  destination_prefix_list_id: \"\" => \"<computed>\"\r\n  egress_only_gateway_id:     \"\" => \"<computed>\"\r\n  gateway_id:                 \"\" => \"<computed>\"\r\n  instance_id:                \"\" => \"<computed>\"\r\n  instance_owner_id:          \"\" => \"<computed>\"\r\n  nat_gateway_id:             \"\" => \"<computed>\"\r\n  network_interface_id:       \"\" => \"<computed>\"\r\n  origin:                     \"\" => \"<computed>\"\r\n  route_table_id:             \"\" => \"rtb-0b3eb1982817dd285\"\r\n  state:                      \"\" => \"<computed>\"\r\n  vpc_peering_connection_id:  \"\" => \"pcx-0ca0ce7f4c5ff69fa\"\r\nmodule.vpc_peering.aws_route.local_private_1: Creating...\r\n  destination_cidr_block:     \"\" => \"10.11.0.0/16\"\r\n  destination_prefix_list_id: \"\" => \"<computed>\"\r\n  egress_only_gateway_id:     \"\" => \"<computed>\"\r\n  gateway_id:                 \"\" => \"<computed>\"\r\n  instance_id:                \"\" => \"<computed>\"\r\n  instance_owner_id:          \"\" => \"<computed>\"\r\n  nat_gateway_id:             \"\" => \"<computed>\"\r\n  network_interface_id:       \"\" => \"<computed>\"\r\n  origin:                     \"\" => \"<computed>\"\r\n  route_table_id:             \"\" => \"rtb-0b3eb1982817dd285\"\r\n  state:                      \"\" => \"<computed>\"\r\n  vpc_peering_connection_id:  \"\" => \"pcx-0f25e6c5233d39cde\"\r\nmodule.vpc_peering.aws_route.local_private_1: Creation complete after 0s (ID: r-rtb-0b3eb1982817dd2853529440343)\r\nmodule.vpc_peering_billing.aws_route.rt_private_1b: Creation complete after 0s (ID: r-rtb-0b3eb1982817dd2852637761367)\r\nmodule.vpc_peering_billing.aws_route.rt_private_1a: Creation complete after 0s (ID: r-rtb-0b3eb1982817dd285464353785)\r\n\r\nApply complete! Resources: 4 added, 1 changed, 0 destroyed.\r\n```\r\n", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": [{"source": "Text", "text": "As you can see bellow I apply the same code (with no changes whatsoever) twice. ", "keywords": ["change"]}, {"source": "Text", "text": "Every time I have changes to my networking, I need to run terraform twice in order to have my route tables present. ", "keywords": ["networking", "change"]}, {"source": "Text", "text": "Any light in this issue is very welcome. ``` $ terraform apply aws_vpc.vpc: Refreshing state... (ID: [REDACTED]) aws_route_table.public_route: Refreshing state... (ID: [REDACTED]) aws_route.peer_private_1: Refreshing state... (ID: [REDACTED]) aws_route.billing_private_1: Refreshing state... (ID: [REDACTED]) aws_route.billing_public_1: Refreshing state... (ID: [REDACTED]) aws_route_table_association.route_table_pub_1: Refreshing state... (ID: [REDACTED]) aws_route.rt_public_1b: Refreshing state... (ID: [REDACTED]) aws_route.local_public_1: Refreshing state... (ID: [REDACTED]) aws_route.rt_public_1a: Refreshing state... (ID: [REDACTED]) aws_route_table.private_route_1: Refreshing state... (ID: [REDACTED]) aws_route_table_association.route_table_priv_1: Refreshing state... (ID: [REDACTED]) aws_route.rt_private_1a: Refreshing state... (ID: [REDACTED]) aws_route.local_private_1: Refreshing state... (ID: [REDACTED]) aws_route.rt_private_1b: Refreshing state... (ID: [REDACTED]) An execution plan has been generated and is shown below. ", "keywords": ["bill"]}, {"source": "Text", "text": "Resource actions are indicated with the following symbols: ~ update in-place Terraform will perform the following actions: ~ module.vpc_network.aws_route_table.private_route_1 route.#: \"4\" => \"1\" route.153935322.cidr_block: \"\" => \"[REDACTED]\" route.153935322.egress_only_gateway_id: \"\" => \"\" route.153935322.gateway_id: \"\" => \"[REDACTED]\" route.153935322.instance_id: \"\" => \"\" route.153935322.ipv6_cidr_block: \"\" => \"\" route.153935322.nat_gateway_id: \"\" => \"\" route.153935322.network_interface_id: \"\" => \"\" route.153935322.vpc_peering_connection_id: \"\" => \"\" route.2392047182.cidr_block: \"[REDACTED]\" => \"\" route.2392047182.egress_only_gateway_id: \"\" => \"\" route.2392047182.gateway_id: \"\" => \"\" route.2392047182.instance_id: \"\" => \"\" route.2392047182.ipv6_cidr_block: \"\" => \"\" route.2392047182.nat_gateway_id: \"[REDACTED]\" => \"\" route.2392047182.network_interface_id: \"\" => \"\" route.2392047182.vpc_peering_connection_id: \"\" => \"\" route.2546124669.cidr_block: \"[REDACTED]\" => \"\" route.2546124669.egress_only_gateway_id: \"\" => \"\" route.2546124669.gateway_id: \"\" => \"\" route.2546124669.instance_id: \"\" => \"\" route.2546124669.ipv6_cidr_block: \"\" => \"\" route.2546124669.nat_gateway_id: \"\" => \"\" route.2546124669.network_interface_id: \"\" => \"\" route.2546124669.vpc_peering_connection_id: \"[REDACTED]\" => \"\" route.3625533711.cidr_block: \"[REDACTED]\" => \"\" route.3625533711.egress_only_gateway_id: \"\" => \"\" route.3625533711.gateway_id: \"\" => \"\" route.3625533711.instance_id: \"\" => \"\" route.3625533711.ipv6_cidr_block: \"\" => \"\" route.3625533711.nat_gateway_id: \"\" => \"\" route.3625533711.network_interface_id: \"\" => \"\" route.3625533711.vpc_peering_connection_id: \"[REDACTED]\" => \"\" route.4198773799.cidr_block: \"[REDACTED]\" => \"\" route.4198773799.egress_only_gateway_id: \"\" => \"\" route.4198773799.gateway_id: \"\" => \"\" route.4198773799.instance_id: \"\" => \"\" route.4198773799.ipv6_cidr_block: \"\" => \"\" route.4198773799.nat_gateway_id: \"\" => \"\" route.4198773799.network_interface_id: \"\" => \"\" route.4198773799.vpc_peering_connection_id: \"[REDACTED]\" => \"\" ~ module.vpc_network.aws_route_table.public_route route.#: \"4\" => \"1\" route.2546124669.cidr_block: \"[REDACTED]\" => \"\" route.2546124669.egress_only_gateway_id: \"\" => \"\" route.2546124669.gateway_id: \"\" => \"\" route.2546124669.instance_id: \"\" => \"\" route.2546124669.ipv6_cidr_block: \"\" => \"\" route.2546124669.nat_gateway_id: \"\" => \"\" route.2546124669.network_interface_id: \"\" => \"\" route.2546124669.vpc_peering_connection_id: \"[REDACTED]\" => \"\" route.3243626339.cidr_block: \"[REDACTED]\" => \"0.0.0.0/0\" route.3243626339.egress_only_gateway_id: \"\" => \"\" route.3243626339.gateway_id: \"[REDACTED]\" => \"[REDACTED]\" route.3243626339.instance_id: \"\" => \"\" route.3243626339.ipv6_cidr_block: \"\" => \"\" route.3243626339.nat_gateway_id: \"\" => \"\" route.3243626339.network_interface_id: \"\" => \"\" route.3243626339.vpc_peering_connection_id: \"\" => \"\" route.3625533711.cidr_block: \"[REDACTED]\" => \"\" route.3625533711.egress_only_gateway_id: \"\" => \"\" route.3625533711.gateway_id: \"\" => \"\" route.3625533711.instance_id: \"\" => \"\" route.3625533711.ipv6_cidr_block: \"\" => \"\" route.3625533711.nat_gateway_id: \"\" => \"\" route.3625533711.network_interface_id: \"\" => \"\" route.3625533711.vpc_peering_connection_id: \"[REDACTED]\" => \"\" route.4198773799.cidr_block: \"[REDACTED]\" => \"\" route.4198773799.egress_only_gateway_id: \"\" => \"\" route.4198773799.gateway_id: \"\" => \"\" route.4198773799.instance_id: \"\" => \"\" route.4198773799.ipv6_cidr_block: \"\" => \"\" route.4198773799.nat_gateway_id: \"\" => \"\" route.4198773799.network_interface_id: \"\" => \"\" route.4198773799.vpc_peering_connection_id: \"[REDACTED]\" => \"\" Plan: 0 to add, 2 to change, 0 to destroy. ", "keywords": ["change"]}, {"source": "Text", "text": "Enter a value: yes module.vpc_network.aws_route_table.private_route_1: Modifying... (ID: rtb-0b3eb1982817dd285) route.#: \"4\" => \"1\" route.153935322.cidr_block: \"\" => \"[REDACTED]\" route.153935322.egress_only_gateway_id: \"\" => \"\" route.153935322.gateway_id: \"\" => \"[REDACTED]\" route.153935322.instance_id: \"\" => \"\" route.153935322.ipv6_cidr_block: \"\" => \"\" route.153935322.nat_gateway_id: \"\" => \"\" route.153935322.network_interface_id: \"\" => \"\" route.153935322.vpc_peering_connection_id: \"\" => \"\" route.2392047182.cidr_block: \"[REDACTED]\" => \"\" route.2392047182.egress_only_gateway_id: \"\" => \"\" route.2392047182.gateway_id: \"\" => \"\" route.2392047182.instance_id: \"\" => \"\" route.2392047182.ipv6_cidr_block: \"\" => \"\" route.2392047182.nat_gateway_id: \"[REDACTED]\" => \"\" route.2392047182.network_interface_id: \"\" => \"\" route.2392047182.vpc_peering_connection_id: \"\" => \"\" route.2546124669.cidr_block: \"[REDACTED]\" => \"\" route.2546124669.egress_only_gateway_id: \"\" => \"\" route.2546124669.gateway_id: \"\" => \"\" route.2546124669.instance_id: \"\" => \"\" route.2546124669.ipv6_cidr_block: \"\" => \"\" route.2546124669.nat_gateway_id: \"\" => \"\" route.2546124669.network_interface_id: \"\" => \"\" route.2546124669.vpc_peering_connection_id: \"[REDACTED]\" => \"\" route.3625533711.cidr_block: \"[REDACTED]\" => \"\" route.3625533711.egress_only_gateway_id: \"\" => \"\" route.3625533711.gateway_id: \"\" => \"\" route.3625533711.instance_id: \"\" => \"\" route.3625533711.ipv6_cidr_block: \"\" => \"\" route.3625533711.nat_gateway_id: \"\" => \"\" route.3625533711.network_interface_id: \"\" => \"\" route.3625533711.vpc_peering_connection_id: \"[REDACTED]\" => \"\" route.4198773799.cidr_block: \"[REDACTED]\" => \"\" route.4198773799.egress_only_gateway_id: \"\" => \"\" route.4198773799.gateway_id: \"\" => \"\" route.4198773799.instance_id: \"\" => \"\" route.4198773799.ipv6_cidr_block: \"\" => \"\" route.4198773799.nat_gateway_id: \"\" => \"\" route.4198773799.network_interface_id: \"\" => \"\" route.4198773799.vpc_peering_connection_id: \"[REDACTED]\" => \"\" module.vpc_network.aws_route_table.private_route_2: Modifying... (ID: [REDACTED]) route.#: \"4\" => \"1\" route.153935322.cidr_block: \"\" => \"[REDACTED]\" route.153935322.egress_only_gateway_id: \"\" => \"\" route.153935322.gateway_id: \"\" => \"[REDACTED]\" route.153935322.instance_id: \"\" => \"\" route.153935322.ipv6_cidr_block: \"\" => \"\" route.153935322.nat_gateway_id: \"\" => \"\" route.153935322.network_interface_id: \"\" => \"\" route.153935322.vpc_peering_connection_id: \"\" => \"\" route.2392047182.cidr_block: \"[REDACTED]\" => \"\" route.2392047182.egress_only_gateway_id: \"\" => \"\" route.2392047182.gateway_id: \"\" => \"\" route.2392047182.instance_id: \"\" => \"\" route.2392047182.ipv6_cidr_block: \"\" => \"\" route.2392047182.nat_gateway_id: \"[REDACTED]\" => \"\" route.2392047182.network_interface_id: \"\" => \"\" route.2392047182.vpc_peering_connection_id: \"\" => \"\" route.2546124669.cidr_block: \"[REDACTED]\" => \"\" route.2546124669.egress_only_gateway_id: \"\" => \"\" route.2546124669.gateway_id: \"\" => \"\" route.2546124669.instance_id: \"\" => \"\" route.2546124669.ipv6_cidr_block: \"\" => \"\" route.2546124669.nat_gateway_id: \"\" => \"\" route.2546124669.network_interface_id: \"\" => \"\" route.2546124669.vpc_peering_connection_id: \"[REDACTED]\" => \"\" route.3625533711.cidr_block: \"[REDACTED]\" => \"\" route.3625533711.egress_only_gateway_id: \"\" => \"\" route.3625533711.gateway_id: \"\" => \"\" route.3625533711.instance_id: \"\" => \"\" route.3625533711.ipv6_cidr_block: \"\" => \"\" route.3625533711.nat_gateway_id: \"\" => \"\" route.3625533711.network_interface_id: \"\" => \"\" route.3625533711.vpc_peering_connection_id: \"[REDACTED]\" => \"\" route.4198773799.cidr_block: \"[REDACTED]\" => \"\" route.4198773799.egress_only_gateway_id: \"\" => \"\" route.4198773799.gateway_id: \"\" => \"\" route.4198773799.instance_id: \"\" => \"\" route.4198773799.ipv6_cidr_block: \"\" => \"\" route.4198773799.nat_gateway_id: \"\" => \"\" route.4198773799.network_interface_id: \"\" => \"\" route.4198773799.vpc_peering_connection_id: \"[REDACTED]\" => \"\" module.vpc_network.aws_route_table.public_route: Modifying... (ID: [REDACTED]) route.#: \"4\" => \"1\" route.2546124669.cidr_block: \"[REDACTED]\" => \"\" route.2546124669.egress_only_gateway_id: \"\" => \"\" route.2546124669.gateway_id: \"\" => \"\" route.2546124669.instance_id: \"\" => \"\" route.2546124669.ipv6_cidr_block: \"\" => \"\" route.2546124669.nat_gateway_id: \"\" => \"\" route.2546124669.network_interface_id: \"\" => \"\" route.2546124669.vpc_peering_connection_id: \"[REDACTED]\" => \"\" route.3243626339.cidr_block: \"[REDACTED]\" => \"[REDACTED]\" route.3243626339.egress_only_gateway_id: \"\" => \"\" route.3243626339.gateway_id: \"[REDACTED]\" => \"[REDACTED]\" route.3243626339.instance_id: \"\" => \"\" route.3243626339.ipv6_cidr_block: \"\" => \"\" route.3243626339.nat_gateway_id: \"\" => \"\" route.3243626339.network_interface_id: \"\" => \"\" route.3243626339.vpc_peering_connection_id: \"\" => \"\" route.3625533711.cidr_block: \"[REDACTED]\" => \"\" route.3625533711.egress_only_gateway_id: \"\" => \"\" route.3625533711.gateway_id: \"\" => \"\" route.3625533711.instance_id: \"\" => \"\" route.3625533711.ipv6_cidr_block: \"\" => \"\" route.3625533711.nat_gateway_id: \"\" => \"\" route.3625533711.network_interface_id: \"\" => \"\" route.3625533711.vpc_peering_connection_id: \"[REDACTED]\" => \"\" route.4198773799.cidr_block: \"[REDACTED]\" => \"\" route.4198773799.egress_only_gateway_id: \"\" => \"\" route.4198773799.gateway_id: \"\" => \"\" route.4198773799.instance_id: \"\" => \"\" route.4198773799.ipv6_cidr_block: \"\" => \"\" route.4198773799.nat_gateway_id: \"\" => \"\" route.4198773799.network_interface_id: \"\" => \"\" route.4198773799.vpc_peering_connection_id: \"[REDACTED]\" => \"\" module.vpc_network.aws_route_table.public_route: Modifications complete after 1s (ID: [REDACTED]) module.vpc_network.aws_route_table.private_route_1: Modifications complete after 1s (ID: [REDACTED]) module.vpc_network.aws_route_table.private_route_2: Modifications complete after 1s (ID: [REDACTED]) Apply complete! Resources: 0 added, 3 changed, 0 destroyed. ``` ``` $ terraform apply aws_route_table.public_route: Refreshing state... (ID: [REDACTED]) aws_route.peer_private_1: Refreshing state... (ID: [REDACTED]) aws_vpc_peering_connection_accepter.peer: Refreshing state... (ID: [REDACTED]) aws_route.peer_public_1: Refreshing state... (ID: r-rtb-038475178038bb20c1557265332) aws_route.billing_private_1: Refreshing state... (ID: r-rtb-1d3cd5781557265332) aws_route.billing_public_1: Refreshing state... (ID: r-rtb-1c3cd5791557265332) aws_route_table_association.route_table_pub_1: Refreshing state... (ID: rtbassoc-08d0a5e40c95517b8) aws_route.rt_public_1a: Refreshing state... (ID: r-rtb-0f711391d7fb6cbcb464353785) aws_route.rt_public_1b: Refreshing state... (ID: r-rtb-0f711391d7fb6cbcb2637761367) aws_route.local_public_1: Refreshing state... (ID: r-rtb-0f711391d7fb6cbcb3529440343) aws_route_table.private_route_1: Refreshing state... (ID: rtb-0b3eb1982817dd285) aws_route_table_association.route_table_priv_1: Refreshing state... (ID: rtbassoc-0785d652c4c01c5dc) aws_route.local_private_1: Refreshing state... (ID: r-rtb-0b3eb1982817dd2853529440343) aws_route.rt_private_1a: Refreshing state... (ID: r-rtb-0b3eb1982817dd285464353785) aws_route.rt_private_1b: Refreshing state... (ID: r-rtb-0b3eb1982817dd2852637761367) ", "keywords": ["bill", "change"]}, {"source": "Text", "text": "Resource actions are indicated with the following symbols: + create ~ update in-place Terraform will perform the following actions: ~ module.vpc_network.aws_route_table.private_route_1 route.153935322.cidr_block: \"\" => \"[REDACTED]\" route.153935322.egress_only_gateway_id: \"\" => \"\" route.153935322.gateway_id: \"\" => \"[REDACTED]\" route.153935322.instance_id: \"\" => \"\" route.153935322.ipv6_cidr_block: \"\" => \"\" route.153935322.nat_gateway_id: \"\" => \"\" route.153935322.network_interface_id: \"\" => \"\" route.153935322.vpc_peering_connection_id: \"\" => \"\" route.2392047182.cidr_block: \"[REDACTED]\" => \"\" route.2392047182.egress_only_gateway_id: \"\" => \"\" route.2392047182.gateway_id: \"\" => \"\" route.2392047182.instance_id: \"\" => \"\" route.2392047182.ipv6_cidr_block: \"\" => \"\" route.2392047182.nat_gateway_id: \"[REDACTED]\" => \"\" route.2392047182.network_interface_id: \"\" => \"\" route.2392047182.vpc_peering_connection_id: \"\" => \"\" + module.vpc_peering.aws_route.local_private_1 id: destination_cidr_block: \"[REDACTED]\" destination_prefix_list_id: egress_only_gateway_id: gateway_id: instance_id: instance_owner_id: nat_gateway_id: network_interface_id: origin: route_table_id: \"[REDACTED]\" state: vpc_peering_connection_id: \"[REDACTED]\" + module.vpc_peering.aws_route.local_public_1 id: destination_cidr_block: \"[REDACTED]\" destination_prefix_list_id: egress_only_gateway_id: gateway_id: instance_id: instance_owner_id: nat_gateway_id: network_interface_id: origin: route_table_id: \"[REDACTED]\" state: vpc_peering_connection_id: \"[REDACTED]\" + module.vpc_peering_billing.aws_route.rt_private_1a id: destination_cidr_block: \"[REDACTED]\" destination_prefix_list_id: egress_only_gateway_id: gateway_id: instance_id: instance_owner_id: nat_gateway_id: network_interface_id: origin: route_table_id: \"[REDACTED]\" state: vpc_peering_connection_id: \"[REDACTED]\" + module.vpc_peering_billing.aws_route.rt_private_1b id: destination_cidr_block: \"[REDACTED]\" destination_prefix_list_id: egress_only_gateway_id: gateway_id: instance_id: instance_owner_id: nat_gateway_id: network_interface_id: origin: route_table_id: \"[REDACTED]\" state: vpc_peering_connection_id: \"[REDACTED]\" + module.vpc_peering_billing.aws_route.rt_public_1a id: destination_cidr_block: \"[REDACTED]\" destination_prefix_list_id: egress_only_gateway_id: gateway_id: instance_id: instance_owner_id: nat_gateway_id: network_interface_id: origin: route_table_id: \"[REDACTED]\" state: vpc_peering_connection_id: \"[REDACTED]\" + module.vpc_peering_billing.aws_route.rt_public_1b id: destination_cidr_block: \"[REDACTED]\" destination_prefix_list_id: egress_only_gateway_id: gateway_id: instance_id: instance_owner_id: nat_gateway_id: network_interface_id: origin: route_table_id: \"[REDACTED]\" state: vpc_peering_connection_id: \"[REDACTED]\" Plan: 4 to add, 1 to change, 0 to destroy. ", "keywords": ["change"]}, {"source": "Text", "text": "Enter a value: module.vpc_peering_billing.aws_route.rt_public_1a: Creating... destination_cidr_block: \"\" => \"[REDACTED]\" destination_prefix_list_id: \"\" => \"\" egress_only_gateway_id: \"\" => \"\" gateway_id: \"\" => \"\" instance_id: \"\" => \"\" instance_owner_id: \"\" => \"\" nat_gateway_id: \"\" => \"\" network_interface_id: \"\" => \"\" origin: \"\" => \"\" route_table_id: \"\" => \"[REDACTED]\" state: \"\" => \"\" vpc_peering_connection_id: \"\" => \"[REDACTED]\" module.vpc_peering_billing.aws_route.rt_public_1b: Creating... destination_cidr_block: \"\" => \"[REDACTED]\" destination_prefix_list_id: \"\" => \"\" egress_only_gateway_id: \"\" => \"\" gateway_id: \"\" => \"\" instance_id: \"\" => \"\" instance_owner_id: \"\" => \"\" nat_gateway_id: \"\" => \"\" network_interface_id: \"\" => \"\" origin: \"\" => \"\" route_table_id: \"\" => \"[REDACTED]\" state: \"\" => \"\" vpc_peering_connection_id: \"\" => \"[REDACTED]\" module.vpc_network.aws_route_table.private_route_1: Modifying... (ID: [REDACTED]) route.153935322.cidr_block: \"\" => \"[REDACTED]\" route.153935322.egress_only_gateway_id: \"\" => \"\" route.153935322.gateway_id: \"\" => \"[REDACTED]\" route.153935322.instance_id: \"\" => \"\" route.153935322.ipv6_cidr_block: \"\" => \"\" route.153935322.nat_gateway_id: \"\" => \"\" route.153935322.network_interface_id: \"\" => \"\" route.153935322.vpc_peering_connection_id: \"\" => \"\" route.2392047182.cidr_block: \"[REDACTED]\" => \"\" route.2392047182.egress_only_gateway_id: \"\" => \"\" route.2392047182.gateway_id: \"\" => \"\" route.2392047182.instance_id: \"\" => \"\" route.2392047182.ipv6_cidr_block: \"\" => \"\" route.2392047182.nat_gateway_id: \"[REDACTED]\" => \"\" route.2392047182.network_interface_id: \"\" => \"\" route.2392047182.vpc_peering_connection_id: \"\" => \"\" module.vpc_peering.aws_route.local_public_1: Creating... destination_cidr_block: \"\" => \"10.11.0.0/16\" destination_prefix_list_id: \"\" => \"\" egress_only_gateway_id: \"\" => \"\" gateway_id: \"\" => \"\" instance_id: \"\" => \"\" instance_owner_id: \"\" => \"\" nat_gateway_id: \"\" => \"\" network_interface_id: \"\" => \"\" origin: \"\" => \"\" route_table_id: \"\" => \"rtb-0f711391d7fb6cbcb\" state: \"\" => \"\" vpc_peering_connection_id: \"\" => \"pcx-0f25e6c5233d39cde\" module.vpc_peering_billing.aws_route.rt_public_1b: Creation complete after 0s (ID: r-rtb-0f711391d7fb6cbcb2637761367) module.vpc_peering.aws_route.local_public_1: Creation complete after 0s (ID: r-rtb-0f711391d7fb6cbcb3529440343) module.vpc_peering_billing.aws_route.rt_public_1a: Creation complete after 0s (ID: r-rtb-0f711391d7fb6cbcb464353785) module.vpc_network.aws_route_table.private_route_1: Modifications complete after 0s (ID: rtb-0b3eb1982817dd285) module.vpc_peering_billing.aws_route.rt_private_1b: Creating... destination_cidr_block: \"\" => \"10.160.52.0/24\" destination_prefix_list_id: \"\" => \"\" egress_only_gateway_id: \"\" => \"\" gateway_id: \"\" => \"\" instance_id: \"\" => \"\" instance_owner_id: \"\" => \"\" nat_gateway_id: \"\" => \"\" network_interface_id: \"\" => \"\" origin: \"\" => \"\" route_table_id: \"\" => \"rtb-0b3eb1982817dd285\" state: \"\" => \"\" vpc_peering_connection_id: \"\" => \"pcx-0ca0ce7f4c5ff69fa\" module.vpc_peering_billing.aws_route.rt_private_1a: Creating... destination_cidr_block: \"\" => \"10.160.51.0/24\" destination_prefix_list_id: \"\" => \"\" egress_only_gateway_id: \"\" => \"\" gateway_id: \"\" => \"\" instance_id: \"\" => \"\" instance_owner_id: \"\" => \"\" nat_gateway_id: \"\" => \"\" network_interface_id: \"\" => \"\" origin: \"\" => \"\" route_table_id: \"\" => \"rtb-0b3eb1982817dd285\" state: \"\" => \"\" vpc_peering_connection_id: \"\" => \"pcx-0ca0ce7f4c5ff69fa\" module.vpc_peering.aws_route.local_private_1: Creating... destination_cidr_block: \"\" => \"10.11.0.0/16\" destination_prefix_list_id: \"\" => \"\" egress_only_gateway_id: \"\" => \"\" gateway_id: \"\" => \"\" instance_id: \"\" => \"\" instance_owner_id: \"\" => \"\" nat_gateway_id: \"\" => \"\" network_interface_id: \"\" => \"\" origin: \"\" => \"\" route_table_id: \"\" => \"rtb-0b3eb1982817dd285\" state: \"\" => \"\" vpc_peering_connection_id: \"\" => \"pcx-0f25e6c5233d39cde\" module.vpc_peering.aws_route.local_private_1: Creation complete after 0s (ID: r-rtb-0b3eb1982817dd2853529440343) module.vpc_peering_billing.aws_route.rt_private_1b: Creation complete after 0s (ID: r-rtb-0b3eb1982817dd2852637761367) module.vpc_peering_billing.aws_route.rt_private_1a: Creation complete after 0s (ID: r-rtb-0b3eb1982817dd285464353785) Apply complete! Resources: 4 added, 1 changed, 0 destroyed", "keywords": ["change"]}]}, {"Id": "191241116", "PostHistoryTypeId": "1", "PostId": "54596521", "RevisionGUID": "506f68f6-dbcb-4b82-a7c9-e5c5cf41e9d1", "CreationDate": "2019-02-08T16:25:39.947", "UserId": "3759761", "Text": "Terraform deletes route tables then adds them on second run (no changes). Bug or am I missing something?", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": [{"source": "Text", "text": "Terraform deletes route tables then adds them on second run (no changes). ", "keywords": ["change"]}]}, {"Id": "191241117", "PostHistoryTypeId": "3", "PostId": "54596521", "RevisionGUID": "506f68f6-dbcb-4b82-a7c9-e5c5cf41e9d1", "CreationDate": "2019-02-08T16:25:39.947", "UserId": "3759761", "Text": "<amazon-web-services><terraform>", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}, {"Id": "191241889", "PostHistoryTypeId": "5", "PostId": "54596521", "RevisionGUID": "5aceed9d-126a-4e34-b851-f74f41633a04", "CreationDate": "2019-02-08T16:37:26.507", "UserId": "3759761", "Comment": "deleted 2383 characters in body", "Text": "As you can see bellow I apply the same code (with no changes whatsoever) twice. The first time it deletes table routes. \r\nThe second time it re-creates them. \r\n\r\nThis behaviour is driving me mad. Every time I have changes to my networking, I need to run terraform twice in order to have my route tables present. \r\n\r\nAny light in this issue is very welcome.\r\n\r\n```\r\n$ terraform apply\r\n\r\naws_vpc.vpc: Refreshing state... (ID: [REDACTED])\r\naws_route_table.public_route: Refreshing state... (ID: [REDACTED])\r\naws_route.peer_private_1: Refreshing state... (ID: [REDACTED])\r\naws_route.billing_private_1: Refreshing state... (ID: [REDACTED])\r\naws_route.billing_public_1: Refreshing state... (ID: [REDACTED])\r\naws_route_table_association.route_table_pub_1: Refreshing state... (ID: [REDACTED])\r\naws_route.rt_public_1b: Refreshing state... (ID: [REDACTED])\r\naws_route.local_public_1: Refreshing state... (ID: [REDACTED])\r\naws_route.rt_public_1a: Refreshing state... (ID: [REDACTED])\r\naws_route_table.private_route_1: Refreshing state... (ID: [REDACTED])\r\naws_route_table_association.route_table_priv_1: Refreshing state... (ID: [REDACTED])\r\naws_route.rt_private_1a: Refreshing state... (ID: [REDACTED])\r\naws_route.local_private_1: Refreshing state... (ID: [REDACTED])\r\naws_route.rt_private_1b: Refreshing state... (ID: [REDACTED])\r\n\r\nAn execution plan has been generated and is shown below.\r\nResource actions are indicated with the following symbols:\r\n  ~ update in-place\r\n\r\nTerraform will perform the following actions:\r\n\r\n  ~ module.vpc_network.aws_route_table.private_route_1\r\n      route.#:                                    \"4\" => \"1\"\r\n      route.1.cidr_block:                 \"\" => \"[REDACTED]\"\r\n      route.1.egress_only_gateway_id:     \"\" => \"\"\r\n      route.1.gateway_id:                 \"\" => \"[REDACTED]\"\r\n      route.1.instance_id:                \"\" => \"\"\r\n      route.1.ipv6_cidr_block:            \"\" => \"\"\r\n      route.1.nat_gateway_id:             \"\" => \"\"\r\n      route.1.network_interface_id:       \"\" => \"\"\r\n      route.1.vpc_peering_connection_id:  \"\" => \"\"\r\n      route.2.cidr_block:                \"[REDACTED]\" => \"\"\r\n      route.2.egress_only_gateway_id:    \"\" => \"\"\r\n      route.2.gateway_id:                \"\" => \"\"\r\n      route.2.instance_id:               \"\" => \"\"\r\n      route.2.ipv6_cidr_block:           \"\" => \"\"\r\n      route.2.nat_gateway_id:            \"[REDACTED]\" => \"\"\r\n      route.2.network_interface_id:      \"\" => \"\"\r\n      route.2.vpc_peering_connection_id: \"\" => \"\"\r\n      route.3.cidr_block:                \"[REDACTED]\" => \"\"\r\n      route.3.egress_only_gateway_id:    \"\" => \"\"\r\n      route.3.gateway_id:                \"\" => \"\"\r\n      route.3.instance_id:               \"\" => \"\"\r\n      route.3.ipv6_cidr_block:           \"\" => \"\"\r\n      route.3.nat_gateway_id:            \"\" => \"\"\r\n      route.3.network_interface_id:      \"\" => \"\"\r\n      route.3.vpc_peering_connection_id: \"[REDACTED]\" => \"\"\r\n      route.4.cidr_block:                \"[REDACTED]\" => \"\"\r\n      route.4.egress_only_gateway_id:    \"\" => \"\"\r\n      route.4.gateway_id:                \"\" => \"\"\r\n      route.4.instance_id:               \"\" => \"\"\r\n      route.4.ipv6_cidr_block:           \"\" => \"\"\r\n      route.4.nat_gateway_id:            \"\" => \"\"\r\n      route.4.network_interface_id:      \"\" => \"\"\r\n      route.4.vpc_peering_connection_id: \"[REDACTED]\" => \"\"\r\n      route.5.cidr_block:                \"[REDACTED]\" => \"\"\r\n      route.5.egress_only_gateway_id:    \"\" => \"\"\r\n      route.5.gateway_id:                \"\" => \"\"\r\n      route.5.instance_id:               \"\" => \"\"\r\n      route.5.ipv6_cidr_block:           \"\" => \"\"\r\n      route.5.nat_gateway_id:            \"\" => \"\"\r\n      route.5.network_interface_id:      \"\" => \"\"\r\n      route.5.vpc_peering_connection_id: \"[REDACTED]\" => \"\"\r\n\r\n  ~ module.vpc_network.aws_route_table.public_route\r\n      route.#:                                    \"4\" => \"1\"\r\n      route.3.cidr_block:                \"[REDACTED]\" => \"\"\r\n      route.3.egress_only_gateway_id:    \"\" => \"\"\r\n      route.3.gateway_id:                \"\" => \"\"\r\n      route.3.instance_id:               \"\" => \"\"\r\n      route.3.ipv6_cidr_block:           \"\" => \"\"\r\n      route.3.nat_gateway_id:            \"\" => \"\"\r\n      route.3.network_interface_id:      \"\" => \"\"\r\n      route.3.vpc_peering_connection_id: \"[REDACTED]\" => \"\"\r\n      route.6.cidr_block:                \"[REDACTED]\" => \"[REDACTED]\"\r\n      route.6.egress_only_gateway_id:    \"\" => \"\"\r\n      route.6.gateway_id:                \"[REDACTED]\" => \"[REDACTED]\"\r\n      route.6.instance_id:               \"\" => \"\"\r\n      route.6.ipv6_cidr_block:           \"\" => \"\"\r\n      route.6.nat_gateway_id:            \"\" => \"\"\r\n      route.6.network_interface_id:      \"\" => \"\"\r\n      route.6.vpc_peering_connection_id: \"\" => \"\"\r\n      route.4.cidr_block:                \"[REDACTED]\" => \"\"\r\n      route.4.egress_only_gateway_id:    \"\" => \"\"\r\n      route.4.gateway_id:                \"\" => \"\"\r\n      route.4.instance_id:               \"\" => \"\"\r\n      route.4.ipv6_cidr_block:           \"\" => \"\"\r\n      route.4.nat_gateway_id:            \"\" => \"\"\r\n      route.4.network_interface_id:      \"\" => \"\"\r\n      route.4.vpc_peering_connection_id: \"[REDACTED]\" => \"\"\r\n      route.5.cidr_block:                \"[REDACTED]\" => \"\"\r\n      route.5.egress_only_gateway_id:    \"\" => \"\"\r\n      route.5.gateway_id:                \"\" => \"\"\r\n      route.5.instance_id:               \"\" => \"\"\r\n      route.5.ipv6_cidr_block:           \"\" => \"\"\r\n      route.5.nat_gateway_id:            \"\" => \"\"\r\n      route.5.network_interface_id:      \"\" => \"\"\r\n      route.5.vpc_peering_connection_id: \"[REDACTED]\" => \"\"\r\n\r\n\r\nPlan: 0 to add, 2 to change, 0 to destroy.\r\n\r\nDo you want to perform these actions?\r\n  Terraform will perform the actions described above.\r\n  Only 'yes' will be accepted to approve.\r\n\r\n  Enter a value: yes\r\n\r\nmodule.vpc_network.aws_route_table.private_route_1: Modifying... (ID: [REDACTED])\r\n  route.#:                                    \"4\" => \"1\"\r\n  route.1.cidr_block:                 \"\" => \"[REDACTED]\"\r\n  route.1.egress_only_gateway_id:     \"\" => \"\"\r\n  route.1.gateway_id:                 \"\" => \"[REDACTED]\"\r\n  route.1.instance_id:                \"\" => \"\"\r\n  route.1.ipv6_cidr_block:            \"\" => \"\"\r\n  route.1.nat_gateway_id:             \"\" => \"\"\r\n  route.1.network_interface_id:       \"\" => \"\"\r\n  route.1.vpc_peering_connection_id:  \"\" => \"\"\r\n  route.2.cidr_block:                \"[REDACTED]\" => \"\"\r\n  route.2.egress_only_gateway_id:    \"\" => \"\"\r\n  route.2.gateway_id:                \"\" => \"\"\r\n  route.2.instance_id:               \"\" => \"\"\r\n  route.2.ipv6_cidr_block:           \"\" => \"\"\r\n  route.2.nat_gateway_id:            \"[REDACTED]\" => \"\"\r\n  route.2.network_interface_id:      \"\" => \"\"\r\n  route.2.vpc_peering_connection_id: \"\" => \"\"\r\n  route.3.cidr_block:                \"[REDACTED]\" => \"\"\r\n  route.3.egress_only_gateway_id:    \"\" => \"\"\r\n  route.3.gateway_id:                \"\" => \"\"\r\n  route.3.instance_id:               \"\" => \"\"\r\n  route.3.ipv6_cidr_block:           \"\" => \"\"\r\n  route.3.nat_gateway_id:            \"\" => \"\"\r\n  route.3.network_interface_id:      \"\" => \"\"\r\n  route.3.vpc_peering_connection_id: \"[REDACTED]\" => \"\"\r\n  route.4.cidr_block:                \"[REDACTED]\" => \"\"\r\n  route.4.egress_only_gateway_id:    \"\" => \"\"\r\n  route.4.gateway_id:                \"\" => \"\"\r\n  route.4.instance_id:               \"\" => \"\"\r\n  route.4.ipv6_cidr_block:           \"\" => \"\"\r\n  route.4.nat_gateway_id:            \"\" => \"\"\r\n  route.4.network_interface_id:      \"\" => \"\"\r\n  route.4.vpc_peering_connection_id: \"[REDACTED]\" => \"\"\r\n  route.5.cidr_block:                \"[REDACTED]\" => \"\"\r\n  route.5.egress_only_gateway_id:    \"\" => \"\"\r\n  route.5.gateway_id:                \"\" => \"\"\r\n  route.5.instance_id:               \"\" => \"\"\r\n  route.5.ipv6_cidr_block:           \"\" => \"\"\r\n  route.5.nat_gateway_id:            \"\" => \"\"\r\n  route.5.network_interface_id:      \"\" => \"\"\r\n  route.5.vpc_peering_connection_id: \"[REDACTED]\" => \"\"\r\nmodule.vpc_network.aws_route_table.private_route_2: Modifying... (ID: [REDACTED])\r\n  route.#:                                    \"4\" => \"1\"\r\n  route.1.cidr_block:                 \"\" => \"[REDACTED]\"\r\n  route.1.egress_only_gateway_id:     \"\" => \"\"\r\n  route.1.gateway_id:                 \"\" => \"[REDACTED]\"\r\n  route.1.instance_id:                \"\" => \"\"\r\n  route.1.ipv6_cidr_block:            \"\" => \"\"\r\n  route.1.nat_gateway_id:             \"\" => \"\"\r\n  route.1.network_interface_id:       \"\" => \"\"\r\n  route.1.vpc_peering_connection_id:  \"\" => \"\"\r\n  route.2.cidr_block:                \"[REDACTED]\" => \"\"\r\n  route.2.egress_only_gateway_id:    \"\" => \"\"\r\n  route.2.gateway_id:                \"\" => \"\"\r\n  route.2.instance_id:               \"\" => \"\"\r\n  route.2.ipv6_cidr_block:           \"\" => \"\"\r\n  route.2.nat_gateway_id:            \"[REDACTED]\" => \"\"\r\n  route.2.network_interface_id:      \"\" => \"\"\r\n  route.2.vpc_peering_connection_id: \"\" => \"\"\r\n  route.3.cidr_block:                \"[REDACTED]\" => \"\"\r\n  route.3.egress_only_gateway_id:    \"\" => \"\"\r\n  route.3.gateway_id:                \"\" => \"\"\r\n  route.3.instance_id:               \"\" => \"\"\r\n  route.3.ipv6_cidr_block:           \"\" => \"\"\r\n  route.3.nat_gateway_id:            \"\" => \"\"\r\n  route.3.network_interface_id:      \"\" => \"\"\r\n  route.3.vpc_peering_connection_id: \"[REDACTED]\" => \"\"\r\n  route.4.cidr_block:                \"[REDACTED]\" => \"\"\r\n  route.4.egress_only_gateway_id:    \"\" => \"\"\r\n  route.4.gateway_id:                \"\" => \"\"\r\n  route.4.instance_id:               \"\" => \"\"\r\n  route.4.ipv6_cidr_block:           \"\" => \"\"\r\n  route.4.nat_gateway_id:            \"\" => \"\"\r\n  route.4.network_interface_id:      \"\" => \"\"\r\n  route.4.vpc_peering_connection_id: \"[REDACTED]\" => \"\"\r\n  route.5.cidr_block:                \"[REDACTED]\" => \"\"\r\n  route.5.egress_only_gateway_id:    \"\" => \"\"\r\n  route.5.gateway_id:                \"\" => \"\"\r\n  route.5.instance_id:               \"\" => \"\"\r\n  route.5.ipv6_cidr_block:           \"\" => \"\"\r\n  route.5.nat_gateway_id:            \"\" => \"\"\r\n  route.5.network_interface_id:      \"\" => \"\"\r\n  route.5.vpc_peering_connection_id: \"[REDACTED]\" => \"\"\r\nmodule.vpc_network.aws_route_table.public_route: Modifying... (ID: [REDACTED])\r\n  route.#:                                    \"4\" => \"1\"\r\n  route.3.cidr_block:                \"[REDACTED]\" => \"\"\r\n  route.3.egress_only_gateway_id:    \"\" => \"\"\r\n  route.3.gateway_id:                \"\" => \"\"\r\n  route.3.instance_id:               \"\" => \"\"\r\n  route.3.ipv6_cidr_block:           \"\" => \"\"\r\n  route.3.nat_gateway_id:            \"\" => \"\"\r\n  route.3.network_interface_id:      \"\" => \"\"\r\n  route.3.vpc_peering_connection_id: \"[REDACTED]\" => \"\"\r\n  route.6.cidr_block:                \"[REDACTED]\" => \"[REDACTED]\"\r\n  route.6.egress_only_gateway_id:    \"\" => \"\"\r\n  route.6.gateway_id:                \"[REDACTED]\" => \"[REDACTED]\"\r\n  route.6.instance_id:               \"\" => \"\"\r\n  route.6.ipv6_cidr_block:           \"\" => \"\"\r\n  route.6.nat_gateway_id:            \"\" => \"\"\r\n  route.6.network_interface_id:      \"\" => \"\"\r\n  route.6.vpc_peering_connection_id: \"\" => \"\"\r\n  route.4.cidr_block:                \"[REDACTED]\" => \"\"\r\n  route.4.egress_only_gateway_id:    \"\" => \"\"\r\n  route.4.gateway_id:                \"\" => \"\"\r\n  route.4.instance_id:               \"\" => \"\"\r\n  route.4.ipv6_cidr_block:           \"\" => \"\"\r\n  route.4.nat_gateway_id:            \"\" => \"\"\r\n  route.4.network_interface_id:      \"\" => \"\"\r\n  route.4.vpc_peering_connection_id: \"[REDACTED]\" => \"\"\r\n  route.5.cidr_block:                \"[REDACTED]\" => \"\"\r\n  route.5.egress_only_gateway_id:    \"\" => \"\"\r\n  route.5.gateway_id:                \"\" => \"\"\r\n  route.5.instance_id:               \"\" => \"\"\r\n  route.5.ipv6_cidr_block:           \"\" => \"\"\r\n  route.5.nat_gateway_id:            \"\" => \"\"\r\n  route.5.network_interface_id:      \"\" => \"\"\r\n  route.5.vpc_peering_connection_id: \"[REDACTED]\" => \"\"\r\nmodule.vpc_network.aws_route_table.public_route: Modifications complete after 1s (ID: [REDACTED])\r\nmodule.vpc_network.aws_route_table.private_route_1: Modifications complete after 1s (ID: [REDACTED])\r\nmodule.vpc_network.aws_route_table.private_route_2: Modifications complete after 1s (ID: [REDACTED])\r\n\r\nApply complete! Resources: 0 added, 5 changed, 0 destroyed.\r\n```\r\n```\r\n$ terraform apply\r\n\r\naws_route_table.public_route: Refreshing state... (ID: [REDACTED])\r\naws_route.peer_private_1: Refreshing state... (ID: [REDACTED])\r\naws_vpc_peering_connection_accepter.peer: Refreshing state... (ID: [REDACTED])\r\naws_route.peer_public_1: Refreshing state... (ID: [REDACTED])\r\naws_route.billing_private_1: Refreshing state... (ID: [REDACTED])\r\naws_route.billing_public_1: Refreshing state... (ID: [REDACTED])\r\naws_route_table_association.route_table_pub_1: Refreshing state... (ID: [REDACTED])\r\naws_route.rt_public_1a: Refreshing state... (ID: [REDACTED])\r\naws_route.rt_public_1b: Refreshing state... (ID: [REDACTED])\r\naws_route.local_public_1: Refreshing state... (ID: [REDACTED])\r\naws_route_table.private_route_1: Refreshing state... (ID: [REDACTED])\r\naws_route_table_association.route_table_priv_1: Refreshing state... (ID: [REDACTED])\r\naws_route.local_private_1: Refreshing state... (ID: [REDACTED])\r\naws_route.rt_private_1a: Refreshing state... (ID: [REDACTED])\r\naws_route.rt_private_1b: Refreshing state... (ID: [REDACTED])\r\n\r\nAn execution plan has been generated and is shown below.\r\nResource actions are indicated with the following symbols:\r\n  + create\r\n  ~ update in-place\r\n\r\nTerraform will perform the following actions:\r\n\r\n  ~ module.vpc_network.aws_route_table.private_route_1\r\n      route.1.cidr_block:                 \"\" => \"[REDACTED]\"\r\n      route.1.egress_only_gateway_id:     \"\" => \"\"\r\n      route.1.gateway_id:                 \"\" => \"[REDACTED]\"\r\n      route.1.instance_id:                \"\" => \"\"\r\n      route.1.ipv6_cidr_block:            \"\" => \"\"\r\n      route.1.nat_gateway_id:             \"\" => \"\"\r\n      route.1.network_interface_id:       \"\" => \"\"\r\n      route.1.vpc_peering_connection_id:  \"\" => \"\"\r\n      route.2.cidr_block:                \"[REDACTED]\" => \"\"\r\n      route.2.egress_only_gateway_id:    \"\" => \"\"\r\n      route.2.gateway_id:                \"\" => \"\"\r\n      route.2.instance_id:               \"\" => \"\"\r\n      route.2.ipv6_cidr_block:           \"\" => \"\"\r\n      route.2.nat_gateway_id:            \"[REDACTED]\" => \"\"\r\n      route.2.network_interface_id:      \"\" => \"\"\r\n      route.2.vpc_peering_connection_id: \"\" => \"\"\r\n\r\n  + module.vpc_peering.aws_route.local_private_1\r\n      id:                                         <computed>\r\n      destination_cidr_block:                     \"[REDACTED]\"\r\n      destination_prefix_list_id:                 <computed>\r\n      egress_only_gateway_id:                     <computed>\r\n      gateway_id:                                 <computed>\r\n      instance_id:                                <computed>\r\n      instance_owner_id:                          <computed>\r\n      nat_gateway_id:                             <computed>\r\n      network_interface_id:                       <computed>\r\n      origin:                                     <computed>\r\n      route_table_id:                             \"[REDACTED]\"\r\n      state:                                      <computed>\r\n      vpc_peering_connection_id:                  \"[REDACTED]\"\r\n\r\n  + module.vpc_peering.aws_route.local_public_1\r\n      id:                                         <computed>\r\n      destination_cidr_block:                     \"[REDACTED]\"\r\n      destination_prefix_list_id:                 <computed>\r\n      egress_only_gateway_id:                     <computed>\r\n      gateway_id:                                 <computed>\r\n      instance_id:                                <computed>\r\n      instance_owner_id:                          <computed>\r\n      nat_gateway_id:                             <computed>\r\n      network_interface_id:                       <computed>\r\n      origin:                                     <computed>\r\n      route_table_id:                             \"[REDACTED]\"\r\n      state:                                      <computed>\r\n      vpc_peering_connection_id:                  \"[REDACTED]\"\r\n\r\n  + module.vpc_peering_billing.aws_route.rt_private_1a\r\n      id:                                         <computed>\r\n      destination_cidr_block:                     \"[REDACTED]\"\r\n      destination_prefix_list_id:                 <computed>\r\n      egress_only_gateway_id:                     <computed>\r\n      gateway_id:                                 <computed>\r\n      instance_id:                                <computed>\r\n      instance_owner_id:                          <computed>\r\n      nat_gateway_id:                             <computed>\r\n      network_interface_id:                       <computed>\r\n      origin:                                     <computed>\r\n      route_table_id:                             \"[REDACTED]\"\r\n      state:                                      <computed>\r\n      vpc_peering_connection_id:                  \"[REDACTED]\"\r\n\r\n  + module.vpc_peering_billing.aws_route.rt_private_1b\r\n      id:                                         <computed>\r\n      destination_cidr_block:                     \"[REDACTED]\"\r\n      destination_prefix_list_id:                 <computed>\r\n      egress_only_gateway_id:                     <computed>\r\n      gateway_id:                                 <computed>\r\n      instance_id:                                <computed>\r\n      instance_owner_id:                          <computed>\r\n      nat_gateway_id:                             <computed>\r\n      network_interface_id:                       <computed>\r\n      origin:                                     <computed>\r\n      route_table_id:                             \"[REDACTED]\"\r\n      state:                                      <computed>\r\n      vpc_peering_connection_id:                  \"[REDACTED]\"\r\n\r\n  + module.vpc_peering_billing.aws_route.rt_public_1a\r\n      id:                                         <computed>\r\n      destination_cidr_block:                     \"[REDACTED]\"\r\n      destination_prefix_list_id:                 <computed>\r\n      egress_only_gateway_id:                     <computed>\r\n      gateway_id:                                 <computed>\r\n      instance_id:                                <computed>\r\n      instance_owner_id:                          <computed>\r\n      nat_gateway_id:                             <computed>\r\n      network_interface_id:                       <computed>\r\n      origin:                                     <computed>\r\n      route_table_id:                             \"[REDACTED]\"\r\n      state:                                      <computed>\r\n      vpc_peering_connection_id:                  \"[REDACTED]\"\r\n\r\n  + module.vpc_peering_billing.aws_route.rt_public_1b\r\n      id:                                         <computed>\r\n      destination_cidr_block:                     \"[REDACTED]\"\r\n      destination_prefix_list_id:                 <computed>\r\n      egress_only_gateway_id:                     <computed>\r\n      gateway_id:                                 <computed>\r\n      instance_id:                                <computed>\r\n      instance_owner_id:                          <computed>\r\n      nat_gateway_id:                             <computed>\r\n      network_interface_id:                       <computed>\r\n      origin:                                     <computed>\r\n      route_table_id:                             \"[REDACTED]\"\r\n      state:                                      <computed>\r\n      vpc_peering_connection_id:                  \"[REDACTED]\"\r\n\r\n\r\nPlan: 4 to add, 1 to change, 0 to destroy.\r\n\r\nDo you want to perform these actions?\r\n  Terraform will perform the actions described above.\r\n  Only 'yes' will be accepted to approve.\r\n\r\n  Enter a value:\r\nmodule.vpc_peering_billing.aws_route.rt_public_1a: Creating...\r\n  destination_cidr_block:     \"\" => \"[REDACTED]\"\r\n  destination_prefix_list_id: \"\" => \"<computed>\"\r\n  egress_only_gateway_id:     \"\" => \"<computed>\"\r\n  gateway_id:                 \"\" => \"<computed>\"\r\n  instance_id:                \"\" => \"<computed>\"\r\n  instance_owner_id:          \"\" => \"<computed>\"\r\n  nat_gateway_id:             \"\" => \"<computed>\"\r\n  network_interface_id:       \"\" => \"<computed>\"\r\n  origin:                     \"\" => \"<computed>\"\r\n  route_table_id:             \"\" => \"[REDACTED]\"\r\n  state:                      \"\" => \"<computed>\"\r\n  vpc_peering_connection_id:  \"\" => \"[REDACTED]\"\r\nmodule.vpc_peering_billing.aws_route.rt_public_1b: Creating...\r\n  destination_cidr_block:     \"\" => \"[REDACTED]\"\r\n  destination_prefix_list_id: \"\" => \"<computed>\"\r\n  egress_only_gateway_id:     \"\" => \"<computed>\"\r\n  gateway_id:                 \"\" => \"<computed>\"\r\n  instance_id:                \"\" => \"<computed>\"\r\n  instance_owner_id:          \"\" => \"<computed>\"\r\n  nat_gateway_id:             \"\" => \"<computed>\"\r\n  network_interface_id:       \"\" => \"<computed>\"\r\n  origin:                     \"\" => \"<computed>\"\r\n  route_table_id:             \"\" => \"[REDACTED]\"\r\n  state:                      \"\" => \"<computed>\"\r\n  vpc_peering_connection_id:  \"\" => \"[REDACTED]\"\r\nmodule.vpc_network.aws_route_table.private_route_1: Modifying... (ID: [REDACTED])\r\n  route.1.cidr_block:                 \"\" => \"[REDACTED]\"\r\n  route.1.egress_only_gateway_id:     \"\" => \"\"\r\n  route.1.gateway_id:                 \"\" => \"[REDACTED]\"\r\n  route.1.instance_id:                \"\" => \"\"\r\n  route.1.ipv6_cidr_block:            \"\" => \"\"\r\n  route.1.nat_gateway_id:             \"\" => \"\"\r\n  route.1.network_interface_id:       \"\" => \"\"\r\n  route.1.vpc_peering_connection_id:  \"\" => \"\"\r\n  route.2.cidr_block:                \"[REDACTED]\" => \"\"\r\n  route.2.egress_only_gateway_id:    \"\" => \"\"\r\n  route.2.gateway_id:                \"\" => \"\"\r\n  route.2.instance_id:               \"\" => \"\"\r\n  route.2.ipv6_cidr_block:           \"\" => \"\"\r\n  route.2.nat_gateway_id:            \"[REDACTED]\" => \"\"\r\n  route.2.network_interface_id:      \"\" => \"\"\r\n  route.2.vpc_peering_connection_id: \"\" => \"\"\r\nmodule.vpc_peering.aws_route.local_public_1: Creating...\r\n  destination_cidr_block:     \"\" => \"[REDACTED]\"\r\n  destination_prefix_list_id: \"\" => \"<computed>\"\r\n  egress_only_gateway_id:     \"\" => \"<computed>\"\r\n  gateway_id:                 \"\" => \"<computed>\"\r\n  instance_id:                \"\" => \"<computed>\"\r\n  instance_owner_id:          \"\" => \"<computed>\"\r\n  nat_gateway_id:             \"\" => \"<computed>\"\r\n  network_interface_id:       \"\" => \"<computed>\"\r\n  origin:                     \"\" => \"<computed>\"\r\n  route_table_id:             \"\" => \"[REDACTED]\"\r\n  state:                      \"\" => \"<computed>\"\r\n  vpc_peering_connection_id:  \"\" => \"[REDACTED]\"\r\nmodule.vpc_peering_billing.aws_route.rt_public_1b: Creation complete after 0s (ID: [REDACTED])\r\nmodule.vpc_peering.aws_route.local_public_1: Creation complete after 0s (ID: [REDACTED])\r\nmodule.vpc_peering_billing.aws_route.rt_public_1a: Creation complete after 0s (ID: [REDACTED])\r\nmodule.vpc_network.aws_route_table.private_route_1: Modifications complete after 0s (ID: [REDACTED])\r\nmodule.vpc_peering_billing.aws_route.rt_private_1b: Creating...\r\n  destination_cidr_block:     \"\" => \"[REDACTED]\"\r\n  destination_prefix_list_id: \"\" => \"<computed>\"\r\n  egress_only_gateway_id:     \"\" => \"<computed>\"\r\n  gateway_id:                 \"\" => \"<computed>\"\r\n  instance_id:                \"\" => \"<computed>\"\r\n  instance_owner_id:          \"\" => \"<computed>\"\r\n  nat_gateway_id:             \"\" => \"<computed>\"\r\n  network_interface_id:       \"\" => \"<computed>\"\r\n  origin:                     \"\" => \"<computed>\"\r\n  route_table_id:             \"\" => \"[REDACTED]\"\r\n  state:                      \"\" => \"<computed>\"\r\n  vpc_peering_connection_id:  \"\" => \"[REDACTED]\"\r\nmodule.vpc_peering_billing.aws_route.rt_private_1a: Creating...\r\n  destination_cidr_block:     \"\" => \"[REDACTED]\"\r\n  destination_prefix_list_id: \"\" => \"<computed>\"\r\n  egress_only_gateway_id:     \"\" => \"<computed>\"\r\n  gateway_id:                 \"\" => \"<computed>\"\r\n  instance_id:                \"\" => \"<computed>\"\r\n  instance_owner_id:          \"\" => \"<computed>\"\r\n  nat_gateway_id:             \"\" => \"<computed>\"\r\n  network_interface_id:       \"\" => \"<computed>\"\r\n  origin:                     \"\" => \"<computed>\"\r\n  route_table_id:             \"\" => \"[REDACTED]\"\r\n  state:                      \"\" => \"<computed>\"\r\n  vpc_peering_connection_id:  \"\" => \"[REDACTED]\"\r\nmodule.vpc_peering.aws_route.local_private_1: Creating...\r\n  destination_cidr_block:     \"\" => \"[REDACTED]\"\r\n  destination_prefix_list_id: \"\" => \"<computed>\"\r\n  egress_only_gateway_id:     \"\" => \"<computed>\"\r\n  gateway_id:                 \"\" => \"<computed>\"\r\n  instance_id:                \"\" => \"<computed>\"\r\n  instance_owner_id:          \"\" => \"<computed>\"\r\n  nat_gateway_id:             \"\" => \"<computed>\"\r\n  network_interface_id:       \"\" => \"<computed>\"\r\n  origin:                     \"\" => \"<computed>\"\r\n  route_table_id:             \"\" => \"[REDACTED]\"\r\n  state:                      \"\" => \"<computed>\"\r\n  vpc_peering_connection_id:  \"\" => \"[REDACTED]\"\r\nmodule.vpc_peering.aws_route.local_private_1: Creation complete after 0s (ID: [REDACTED])\r\nmodule.vpc_peering_billing.aws_route.rt_private_1b: Creation complete after 0s (ID: [REDACTED])\r\nmodule.vpc_peering_billing.aws_route.rt_private_1a: Creation complete after 0s (ID: [REDACTED])\r\n\r\nApply complete! Resources: 4 added, 1 changed, 0 destroyed.\r\n```", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": [{"source": "Text", "text": "As you can see bellow I apply the same code (with no changes whatsoever) twice. ", "keywords": ["change"]}, {"source": "Text", "text": "Every time I have changes to my networking, I need to run terraform twice in order to have my route tables present. ", "keywords": ["networking", "change"]}, {"source": "Text", "text": "Any light in this issue is very welcome. ``` $ terraform apply aws_vpc.vpc: Refreshing state... (ID: [REDACTED]) aws_route_table.public_route: Refreshing state... (ID: [REDACTED]) aws_route.peer_private_1: Refreshing state... (ID: [REDACTED]) aws_route.billing_private_1: Refreshing state... (ID: [REDACTED]) aws_route.billing_public_1: Refreshing state... (ID: [REDACTED]) aws_route_table_association.route_table_pub_1: Refreshing state... (ID: [REDACTED]) aws_route.rt_public_1b: Refreshing state... (ID: [REDACTED]) aws_route.local_public_1: Refreshing state... (ID: [REDACTED]) aws_route.rt_public_1a: Refreshing state... (ID: [REDACTED]) aws_route_table.private_route_1: Refreshing state... (ID: [REDACTED]) aws_route_table_association.route_table_priv_1: Refreshing state... (ID: [REDACTED]) aws_route.rt_private_1a: Refreshing state... (ID: [REDACTED]) aws_route.local_private_1: Refreshing state... (ID: [REDACTED]) aws_route.rt_private_1b: Refreshing state... (ID: [REDACTED]) An execution plan has been generated and is shown below. ", "keywords": ["bill"]}, {"source": "Text", "text": "Resource actions are indicated with the following symbols: ~ update in-place Terraform will perform the following actions: ~ module.vpc_network.aws_route_table.private_route_1 route.#: \"4\" => \"1\" route.1.cidr_block: \"\" => \"[REDACTED]\" route.1.egress_only_gateway_id: \"\" => \"\" route.1.gateway_id: \"\" => \"[REDACTED]\" route.1.instance_id: \"\" => \"\" route.1.ipv6_cidr_block: \"\" => \"\" route.1.nat_gateway_id: \"\" => \"\" route.1.network_interface_id: \"\" => \"\" route.1.vpc_peering_connection_id: \"\" => \"\" route.2.cidr_block: \"[REDACTED]\" => \"\" route.2.egress_only_gateway_id: \"\" => \"\" route.2.gateway_id: \"\" => \"\" route.2.instance_id: \"\" => \"\" route.2.ipv6_cidr_block: \"\" => \"\" route.2.nat_gateway_id: \"[REDACTED]\" => \"\" route.2.network_interface_id: \"\" => \"\" route.2.vpc_peering_connection_id: \"\" => \"\" route.3.cidr_block: \"[REDACTED]\" => \"\" route.3.egress_only_gateway_id: \"\" => \"\" route.3.gateway_id: \"\" => \"\" route.3.instance_id: \"\" => \"\" route.3.ipv6_cidr_block: \"\" => \"\" route.3.nat_gateway_id: \"\" => \"\" route.3.network_interface_id: \"\" => \"\" route.3.vpc_peering_connection_id: \"[REDACTED]\" => \"\" route.4.cidr_block: \"[REDACTED]\" => \"\" route.4.egress_only_gateway_id: \"\" => \"\" route.4.gateway_id: \"\" => \"\" route.4.instance_id: \"\" => \"\" route.4.ipv6_cidr_block: \"\" => \"\" route.4.nat_gateway_id: \"\" => \"\" route.4.network_interface_id: \"\" => \"\" route.4.vpc_peering_connection_id: \"[REDACTED]\" => \"\" route.5.cidr_block: \"[REDACTED]\" => \"\" route.5.egress_only_gateway_id: \"\" => \"\" route.5.gateway_id: \"\" => \"\" route.5.instance_id: \"\" => \"\" route.5.ipv6_cidr_block: \"\" => \"\" route.5.nat_gateway_id: \"\" => \"\" route.5.network_interface_id: \"\" => \"\" route.5.vpc_peering_connection_id: \"[REDACTED]\" => \"\" ~ module.vpc_network.aws_route_table.public_route route.#: \"4\" => \"1\" route.3.cidr_block: \"[REDACTED]\" => \"\" route.3.egress_only_gateway_id: \"\" => \"\" route.3.gateway_id: \"\" => \"\" route.3.instance_id: \"\" => \"\" route.3.ipv6_cidr_block: \"\" => \"\" route.3.nat_gateway_id: \"\" => \"\" route.3.network_interface_id: \"\" => \"\" route.3.vpc_peering_connection_id: \"[REDACTED]\" => \"\" route.6.cidr_block: \"[REDACTED]\" => \"[REDACTED]\" route.6.egress_only_gateway_id: \"\" => \"\" route.6.gateway_id: \"[REDACTED]\" => \"[REDACTED]\" route.6.instance_id: \"\" => \"\" route.6.ipv6_cidr_block: \"\" => \"\" route.6.nat_gateway_id: \"\" => \"\" route.6.network_interface_id: \"\" => \"\" route.6.vpc_peering_connection_id: \"\" => \"\" route.4.cidr_block: \"[REDACTED]\" => \"\" route.4.egress_only_gateway_id: \"\" => \"\" route.4.gateway_id: \"\" => \"\" route.4.instance_id: \"\" => \"\" route.4.ipv6_cidr_block: \"\" => \"\" route.4.nat_gateway_id: \"\" => \"\" route.4.network_interface_id: \"\" => \"\" route.4.vpc_peering_connection_id: \"[REDACTED]\" => \"\" route.5.cidr_block: \"[REDACTED]\" => \"\" route.5.egress_only_gateway_id: \"\" => \"\" route.5.gateway_id: \"\" => \"\" route.5.instance_id: \"\" => \"\" route.5.ipv6_cidr_block: \"\" => \"\" route.5.nat_gateway_id: \"\" => \"\" route.5.network_interface_id: \"\" => \"\" route.5.vpc_peering_connection_id: \"[REDACTED]\" => \"\" Plan: 0 to add, 2 to change, 0 to destroy. ", "keywords": ["change"]}, {"source": "Text", "text": "Enter a value: yes module.vpc_network.aws_route_table.private_route_1: Modifying... (ID: [REDACTED]) route.#: \"4\" => \"1\" route.1.cidr_block: \"\" => \"[REDACTED]\" route.1.egress_only_gateway_id: \"\" => \"\" route.1.gateway_id: \"\" => \"[REDACTED]\" route.1.instance_id: \"\" => \"\" route.1.ipv6_cidr_block: \"\" => \"\" route.1.nat_gateway_id: \"\" => \"\" route.1.network_interface_id: \"\" => \"\" route.1.vpc_peering_connection_id: \"\" => \"\" route.2.cidr_block: \"[REDACTED]\" => \"\" route.2.egress_only_gateway_id: \"\" => \"\" route.2.gateway_id: \"\" => \"\" route.2.instance_id: \"\" => \"\" route.2.ipv6_cidr_block: \"\" => \"\" route.2.nat_gateway_id: \"[REDACTED]\" => \"\" route.2.network_interface_id: \"\" => \"\" route.2.vpc_peering_connection_id: \"\" => \"\" route.3.cidr_block: \"[REDACTED]\" => \"\" route.3.egress_only_gateway_id: \"\" => \"\" route.3.gateway_id: \"\" => \"\" route.3.instance_id: \"\" => \"\" route.3.ipv6_cidr_block: \"\" => \"\" route.3.nat_gateway_id: \"\" => \"\" route.3.network_interface_id: \"\" => \"\" route.3.vpc_peering_connection_id: \"[REDACTED]\" => \"\" route.4.cidr_block: \"[REDACTED]\" => \"\" route.4.egress_only_gateway_id: \"\" => \"\" route.4.gateway_id: \"\" => \"\" route.4.instance_id: \"\" => \"\" route.4.ipv6_cidr_block: \"\" => \"\" route.4.nat_gateway_id: \"\" => \"\" route.4.network_interface_id: \"\" => \"\" route.4.vpc_peering_connection_id: \"[REDACTED]\" => \"\" route.5.cidr_block: \"[REDACTED]\" => \"\" route.5.egress_only_gateway_id: \"\" => \"\" route.5.gateway_id: \"\" => \"\" route.5.instance_id: \"\" => \"\" route.5.ipv6_cidr_block: \"\" => \"\" route.5.nat_gateway_id: \"\" => \"\" route.5.network_interface_id: \"\" => \"\" route.5.vpc_peering_connection_id: \"[REDACTED]\" => \"\" module.vpc_network.aws_route_table.private_route_2: Modifying... (ID: [REDACTED]) route.#: \"4\" => \"1\" route.1.cidr_block: \"\" => \"[REDACTED]\" route.1.egress_only_gateway_id: \"\" => \"\" route.1.gateway_id: \"\" => \"[REDACTED]\" route.1.instance_id: \"\" => \"\" route.1.ipv6_cidr_block: \"\" => \"\" route.1.nat_gateway_id: \"\" => \"\" route.1.network_interface_id: \"\" => \"\" route.1.vpc_peering_connection_id: \"\" => \"\" route.2.cidr_block: \"[REDACTED]\" => \"\" route.2.egress_only_gateway_id: \"\" => \"\" route.2.gateway_id: \"\" => \"\" route.2.instance_id: \"\" => \"\" route.2.ipv6_cidr_block: \"\" => \"\" route.2.nat_gateway_id: \"[REDACTED]\" => \"\" route.2.network_interface_id: \"\" => \"\" route.2.vpc_peering_connection_id: \"\" => \"\" route.3.cidr_block: \"[REDACTED]\" => \"\" route.3.egress_only_gateway_id: \"\" => \"\" route.3.gateway_id: \"\" => \"\" route.3.instance_id: \"\" => \"\" route.3.ipv6_cidr_block: \"\" => \"\" route.3.nat_gateway_id: \"\" => \"\" route.3.network_interface_id: \"\" => \"\" route.3.vpc_peering_connection_id: \"[REDACTED]\" => \"\" route.4.cidr_block: \"[REDACTED]\" => \"\" route.4.egress_only_gateway_id: \"\" => \"\" route.4.gateway_id: \"\" => \"\" route.4.instance_id: \"\" => \"\" route.4.ipv6_cidr_block: \"\" => \"\" route.4.nat_gateway_id: \"\" => \"\" route.4.network_interface_id: \"\" => \"\" route.4.vpc_peering_connection_id: \"[REDACTED]\" => \"\" route.5.cidr_block: \"[REDACTED]\" => \"\" route.5.egress_only_gateway_id: \"\" => \"\" route.5.gateway_id: \"\" => \"\" route.5.instance_id: \"\" => \"\" route.5.ipv6_cidr_block: \"\" => \"\" route.5.nat_gateway_id: \"\" => \"\" route.5.network_interface_id: \"\" => \"\" route.5.vpc_peering_connection_id: \"[REDACTED]\" => \"\" module.vpc_network.aws_route_table.public_route: Modifying... (ID: [REDACTED]) route.#: \"4\" => \"1\" route.3.cidr_block: \"[REDACTED]\" => \"\" route.3.egress_only_gateway_id: \"\" => \"\" route.3.gateway_id: \"\" => \"\" route.3.instance_id: \"\" => \"\" route.3.ipv6_cidr_block: \"\" => \"\" route.3.nat_gateway_id: \"\" => \"\" route.3.network_interface_id: \"\" => \"\" route.3.vpc_peering_connection_id: \"[REDACTED]\" => \"\" route.6.cidr_block: \"[REDACTED]\" => \"[REDACTED]\" route.6.egress_only_gateway_id: \"\" => \"\" route.6.gateway_id: \"[REDACTED]\" => \"[REDACTED]\" route.6.instance_id: \"\" => \"\" route.6.ipv6_cidr_block: \"\" => \"\" route.6.nat_gateway_id: \"\" => \"\" route.6.network_interface_id: \"\" => \"\" route.6.vpc_peering_connection_id: \"\" => \"\" route.4.cidr_block: \"[REDACTED]\" => \"\" route.4.egress_only_gateway_id: \"\" => \"\" route.4.gateway_id: \"\" => \"\" route.4.instance_id: \"\" => \"\" route.4.ipv6_cidr_block: \"\" => \"\" route.4.nat_gateway_id: \"\" => \"\" route.4.network_interface_id: \"\" => \"\" route.4.vpc_peering_connection_id: \"[REDACTED]\" => \"\" route.5.cidr_block: \"[REDACTED]\" => \"\" route.5.egress_only_gateway_id: \"\" => \"\" route.5.gateway_id: \"\" => \"\" route.5.instance_id: \"\" => \"\" route.5.ipv6_cidr_block: \"\" => \"\" route.5.nat_gateway_id: \"\" => \"\" route.5.network_interface_id: \"\" => \"\" route.5.vpc_peering_connection_id: \"[REDACTED]\" => \"\" module.vpc_network.aws_route_table.public_route: Modifications complete after 1s (ID: [REDACTED]) module.vpc_network.aws_route_table.private_route_1: Modifications complete after 1s (ID: [REDACTED]) module.vpc_network.aws_route_table.private_route_2: Modifications complete after 1s (ID: [REDACTED]) Apply complete! Resources: 0 added, 5 changed, 0 destroyed. ``` ``` $ terraform apply aws_route_table.public_route: Refreshing state... (ID: [REDACTED]) aws_route.peer_private_1: Refreshing state... (ID: [REDACTED]) aws_vpc_peering_connection_accepter.peer: Refreshing state... (ID: [REDACTED]) aws_route.peer_public_1: Refreshing state... (ID: [REDACTED]) aws_route.billing_private_1: Refreshing state... (ID: [REDACTED]) aws_route.billing_public_1: Refreshing state... (ID: [REDACTED]) aws_route_table_association.route_table_pub_1: Refreshing state... (ID: [REDACTED]) aws_route.rt_public_1a: Refreshing state... (ID: [REDACTED]) aws_route.rt_public_1b: Refreshing state... (ID: [REDACTED]) aws_route.local_public_1: Refreshing state... (ID: [REDACTED]) aws_route_table.private_route_1: Refreshing state... (ID: [REDACTED]) aws_route_table_association.route_table_priv_1: Refreshing state... (ID: [REDACTED]) aws_route.local_private_1: Refreshing state... (ID: [REDACTED]) aws_route.rt_private_1a: Refreshing state... (ID: [REDACTED]) aws_route.rt_private_1b: Refreshing state... (ID: [REDACTED]) An execution plan has been generated and is shown below. ", "keywords": ["bill", "change"]}, {"source": "Text", "text": "Resource actions are indicated with the following symbols: + create ~ update in-place Terraform will perform the following actions: ~ module.vpc_network.aws_route_table.private_route_1 route.1.cidr_block: \"\" => \"[REDACTED]\" route.1.egress_only_gateway_id: \"\" => \"\" route.1.gateway_id: \"\" => \"[REDACTED]\" route.1.instance_id: \"\" => \"\" route.1.ipv6_cidr_block: \"\" => \"\" route.1.nat_gateway_id: \"\" => \"\" route.1.network_interface_id: \"\" => \"\" route.1.vpc_peering_connection_id: \"\" => \"\" route.2.cidr_block: \"[REDACTED]\" => \"\" route.2.egress_only_gateway_id: \"\" => \"\" route.2.gateway_id: \"\" => \"\" route.2.instance_id: \"\" => \"\" route.2.ipv6_cidr_block: \"\" => \"\" route.2.nat_gateway_id: \"[REDACTED]\" => \"\" route.2.network_interface_id: \"\" => \"\" route.2.vpc_peering_connection_id: \"\" => \"\" + module.vpc_peering.aws_route.local_private_1 id: destination_cidr_block: \"[REDACTED]\" destination_prefix_list_id: egress_only_gateway_id: gateway_id: instance_id: instance_owner_id: nat_gateway_id: network_interface_id: origin: route_table_id: \"[REDACTED]\" state: vpc_peering_connection_id: \"[REDACTED]\" + module.vpc_peering.aws_route.local_public_1 id: destination_cidr_block: \"[REDACTED]\" destination_prefix_list_id: egress_only_gateway_id: gateway_id: instance_id: instance_owner_id: nat_gateway_id: network_interface_id: origin: route_table_id: \"[REDACTED]\" state: vpc_peering_connection_id: \"[REDACTED]\" + module.vpc_peering_billing.aws_route.rt_private_1a id: destination_cidr_block: \"[REDACTED]\" destination_prefix_list_id: egress_only_gateway_id: gateway_id: instance_id: instance_owner_id: nat_gateway_id: network_interface_id: origin: route_table_id: \"[REDACTED]\" state: vpc_peering_connection_id: \"[REDACTED]\" + module.vpc_peering_billing.aws_route.rt_private_1b id: destination_cidr_block: \"[REDACTED]\" destination_prefix_list_id: egress_only_gateway_id: gateway_id: instance_id: instance_owner_id: nat_gateway_id: network_interface_id: origin: route_table_id: \"[REDACTED]\" state: vpc_peering_connection_id: \"[REDACTED]\" + module.vpc_peering_billing.aws_route.rt_public_1a id: destination_cidr_block: \"[REDACTED]\" destination_prefix_list_id: egress_only_gateway_id: gateway_id: instance_id: instance_owner_id: nat_gateway_id: network_interface_id: origin: route_table_id: \"[REDACTED]\" state: vpc_peering_connection_id: \"[REDACTED]\" + module.vpc_peering_billing.aws_route.rt_public_1b id: destination_cidr_block: \"[REDACTED]\" destination_prefix_list_id: egress_only_gateway_id: gateway_id: instance_id: instance_owner_id: nat_gateway_id: network_interface_id: origin: route_table_id: \"[REDACTED]\" state: vpc_peering_connection_id: \"[REDACTED]\" Plan: 4 to add, 1 to change, 0 to destroy. ", "keywords": ["change"]}, {"source": "Text", "text": "Enter a value: module.vpc_peering_billing.aws_route.rt_public_1a: Creating... destination_cidr_block: \"\" => \"[REDACTED]\" destination_prefix_list_id: \"\" => \"\" egress_only_gateway_id: \"\" => \"\" gateway_id: \"\" => \"\" instance_id: \"\" => \"\" instance_owner_id: \"\" => \"\" nat_gateway_id: \"\" => \"\" network_interface_id: \"\" => \"\" origin: \"\" => \"\" route_table_id: \"\" => \"[REDACTED]\" state: \"\" => \"\" vpc_peering_connection_id: \"\" => \"[REDACTED]\" module.vpc_peering_billing.aws_route.rt_public_1b: Creating... destination_cidr_block: \"\" => \"[REDACTED]\" destination_prefix_list_id: \"\" => \"\" egress_only_gateway_id: \"\" => \"\" gateway_id: \"\" => \"\" instance_id: \"\" => \"\" instance_owner_id: \"\" => \"\" nat_gateway_id: \"\" => \"\" network_interface_id: \"\" => \"\" origin: \"\" => \"\" route_table_id: \"\" => \"[REDACTED]\" state: \"\" => \"\" vpc_peering_connection_id: \"\" => \"[REDACTED]\" module.vpc_network.aws_route_table.private_route_1: Modifying... (ID: [REDACTED]) route.1.cidr_block: \"\" => \"[REDACTED]\" route.1.egress_only_gateway_id: \"\" => \"\" route.1.gateway_id: \"\" => \"[REDACTED]\" route.1.instance_id: \"\" => \"\" route.1.ipv6_cidr_block: \"\" => \"\" route.1.nat_gateway_id: \"\" => \"\" route.1.network_interface_id: \"\" => \"\" route.1.vpc_peering_connection_id: \"\" => \"\" route.2.cidr_block: \"[REDACTED]\" => \"\" route.2.egress_only_gateway_id: \"\" => \"\" route.2.gateway_id: \"\" => \"\" route.2.instance_id: \"\" => \"\" route.2.ipv6_cidr_block: \"\" => \"\" route.2.nat_gateway_id: \"[REDACTED]\" => \"\" route.2.network_interface_id: \"\" => \"\" route.2.vpc_peering_connection_id: \"\" => \"\" module.vpc_peering.aws_route.local_public_1: Creating... destination_cidr_block: \"\" => \"[REDACTED]\" destination_prefix_list_id: \"\" => \"\" egress_only_gateway_id: \"\" => \"\" gateway_id: \"\" => \"\" instance_id: \"\" => \"\" instance_owner_id: \"\" => \"\" nat_gateway_id: \"\" => \"\" network_interface_id: \"\" => \"\" origin: \"\" => \"\" route_table_id: \"\" => \"[REDACTED]\" state: \"\" => \"\" vpc_peering_connection_id: \"\" => \"[REDACTED]\" module.vpc_peering_billing.aws_route.rt_public_1b: Creation complete after 0s (ID: [REDACTED]) module.vpc_peering.aws_route.local_public_1: Creation complete after 0s (ID: [REDACTED]) module.vpc_peering_billing.aws_route.rt_public_1a: Creation complete after 0s (ID: [REDACTED]) module.vpc_network.aws_route_table.private_route_1: Modifications complete after 0s (ID: [REDACTED]) module.vpc_peering_billing.aws_route.rt_private_1b: Creating... destination_cidr_block: \"\" => \"[REDACTED]\" destination_prefix_list_id: \"\" => \"\" egress_only_gateway_id: \"\" => \"\" gateway_id: \"\" => \"\" instance_id: \"\" => \"\" instance_owner_id: \"\" => \"\" nat_gateway_id: \"\" => \"\" network_interface_id: \"\" => \"\" origin: \"\" => \"\" route_table_id: \"\" => \"[REDACTED]\" state: \"\" => \"\" vpc_peering_connection_id: \"\" => \"[REDACTED]\" module.vpc_peering_billing.aws_route.rt_private_1a: Creating... destination_cidr_block: \"\" => \"[REDACTED]\" destination_prefix_list_id: \"\" => \"\" egress_only_gateway_id: \"\" => \"\" gateway_id: \"\" => \"\" instance_id: \"\" => \"\" instance_owner_id: \"\" => \"\" nat_gateway_id: \"\" => \"\" network_interface_id: \"\" => \"\" origin: \"\" => \"\" route_table_id: \"\" => \"[REDACTED]\" state: \"\" => \"\" vpc_peering_connection_id: \"\" => \"[REDACTED]\" module.vpc_peering.aws_route.local_private_1: Creating... destination_cidr_block: \"\" => \"[REDACTED]\" destination_prefix_list_id: \"\" => \"\" egress_only_gateway_id: \"\" => \"\" gateway_id: \"\" => \"\" instance_id: \"\" => \"\" instance_owner_id: \"\" => \"\" nat_gateway_id: \"\" => \"\" network_interface_id: \"\" => \"\" origin: \"\" => \"\" route_table_id: \"\" => \"[REDACTED]\" state: \"\" => \"\" vpc_peering_connection_id: \"\" => \"[REDACTED]\" module.vpc_peering.aws_route.local_private_1: Creation complete after 0s (ID: [REDACTED]) module.vpc_peering_billing.aws_route.rt_private_1b: Creation complete after 0s (ID: [REDACTED]) module.vpc_peering_billing.aws_route.rt_private_1a: Creation complete after 0s (ID: [REDACTED]) Apply complete! Resources: 4 added, 1 changed, 0 destroyed", "keywords": ["change"]}]}], "answers": [{"Id": "61352362", "PostTypeId": "2", "ParentId": "54596521", "CreationDate": "2020-04-21T20:12:10.247", "Score": "0", "Body": "<p>Met same problem: try to add vpc_peering after the creation of route table with route inside, need to run twice to make it right. Resolved with the hint from <a href=\"https://stackoverflow.com/users/592308/james-woolfenden\">@James Woolfenden</a></p>\n\n<p>Just moved the route part out of the creation of aws_route_table, then all the aws_route creation later(such as vpc_peering) will not conflict with route created outside the aws_route_table</p>\n\n<p>Original Code:</p>\n\n<pre><code># Create crt with nat\nresource \"aws_route_table\" \"tf_portal_private_crt\" {\n  count = length(data.aws_availability_zones.available.names)\n\n  vpc_id = aws_vpc.tf_portal_vpc.id\n\n  route {\n    //associated subnet can reach everywhere\n    cidr_block = \"0.0.0.0/0\"\n    //CRT uses this nat to reach internet\n    nat_gateway_id = aws_nat_gateway.tf_portal_nat.id\n  }\n\n  tags = {\n    Name = \"${var.portal_private_crt_name}_${count.index + 1}\"\n  }\n}\n</code></pre>\n\n<p>New Code:</p>\n\n<pre><code># Create crt with nat\nresource \"aws_route_table\" \"tf_portal_private_crt\" {\n  count = length(data.aws_availability_zones.available.names)\n\n  vpc_id = aws_vpc.tf_portal_vpc.id\n\n  tags = {\n    Name = \"${var.portal_private_crt_name}_${count.index + 1}\"\n  }\n}\n\n\nresource \"aws_route\" \"tf_portal_private\" {\n\n  count                  = length(data.aws_availability_zones.available.names)\n  route_table_id         = element(aws_route_table.tf_portal_private_crt.*.id, count.index)\n  destination_cidr_block = \"0.0.0.0/0\"\n  nat_gateway_id         = aws_nat_gateway.tf_portal_nat.id\n\n\n}\n</code></pre>\n", "OwnerUserId": "5087657", "LastActivityDate": "2020-04-21T20:12:10.247", "CommentCount": "0", "ContentLicense": "CC BY-SA 4.0", "history": [{"Id": "219781840", "PostHistoryTypeId": "2", "PostId": "61352362", "RevisionGUID": "9a070c5a-0ceb-4dfe-adc2-6e0c8f322fc2", "CreationDate": "2020-04-21T20:12:10.247", "UserId": "5087657", "Text": "Met same problem: try to add vpc_peering after the creation of route table with route inside, need to run twice to make it right. Resolved with the hint from [@James Woolfenden][1]\r\n\r\n\r\n  [1]: https://stackoverflow.com/users/592308/james-woolfenden\r\n\r\n\r\nJust moved the route part out of the creation of aws_route_table, then all the aws_route creation later(such as vpc_peering) will not conflict with route created outside the aws_route_table\r\n\r\n\r\nOriginal Code:\r\n    \r\n    # Create crt with nat\r\n    resource \"aws_route_table\" \"tf_portal_private_crt\" {\r\n      count = length(data.aws_availability_zones.available.names)\r\n    \r\n      vpc_id = aws_vpc.tf_portal_vpc.id\r\n    \r\n      route {\r\n        //associated subnet can reach everywhere\r\n        cidr_block = \"0.0.0.0/0\"\r\n        //CRT uses this nat to reach internet\r\n        nat_gateway_id = aws_nat_gateway.tf_portal_nat.id\r\n      }\r\n    \r\n      tags = {\r\n        Name = \"${var.portal_private_crt_name}_${count.index + 1}\"\r\n      }\r\n    }\r\n\r\nNew Code:\r\n\r\n    # Create crt with nat\r\n    resource \"aws_route_table\" \"tf_portal_private_crt\" {\r\n      count = length(data.aws_availability_zones.available.names)\r\n    \r\n      vpc_id = aws_vpc.tf_portal_vpc.id\r\n       \r\n      tags = {\r\n        Name = \"${var.portal_private_crt_name}_${count.index + 1}\"\r\n      }\r\n    }\r\n    \r\n    \r\n    resource \"aws_route\" \"tf_portal_private\" {\r\n    \r\n      count                  = length(data.aws_availability_zones.available.names)\r\n      route_table_id         = element(aws_route_table.tf_portal_private_crt.*.id, count.index)\r\n      destination_cidr_block = \"0.0.0.0/0\"\r\n      nat_gateway_id         = aws_nat_gateway.tf_portal_nat.id\r\n    \r\n    \r\n    }\r\n\r\n", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": [{"source": "Text", "text": "Resolved with the hint from [@James Woolfenden][1] [1]: https://stackoverflow.com/users/592308/james-woolfenden Just moved the route part out of the creation of aws_route_table, then all the aws_route creation later(such as vpc_peering) will not conflict with route created outside the aws_route_table Original Code: # Create crt with nat resource \"aws_route_table\" \"tf_portal_private_crt\" { count = length(data.aws_availability_zones.available.names) vpc_id = aws_vpc.tf_portal_vpc.id route { //associated subnet can reach everywhere cidr_block = \"0.0.0.0/0\" //CRT uses this nat to reach internet nat_gateway_id = aws_nat_gateway.tf_portal_nat.id } tags = { Name = \"${var.portal_private_crt_name}_${count.index + 1}\" } } New Code: # Create crt with nat resource \"aws_route_table\" \"tf_portal_private_crt\" { count = length(data.aws_availability_zones.available.names) vpc_id = aws_vpc.tf_portal_vpc.id tags = { Name = \"${var.portal_private_crt_name}_${count.index + 1}\" } } resource \"aws_route\" \"tf_portal_private\" { count = length(data.aws_availability_zones.available.names) route_table_id = element(aws_route_table.tf_portal_private_crt.*", "keywords": ["nat"]}]}], "filtered-sentences": []}], "contains-topic": true, "filtered-sentences": [{"source": "Title", "text": "Terraform deletes route tables then adds them on second run (no changes). ", "keywords": ["change"]}, {"source": "Body", "text": "As you can see bellow I apply the same code (with no changes whatsoever) twice. ", "keywords": ["change"]}, {"source": "Body", "text": "Every time I have changes to my networking, I need to run terraform twice in order to have my route tables present. ", "keywords": ["networking", "change"]}]}