{"Id": "75974821", "PostTypeId": "1", "CreationDate": "2023-04-10T06:39:57.150", "Score": "0", "ViewCount": "192", "Body": "<p>I'm trying to create an item in DynamoDB using terraform and facing this error:</p>\n<pre><code>reading DynamoDB Table Item (snflk_execution_process_details|execution_key||control-tower_execution|):\nValidationException: The provided key element does not match the schema status code: 400, request id: ... with aws_dynamodb_table_item.control-tower_execution_STG_TJOB, on DynamoDB_Items.tf line 101, in resource &quot;aws_dynamodb_table_item&quot; &quot;control-tower_execution_STG_TJOB&quot;: 101: resource &quot;aws_dynamodb_table_item&quot; &quot;control-tower_execution_STG_TJOB&quot;\n</code></pre>\n<p>This is the terraform resource I'm using. C</p>\n<pre class=\"lang-hcl prettyprint-override\"><code>resource &quot;aws_dynamodb_table_item&quot; &quot;control-tower_execution_STG_TJOB&quot; {\n  table_name = &quot;snflk_execution_process_details&quot;\n  hash_key   = &quot;execution_key&quot;\n  range_key  = &quot;process_key&quot;\n  item = &lt;&lt;ITEM\n{\n  &quot;execution_key&quot;: {\n    &quot;S&quot;: &quot;control-tower_execution&quot;\n  },\n  &quot;process_key&quot;: {\n    &quot;S&quot;: &quot;STG_TJOB&quot;\n  },\n  &quot;application&quot;: {\n    &quot;S&quot;: &quot;control_tower&quot;\n  },\n  &quot;batch&quot;: {\n    &quot;N&quot;: &quot;1&quot;\n  },\n  &quot;scripts&quot;: {\n    &quot;S&quot;: &quot;control-tower/sf-trf/STG_TJOB.sql&quot;\n  },\n  &quot;sql_dict&quot;: {\n    &quot;S&quot;: &quot;None&quot;\n  },\n  &quot;target_table_name&quot;: {\n    &quot;S&quot;: &quot;STG_TJOB&quot;\n  }\n}\nITEM\n}\n</code></pre>\n<p>This is the DynamoDB Table</p>\n<pre class=\"lang-hcl prettyprint-override\"><code>resource &quot;aws_dynamodb_table&quot; &quot;snflk_execution_process_details&quot; {\n  name         = &quot;snflk_execution_process_details&quot;\n  billing_mode = &quot;PAY_PER_REQUEST&quot;\n  hash_key     = &quot;execution_key&quot;\n  range_key    = &quot;process_key&quot;\n\n  attribute {\n    name = &quot;execution_key&quot;\n    type = &quot;S&quot;\n  }\n\n  attribute {\n    name = &quot;process_key&quot;\n    type = &quot;S&quot;\n  }\n\n\n  point_in_time_recovery {\n    enabled = false\n  }\n}\n</code></pre>\n", "OwnerUserId": "8092841", "LastEditorUserId": "6485881", "LastEditDate": "2023-04-10T08:15:54.340", "LastActivityDate": "2023-04-10T08:15:54.340", "Title": "DynamoDB Terraform: ValidationException: The provided key element does not match the schema", "Tags": "<amazon-web-services><amazon-dynamodb><terraform-provider-aws>", "AnswerCount": "0", "CommentCount": "4", "ContentLicense": "CC BY-SA 4.0", "comments": [{"Id": "134000058", "PostId": "75974821", "Score": "0", "Text": "@Maurice \n```\nresource \"aws_dynamodb_table\" \"snflk_execution_process_details\" {\n  name         = \"snflk_execution_process_details\"\n  billing_mode = \"PAY_PER_REQUEST\"\n  hash_key     = \"execution_key\"\n  range_key    = \"process_key\"\n\n  attribute {\n    name = \"execution_key\"\n    type = \"S\"\n  }\n\n  attribute {\n    name = \"process_key\"\n    type = \"S\"\n  }\n\n\n  point_in_time_recovery {\n    enabled = false\n  }\n}\n```", "CreationDate": "2023-04-10T07:50:19.997", "UserId": "8092841", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": [{"source": "Text", "text": "@Maurice ``` resource \"aws_dynamodb_table\" \"snflk_execution_process_details\" { name = \"snflk_execution_process_details\" billing_mode = \"PAY_PER_REQUEST\" hash_key = \"execution_key\" range_key = \"process_key\" attribute { name = \"execution_key\" type = \"S\" ", "keywords": ["bill"]}]}, {"Id": "134000247", "PostId": "75974821", "Score": "0", "Text": "@Maurice ihave uploaded that part of code too.", "CreationDate": "2023-04-10T08:11:47.343", "UserId": "8092841", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}, {"Id": "134000375", "PostId": "75974821", "Score": "1", "Text": "I tried to reproduce your problem - **your code is correct**, the table and the item are created. You should consider referencing the table name for the item instead of hard-coding it so terraform understands there is a dependency between the two resources.", "CreationDate": "2023-04-10T08:26:48.820", "UserId": "6485881", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}, {"Id": "134000600", "PostId": "75974821", "Score": "0", "Text": "I can confirm @Maurice finding. Just run your code, and it works perfectly fine for me as well.", "CreationDate": "2023-04-10T08:54:03.693", "UserId": "248823", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}], "history": [{"Id": "291131884", "PostHistoryTypeId": "2", "PostId": "75974821", "RevisionGUID": "8c53fe62-7a5a-42a9-9b25-6ca7dbecab24", "CreationDate": "2023-04-10T06:39:57.150", "UserId": "8092841", "Text": "Iam trying to create an item in DynamoDB using terraform facing error \r\n\r\n```\r\nresource \"aws_dynamodb_table_item\" \"control-tower_execution_STG_TJOB\" {\r\n  table_name = \"snflk_execution_process_details\"\r\n  hash_key   = \"execution_key\"\r\n  range_key  = \"process_key\"\r\n  item = <<ITEM\r\n{\r\n  \"execution_key\": {\r\n    \"S\": \"control-tower_execution\"\r\n  },\r\n  \"process_key\": {\r\n    \"S\": \"STG_TJOB\"\r\n  },\r\n  \"application\": {\r\n    \"S\": \"control_tower\"\r\n  },\r\n  \"batch\": {\r\n    \"N\": \"1\"\r\n  },\r\n  \"scripts\": {\r\n    \"S\": \"control-tower/sf-trf/STG_TJOB.sql\"\r\n  },\r\n  \"sql_dict\": {\r\n    \"S\": \"None\"\r\n  },\r\n  \"target_table_name\": {\r\n    \"S\": \"STG_TJOB\"\r\n  }\r\n}\r\nITEM\r\n}\r\n```\r\n\r\nGetting Error\r\n\r\n```\r\nreading DynamoDB Table Item (snflk_execution_process_details|execution_key||control-tower_execution|): ValidationException: The provided key element does not match the schema status code: 400, request id: OGFNOP5TGUR5BI34IQAM2BI1VBVV4KQNSO5AEMVJF66Q9ASUAAJG with aws_dynamodb_table_item.control-tower_execution_STG_TJOB, on DynamoDB_Items.tf line 101, in resource \"aws_dynamodb_table_item\" \"control-tower_execution_STG_TJOB\": 101: resource \"aws_dynamodb_table_item\" \"control-tower_execution_STG_TJOB\"\r\n```\r\n\r\n\r\n\r\nIam trying to create an DynamoDb item using terraform", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}, {"Id": "291131886", "PostHistoryTypeId": "1", "PostId": "75974821", "RevisionGUID": "8c53fe62-7a5a-42a9-9b25-6ca7dbecab24", "CreationDate": "2023-04-10T06:39:57.150", "UserId": "8092841", "Text": "DynamoDB_Terraform: ValidationException: The provided key element does not match the schema", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}, {"Id": "291131887", "PostHistoryTypeId": "3", "PostId": "75974821", "RevisionGUID": "8c53fe62-7a5a-42a9-9b25-6ca7dbecab24", "CreationDate": "2023-04-10T06:39:57.150", "UserId": "8092841", "Text": "<amazon-dynamodb><terraform-provider-aws>", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}, {"Id": "291131888", "PostHistoryTypeId": "66", "PostId": "75974821", "RevisionGUID": "8c53fe62-7a5a-42a9-9b25-6ca7dbecab24", "CreationDate": "2023-04-10T06:39:57.150", "UserId": "8092841", "filtered-sentences": []}, {"Id": "291134015", "PostHistoryTypeId": "5", "PostId": "75974821", "RevisionGUID": "b3c36ab2-9389-4a20-a23d-d6f710f1d07a", "CreationDate": "2023-04-10T07:45:04.227", "UserId": "6485881", "Comment": "deleted 64 characters in body; edited tags; edited title", "Text": "I'm trying to create an item in DynamoDB using terraform and facing this error:\r\n\r\n```\r\nreading DynamoDB Table Item (snflk_execution_process_details|execution_key||control-tower_execution|):\r\nValidationException: The provided key element does not match the schema status code: 400, request id: ... with aws_dynamodb_table_item.control-tower_execution_STG_TJOB, on DynamoDB_Items.tf line 101, in resource \"aws_dynamodb_table_item\" \"control-tower_execution_STG_TJOB\": 101: resource \"aws_dynamodb_table_item\" \"control-tower_execution_STG_TJOB\"\r\n```\r\n\r\nThis is the terraform resource I'm using.\r\n\r\n```lang-hcl\r\nresource \"aws_dynamodb_table_item\" \"control-tower_execution_STG_TJOB\" {\r\n  table_name = \"snflk_execution_process_details\"\r\n  hash_key   = \"execution_key\"\r\n  range_key  = \"process_key\"\r\n  item = <<ITEM\r\n{\r\n  \"execution_key\": {\r\n    \"S\": \"control-tower_execution\"\r\n  },\r\n  \"process_key\": {\r\n    \"S\": \"STG_TJOB\"\r\n  },\r\n  \"application\": {\r\n    \"S\": \"control_tower\"\r\n  },\r\n  \"batch\": {\r\n    \"N\": \"1\"\r\n  },\r\n  \"scripts\": {\r\n    \"S\": \"control-tower/sf-trf/STG_TJOB.sql\"\r\n  },\r\n  \"sql_dict\": {\r\n    \"S\": \"None\"\r\n  },\r\n  \"target_table_name\": {\r\n    \"S\": \"STG_TJOB\"\r\n  }\r\n}\r\nITEM\r\n}\r\n```", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}, {"Id": "291134016", "PostHistoryTypeId": "4", "PostId": "75974821", "RevisionGUID": "b3c36ab2-9389-4a20-a23d-d6f710f1d07a", "CreationDate": "2023-04-10T07:45:04.227", "UserId": "6485881", "Comment": "deleted 64 characters in body; edited tags; edited title", "Text": "DynamoDB Terraform: ValidationException: The provided key element does not match the schema", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}, {"Id": "291134017", "PostHistoryTypeId": "6", "PostId": "75974821", "RevisionGUID": "b3c36ab2-9389-4a20-a23d-d6f710f1d07a", "CreationDate": "2023-04-10T07:45:04.227", "UserId": "6485881", "Comment": "deleted 64 characters in body; edited tags; edited title", "Text": "<amazon-web-services><amazon-dynamodb><terraform-provider-aws>", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}, {"Id": "291134862", "PostHistoryTypeId": "5", "PostId": "75974821", "RevisionGUID": "6c1c2870-35d4-493f-b5fc-5faf5ad73c91", "CreationDate": "2023-04-10T08:11:15.900", "UserId": "8092841", "Comment": "Table Creation", "Text": "I'm trying to create an item in DynamoDB using terraform and facing this error:\r\n\r\n```\r\nreading DynamoDB Table Item (snflk_execution_process_details|execution_key||control-tower_execution|):\r\nValidationException: The provided key element does not match the schema status code: 400, request id: ... with aws_dynamodb_table_item.control-tower_execution_STG_TJOB, on DynamoDB_Items.tf line 101, in resource \"aws_dynamodb_table_item\" \"control-tower_execution_STG_TJOB\": 101: resource \"aws_dynamodb_table_item\" \"control-tower_execution_STG_TJOB\"\r\n```\r\n\r\nThis is the terraform resource I'm using. C\r\n\r\n```lang-hcl\r\nresource \"aws_dynamodb_table_item\" \"control-tower_execution_STG_TJOB\" {\r\n  table_name = \"snflk_execution_process_details\"\r\n  hash_key   = \"execution_key\"\r\n  range_key  = \"process_key\"\r\n  item = <<ITEM\r\n{\r\n  \"execution_key\": {\r\n    \"S\": \"control-tower_execution\"\r\n  },\r\n  \"process_key\": {\r\n    \"S\": \"STG_TJOB\"\r\n  },\r\n  \"application\": {\r\n    \"S\": \"control_tower\"\r\n  },\r\n  \"batch\": {\r\n    \"N\": \"1\"\r\n  },\r\n  \"scripts\": {\r\n    \"S\": \"control-tower/sf-trf/STG_TJOB.sql\"\r\n  },\r\n  \"sql_dict\": {\r\n    \"S\": \"None\"\r\n  },\r\n  \"target_table_name\": {\r\n    \"S\": \"STG_TJOB\"\r\n  }\r\n}\r\nITEM\r\n}\r\n```\r\nI have added Creation of DynamoDB Table code also here ................................................................................................................\r\n```\r\nresource \"aws_dynamodb_table\" \"snflk_execution_process_details\" {\r\n  name         = \"snflk_execution_process_details\"\r\n  billing_mode = \"PAY_PER_REQUEST\"\r\n  hash_key     = \"execution_key\"\r\n  range_key    = \"process_key\"\r\n\r\n  attribute {\r\n    name = \"execution_key\"\r\n    type = \"S\"\r\n  }\r\n\r\n  attribute {\r\n    name = \"process_key\"\r\n    type = \"S\"\r\n  }\r\n\r\n\r\n  point_in_time_recovery {\r\n    enabled = false\r\n  }\r\n}\r\n```", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": [{"source": "Text", "text": "`` resource \"aws_dynamodb_table\" \"snflk_execution_process_details\" { name = \"snflk_execution_process_details\" billing_mode = \"PAY_PER_REQUEST\" hash_key = \"execution_key\" range_key = \"process_key\" attribute { name = \"execution_key\" type = \"S\" ", "keywords": ["bill"]}]}, {"Id": "291134997", "PostHistoryTypeId": "5", "PostId": "75974821", "RevisionGUID": "c42e8c67-28fd-4eb6-9502-f2914438f9df", "CreationDate": "2023-04-10T08:15:54.340", "UserId": "6485881", "Comment": "deleted 129 characters in body", "Text": "I'm trying to create an item in DynamoDB using terraform and facing this error:\r\n\r\n```\r\nreading DynamoDB Table Item (snflk_execution_process_details|execution_key||control-tower_execution|):\r\nValidationException: The provided key element does not match the schema status code: 400, request id: ... with aws_dynamodb_table_item.control-tower_execution_STG_TJOB, on DynamoDB_Items.tf line 101, in resource \"aws_dynamodb_table_item\" \"control-tower_execution_STG_TJOB\": 101: resource \"aws_dynamodb_table_item\" \"control-tower_execution_STG_TJOB\"\r\n```\r\n\r\nThis is the terraform resource I'm using. C\r\n\r\n```lang-hcl\r\nresource \"aws_dynamodb_table_item\" \"control-tower_execution_STG_TJOB\" {\r\n  table_name = \"snflk_execution_process_details\"\r\n  hash_key   = \"execution_key\"\r\n  range_key  = \"process_key\"\r\n  item = <<ITEM\r\n{\r\n  \"execution_key\": {\r\n    \"S\": \"control-tower_execution\"\r\n  },\r\n  \"process_key\": {\r\n    \"S\": \"STG_TJOB\"\r\n  },\r\n  \"application\": {\r\n    \"S\": \"control_tower\"\r\n  },\r\n  \"batch\": {\r\n    \"N\": \"1\"\r\n  },\r\n  \"scripts\": {\r\n    \"S\": \"control-tower/sf-trf/STG_TJOB.sql\"\r\n  },\r\n  \"sql_dict\": {\r\n    \"S\": \"None\"\r\n  },\r\n  \"target_table_name\": {\r\n    \"S\": \"STG_TJOB\"\r\n  }\r\n}\r\nITEM\r\n}\r\n```\r\n\r\nThis is the DynamoDB Table\r\n\r\n```lang-hcl\r\nresource \"aws_dynamodb_table\" \"snflk_execution_process_details\" {\r\n  name         = \"snflk_execution_process_details\"\r\n  billing_mode = \"PAY_PER_REQUEST\"\r\n  hash_key     = \"execution_key\"\r\n  range_key    = \"process_key\"\r\n\r\n  attribute {\r\n    name = \"execution_key\"\r\n    type = \"S\"\r\n  }\r\n\r\n  attribute {\r\n    name = \"process_key\"\r\n    type = \"S\"\r\n  }\r\n\r\n\r\n  point_in_time_recovery {\r\n    enabled = false\r\n  }\r\n}\r\n```", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": [{"source": "Text", "text": "``lang-hcl resource \"aws_dynamodb_table\" \"snflk_execution_process_details\" { name = \"snflk_execution_process_details\" billing_mode = \"PAY_PER_REQUEST\" hash_key = \"execution_key\" range_key = \"process_key\" attribute { name = \"execution_key\" type = \"S\" ", "keywords": ["bill"]}]}], "contains-topic": true, "filtered-sentences": []}