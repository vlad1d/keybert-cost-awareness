{"Id": "76387158", "PostTypeId": "1", "CreationDate": "2023-06-02T04:41:32.940", "Score": "0", "ViewCount": "41", "Body": "<p>I am programmatically creating accounts in my overall AWS organization then attempting to create resources (sns topics, sqs queues, lambdas, etc) for those accounts via terraform, using an IAM user's credentials that I also programmatically create for those accounts ahead of time.</p>\n<p>The account and IAM creation works fine (I can see the account in the console), but when I attempt to run <code>terraform apply</code> I get either <code>SubscriptionRequiredException</code> or <code>OptInRequired</code> <code>The AWS Access Key Id needs a subscription for the service</code> errors.  The other posts I've found on this topic were either unanswered or seemed to refer to individual accounts rather than sub-accounts of an organization, so they don't really seem relevant, but I apologize if I am missing a post that covers this somewhere.</p>\n<p>I have checked that:</p>\n<ul>\n<li>I have consolidated billing enabled for my org</li>\n<li>One of my accounts is the management account</li>\n<li>My monthly bill does go to the management accounts credit card for all expenses in the org (including sub-accounts I've set up manually in the past)</li>\n</ul>\n<p>On one of the other posts, I saw someone say they created a web login and logged in for the first time before these errors went away, so it's possible that's something I need to do, but I was really hoping to have the account creation and resource creation 100% automated.</p>\n<p>Does anyone know why I am getting these errors even though my org appears to be set up correctly?  Can I opt-in programmatically from my programmatically-created accounts somehow?</p>\n", "OwnerUserId": "403849", "LastEditorUserId": "403849", "LastEditDate": "2023-06-07T18:47:31.047", "LastActivityDate": "2023-06-07T18:47:31.047", "Title": "Creating resources in a new sub-account of my organization is giving SubscriptionRequiredException and OptInRequired errors", "Tags": "<terraform>", "AnswerCount": "0", "CommentCount": "1", "ContentLicense": "CC BY-SA 4.0", "comments": [{"Id": "134697679", "PostId": "76387158", "Score": "0", "Text": "This is a customer service-related question that should be taken up on the vendor's site with their support staff.", "CreationDate": "2023-06-02T04:44:21.533", "UserId": "62576", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}], "history": [{"Id": "293630569", "PostHistoryTypeId": "2", "PostId": "76387158", "RevisionGUID": "f009a3e7-3890-4796-a5c1-987baf8af4c9", "CreationDate": "2023-06-02T04:41:32.940", "UserId": "403849", "Text": "I am programmatically creating accounts in my overall AWS organization then attempting to create resources (sns topics, sqs queues, lambdas, etc) for those accounts via terraform, using an IAM user's credentials that I also programmatically create for those accounts ahead of time.\r\n\r\nThe account and IAM creation works fine (I can see the account in the console), but when I attempt to run `terraform apply` I get either `SubscriptionRequiredException` or `OptInRequired` `The AWS Access Key Id needs a subscription for the service` errors.  The other posts I've found on this topic were either unanswered or seemed to refer to individual accounts rather than sub-accounts of an organization, so they don't really seem relevant, but I apologize if I am missing a post that covers this somewhere.\r\n\r\nI have checked that:\r\n- I have consolidated billing enabled for my org\r\n- One of my accounts is the management account\r\n- My monthly bill does go to the management accounts credit card for all expenses in the org (including sub-accounts I've set up manually in the past)\r\n\r\nOn one of the other posts, I saw someone say they created a web login and logged in for the first time before these errors went away, so it's possible that's something I need to do, but I was really hoping to have the account creation and resource creation 100% automated.  \r\n\r\nDoes anyone know why I am getting these errors even though my org appears to be set up correctly?  Can I opt-in programmatically from my programmatically-created accounts somehow?\r\n", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": [{"source": "Text", "text": "I have checked that: - I have consolidated billing enabled for my org - One of my accounts is the management account - My monthly bill does go to the management accounts credit card for all expenses in the org (including sub-accounts I've set up manually in the past) ", "keywords": ["bill", "expense"]}]}, {"Id": "293630571", "PostHistoryTypeId": "1", "PostId": "76387158", "RevisionGUID": "f009a3e7-3890-4796-a5c1-987baf8af4c9", "CreationDate": "2023-06-02T04:41:32.940", "UserId": "403849", "Text": "Creating resources in a new sub-account of my organization is giving SubscriptionRequiredException and OptInRequired errors", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}, {"Id": "293630572", "PostHistoryTypeId": "3", "PostId": "76387158", "RevisionGUID": "f009a3e7-3890-4796-a5c1-987baf8af4c9", "CreationDate": "2023-06-02T04:41:32.940", "UserId": "403849", "Text": "<amazon-web-services><terraform><aws-organizations>", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}, {"Id": "293866629", "PostHistoryTypeId": "12", "PostId": "76387158", "RevisionGUID": "91824765-58f0-4fef-bc04-cd9e0e7c8d55", "CreationDate": "2023-06-07T18:45:35.250", "UserId": "403849", "Comment": "via Vote", "Text": "{\"Voters\":[{\"Id\":403849,\"DisplayName\":\"adavea\"}],\"DeleteType\":1}", "filtered-sentences": []}, {"Id": "293866663", "PostHistoryTypeId": "13", "PostId": "76387158", "RevisionGUID": "f5354ef6-1954-4453-a148-455d565ceaed", "CreationDate": "2023-06-07T18:47:07.803", "UserId": "403849", "Text": "{\"Voters\":[{\"Id\":403849,\"DisplayName\":\"adavea\"}]}", "filtered-sentences": []}, {"Id": "293866664", "PostHistoryTypeId": "6", "PostId": "76387158", "RevisionGUID": "2f1809b1-46db-41db-a407-a3afb38bc499", "CreationDate": "2023-06-07T18:47:31.047", "UserId": "403849", "Comment": "edited tags", "Text": "<terraform>", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}], "contains-topic": false, "filtered-sentences": [{"source": "Body", "text": "I have checked that: I have consolidated billing enabled for my org ", "keywords": ["bill"]}, {"source": "Body", "text": "One of my accounts is the management account My monthly bill does go to the management accounts credit card for all expenses in the org (including sub-accounts I've set up manually in the past) ", "keywords": ["bill", "expense"]}]}