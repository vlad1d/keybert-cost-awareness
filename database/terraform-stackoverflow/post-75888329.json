{"Id": "75888329", "PostTypeId": "1", "CreationDate": "2023-03-30T12:32:52.057", "Score": "0", "ViewCount": "39", "Body": "<p>i have lambda with package and DynamoDB stream which needs to invoke the lambda. But when I'm running terraform I'm getting the duplication errors. when im putting different lambda name on the lambda module , the package is created however the dynamdb lambda trigger is not created .how can i create lambda with package and DynamoDB trigger?</p>\n<p>my code is as follow</p>\n<pre><code>resource &quot;aws_dynamodb_table&quot; &quot;calcSASTotalEffort1&quot; { \n name = &quot;calcSASTotalEffort1&quot; \n billing_mode = &quot;PROVISIONED&quot; \n read_capacity = &quot;30&quot; \n write_capacity = &quot;30&quot; \n hash_key       = &quot;tenantId&quot;\n range_key      = &quot;custName&quot;\n stream_enabled   = true\n stream_view_type = &quot;NEW_IMAGE&quot;\n attribute { \n   name = &quot;tenantId&quot; \n   type = &quot;S&quot; \n }`\nresource &quot;aws_lambda_function&quot; &quot;updateSearchClusterSas&quot; {\n filename=&quot;updateSearchClusterSas.zip&quot;\n function_name=&quot;updateSearchClusterSas&quot;\n role=aws_iam_role.iam_for_lambda.arn\n handler=&quot;updateSearchClusterSas.lambda_handler.handler&quot;\n runtime=&quot;python3.8&quot;\n}`\n\nmodule &quot;lambda_function&quot;  {\n  source = &quot;terraform-aws-modules/lambda/aws&quot;\n\n  function_name = &quot;updateSearchClusters&quot;\n  description   = &quot;My awesome lambda function&quot;\n  handler       = &quot;lambda_function.handler&quot;\n  runtime       = &quot;python3.8&quot;\n  publish = true\n  create_package         = false\n  local_existing_package = &quot;my-deployment-package.zip&quot;\n  use_existing_cloudwatch_log_group = false\n\nresource &quot;aws_lambda_event_source_mapping&quot; &quot;dynamoLambdaTrigger&quot; {\n  event_source_arn  = aws_dynamodb_table.calcSASTotalEffort1.stream_arn\n  function_name     = lambda_function.function_name\n  starting_position = &quot;LATEST&quot;`\n</code></pre>\n<p>i was expected to have  updateSearchClusterSas with package and with dunamo trigger configuration as in the 1st image (console configuration):</p>\n<p><a href=\"https://i.stack.imgur.com/C16Ej.png\" rel=\"nofollow noreferrer\">was configured via console</a> but i got like this:</p>\n<p><a href=\"https://i.stack.imgur.com/6Vko0.png\" rel=\"nofollow noreferrer\">without dynamo db trigger</a> or similarly i got with dynamodb trigger but without lambda package</p>\n", "OwnerUserId": "21526957", "LastEditorUserId": "21526957", "LastEditDate": "2023-03-31T09:15:29.853", "LastActivityDate": "2023-03-31T09:15:29.853", "Title": "Lambda package and streaming - getting ResourceConflictException: Function already exist: -TERRAFORN AWS", "Tags": "<lambda><aws-lambda><module><package><terraform-provider-aws>", "AnswerCount": "0", "CommentCount": "0", "ContentLicense": "CC BY-SA 4.0", "history": [{"Id": "290610150", "PostHistoryTypeId": "2", "PostId": "75888329", "RevisionGUID": "a77d5f03-6f36-453e-9503-03c75a337ad2", "CreationDate": "2023-03-30T12:32:52.057", "UserId": "21526957", "Text": "i have lambda with package and DynamoDB stream which needs to invoke the lambda. But when I'm running terraform I'm getting the duplication errors. when im putting different lambda name on the lambda module , the package is created however the dynamdb lambda trigger is not created .how can i create lambda with package and DynamoDB trigger?\r\n\r\nmy code is as follow\r\n\r\n    resource \"aws_dynamodb_table\" \"calcSASTotalEffort1\" { \r\n     name = \"calcSASTotalEffort1\" \r\n     billing_mode = \"PROVISIONED\" \r\n     read_capacity = \"30\" \r\n     write_capacity = \"30\" \r\n     hash_key       = \"tenantId\"\r\n     range_key      = \"custName\"\r\n     stream_enabled   = true\r\n     stream_view_type = \"NEW_IMAGE\"\r\n     attribute { \r\n       name = \"tenantId\" \r\n       type = \"S\" \r\n     }`\r\n    resource \"aws_lambda_function\" \"updateSearchClusterSas\" {\r\n     filename=\"updateSearchClusterSas.zip\"\r\n     function_name=\"updateSearchClusterSas\"\r\n     role=aws_iam_role.iam_for_lambda.arn\r\n     handler=\"updateSearchClusterSas.lambda_handler.handler\"\r\n     runtime=\"python3.8\"\r\n    }`\r\n\r\n    module \"lambda_function\"  {\r\n      source = \"terraform-aws-modules/lambda/aws\"\r\n\r\n      function_name = \"updateSearchClusters\"\r\n      description   = \"My awesome lambda function\"\r\n      handler       = \"lambda_function.handler\"\r\n      runtime       = \"python3.8\"\r\n      publish = true\r\n      create_package         = false\r\n      local_existing_package = \"my-deployment-package.zip\"\r\n      use_existing_cloudwatch_log_group = false\r\n\r\n    resource \"aws_lambda_event_source_mapping\" \"dynamoLambdaTrigger\" {\r\n      event_source_arn  = aws_dynamodb_table.calcSASTotalEffort1.stream_arn\r\n      function_name     = lambda_function.function_name\r\n      starting_position = \"LATEST\"`\r\n\r\ni was expected to have  updateSearchClusterSas with package and with dunamo trigger configuration as in the image:\r\n\r\n[was configured via cobsole](https://i.stack.imgur.com/C16Ej.png) but i got like this:\r\n\r\n[without dynamo db trigger](https://i.stack.imgur.com/6Vko0.png) or similarly i got with dynamodb trigger but without lambda package \r\n", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": [{"source": "Text", "text": "when im putting different lambda name on the lambda module , the package is created however the dynamdb lambda trigger is not created .how can i create lambda with package and DynamoDB trigger? my code is as follow resource \"aws_dynamodb_table\" \"calcSASTotalEffort1\" { name = \"calcSASTotalEffort1\" billing_mode = \"PROVISIONED\" read_capacity = \"30\" write_capacity = \"30\" hash_key = \"tenantId\" range_key = \"custName\" stream_enabled = true stream_view_type = \"NEW_IMAGE\" attribute { name = \"tenantId\" type = \"S\" ", "keywords": ["bill"]}]}, {"Id": "290610152", "PostHistoryTypeId": "1", "PostId": "75888329", "RevisionGUID": "a77d5f03-6f36-453e-9503-03c75a337ad2", "CreationDate": "2023-03-30T12:32:52.057", "UserId": "21526957", "Text": "ResourceConflictException: Function already exist: -TERRAFORN AWS", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}, {"Id": "290610153", "PostHistoryTypeId": "3", "PostId": "75888329", "RevisionGUID": "a77d5f03-6f36-453e-9503-03c75a337ad2", "CreationDate": "2023-03-30T12:32:52.057", "UserId": "21526957", "Text": "<lambda><aws-lambda><module>", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}, {"Id": "290610154", "PostHistoryTypeId": "66", "PostId": "75888329", "RevisionGUID": "a77d5f03-6f36-453e-9503-03c75a337ad2", "CreationDate": "2023-03-30T12:32:52.057", "UserId": "21526957", "filtered-sentences": []}, {"Id": "290615707", "PostHistoryTypeId": "5", "PostId": "75888329", "RevisionGUID": "68bb4fe5-a490-4442-b7ae-a78ba779a872", "CreationDate": "2023-03-30T14:09:17.027", "UserId": "21526957", "Comment": "added 28 characters in body; edited title", "Text": "i have lambda with package and DynamoDB stream which needs to invoke the lambda. But when I'm running terraform I'm getting the duplication errors. when im putting different lambda name on the lambda module , the package is created however the dynamdb lambda trigger is not created .how can i create lambda with package and DynamoDB trigger?\r\n\r\nmy code is as follow\r\n\r\n    resource \"aws_dynamodb_table\" \"calcSASTotalEffort1\" { \r\n     name = \"calcSASTotalEffort1\" \r\n     billing_mode = \"PROVISIONED\" \r\n     read_capacity = \"30\" \r\n     write_capacity = \"30\" \r\n     hash_key       = \"tenantId\"\r\n     range_key      = \"custName\"\r\n     stream_enabled   = true\r\n     stream_view_type = \"NEW_IMAGE\"\r\n     attribute { \r\n       name = \"tenantId\" \r\n       type = \"S\" \r\n     }`\r\n    resource \"aws_lambda_function\" \"updateSearchClusterSas\" {\r\n     filename=\"updateSearchClusterSas.zip\"\r\n     function_name=\"updateSearchClusterSas\"\r\n     role=aws_iam_role.iam_for_lambda.arn\r\n     handler=\"updateSearchClusterSas.lambda_handler.handler\"\r\n     runtime=\"python3.8\"\r\n    }`\r\n\r\n    module \"lambda_function\"  {\r\n      source = \"terraform-aws-modules/lambda/aws\"\r\n\r\n      function_name = \"updateSearchClusters\"\r\n      description   = \"My awesome lambda function\"\r\n      handler       = \"lambda_function.handler\"\r\n      runtime       = \"python3.8\"\r\n      publish = true\r\n      create_package         = false\r\n      local_existing_package = \"my-deployment-package.zip\"\r\n      use_existing_cloudwatch_log_group = false\r\n\r\n    resource \"aws_lambda_event_source_mapping\" \"dynamoLambdaTrigger\" {\r\n      event_source_arn  = aws_dynamodb_table.calcSASTotalEffort1.stream_arn\r\n      function_name     = lambda_function.function_name\r\n      starting_position = \"LATEST\"`\r\n\r\ni was expected to have  updateSearchClusterSas with package and with dunamo trigger configuration as in the 1st image (console configuration):\r\n\r\n[was configured via console](https://i.stack.imgur.com/C16Ej.png) but i got like this:\r\n\r\n[without dynamo db trigger](https://i.stack.imgur.com/6Vko0.png) or similarly i got with dynamodb trigger but without lambda package \r\n", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": [{"source": "Text", "text": "when im putting different lambda name on the lambda module , the package is created however the dynamdb lambda trigger is not created .how can i create lambda with package and DynamoDB trigger? my code is as follow resource \"aws_dynamodb_table\" \"calcSASTotalEffort1\" { name = \"calcSASTotalEffort1\" billing_mode = \"PROVISIONED\" read_capacity = \"30\" write_capacity = \"30\" hash_key = \"tenantId\" range_key = \"custName\" stream_enabled = true stream_view_type = \"NEW_IMAGE\" attribute { name = \"tenantId\" type = \"S\" ", "keywords": ["bill"]}]}, {"Id": "290615708", "PostHistoryTypeId": "4", "PostId": "75888329", "RevisionGUID": "68bb4fe5-a490-4442-b7ae-a78ba779a872", "CreationDate": "2023-03-30T14:09:17.027", "UserId": "21526957", "Comment": "added 28 characters in body; edited title", "Text": "Lambda package and streaming - getting ResourceConflictException: Function already exist: -TERRAFORN AWS", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}, {"Id": "290640131", "PostHistoryTypeId": "6", "PostId": "75888329", "RevisionGUID": "de91bc6c-2189-4d66-a84b-963685160310", "CreationDate": "2023-03-30T22:50:45.783", "UserId": "174777", "Comment": "edited tags", "Text": "<amazon-web-services><aws-lambda><module>", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}, {"Id": "290658504", "PostHistoryTypeId": "6", "PostId": "75888329", "RevisionGUID": "7ce454af-19c6-4b6b-b12a-377ca8ace949", "CreationDate": "2023-03-31T09:15:29.853", "UserId": "21526957", "Comment": "edited tags", "Text": "<lambda><aws-lambda><module><package><terraform-provider-aws>", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}], "contains-topic": true, "filtered-sentences": []}