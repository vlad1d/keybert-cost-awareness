{"Id": "75161419", "PostTypeId": "1", "CreationDate": "2023-01-18T15:16:37.387", "Score": "-2", "ViewCount": "1036", "Body": "<p>I have a dynamic block in aws_cloudfront_distribution which is the following:</p>\n<pre><code>  dynamic &quot;ordered_cache_behavior&quot; {\nfor_each = var.ordered_cache_behaviors\ncontent {\n  path_pattern              = ordered_cache_behavior.value.path_pattern\n  allowed_methods           = ordered_cache_behavior.value.allowed_methods\n  cached_methods            = ordered_cache_behavior.value.cached_methods\n  target_origin_id          = var.origin_id\n  cache_policy_id           = var.cache_policy_ids[&quot;${var.policy_prefix}${ordered_cache_behavior.value.cache_policy_name}&quot;]\n  origin_request_policy_id  = ordered_cache_behavior.value.path_pattern = &quot;/&quot; ? var.origin_request_policy_ids[&quot;whitelist_policy&quot;] : null\n  dynamic &quot;lambda_function_association&quot; {\n    for_each = var.enable_auth ? var.default_cache_behavior.lambda_function_association : ordered_cache_behavior.value.lambda_function_association\n    content {\n      event_type   = lambda_function_association.value.event_type\n      include_body = lambda_function_association.value.include_body\n      lambda_arn   = lambda_function_association.value.lambda_arn != &quot;&quot; ? lambda_function_association.value.lambda_arn : local.lambda_mapping[lambda_function_association.value.event_type]\n    }\n  }\n  compress               = ordered_cache_behavior.value.compress\n  viewer_protocol_policy = ordered_cache_behavior.value.viewer_protocol_policy\n}\n</code></pre>\n<p>I got :</p>\n<pre><code>    \u2502 Error: Missing newline after argument\n\u2502 \n\u2502   on main.tf line 111, in resource &quot;aws_cloudfront_distribution&quot; &quot;web_distribution&quot;:\n\u2502  111:       origin_request_policy_id  = ordered_cache_behavior.value.path_pattern = &quot;/&quot; ? var.origin_request_policy_ids[&quot;origin_1H_1D_plp_pdp_whitelist_whitelist_none&quot;] : null\n\u2502 \n\u2502 An argument definition must end with a newline.\n</code></pre>\n<p>I still dont know why I am getting the error, so what I basically wanna do is to define origin_request_policy_id based on if path pattern is / .\nam I missing something?</p>\n", "OwnerUserId": "13311923", "LastActivityDate": "2023-01-18T22:26:15.827", "Title": "An argument definition must end with a newline", "Tags": "<terraform>", "AnswerCount": "2", "CommentCount": "2", "ContentLicense": "CC BY-SA 4.0", "comments": [{"Id": "132634093", "PostId": "75161419", "Score": "0", "Text": "This `ordered_cache_behavior.value.path_pattern = \"/\"` should be `ordered_cache_behavior.value.path_pattern == \"/\"`.", "CreationDate": "2023-01-18T15:33:32.683", "UserId": "8343484", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}, {"Id": "132634371", "PostId": "75161419", "Score": "0", "Text": "Oh yeah, I didnt pay attention. Thanks", "CreationDate": "2023-01-18T15:45:40.673", "UserId": "13311923", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": [{"source": "Text", "text": "Oh yeah, I didnt pay attention. ", "keywords": ["pay"]}]}], "history": [{"Id": "286388379", "PostHistoryTypeId": "2", "PostId": "75161419", "RevisionGUID": "0cd0c491-35fa-4ce7-9831-39cafe3a69fd", "CreationDate": "2023-01-18T15:16:37.387", "UserId": "13311923", "Text": "I have a dynamic block in aws_cloudfront_distribution which is the following:\r\n\r\n      dynamic \"ordered_cache_behavior\" {\r\n    for_each = var.ordered_cache_behaviors\r\n    content {\r\n      path_pattern              = ordered_cache_behavior.value.path_pattern\r\n      allowed_methods           = ordered_cache_behavior.value.allowed_methods\r\n      cached_methods            = ordered_cache_behavior.value.cached_methods\r\n      target_origin_id          = var.origin_id\r\n      cache_policy_id           = var.cache_policy_ids[\"${var.policy_prefix}${ordered_cache_behavior.value.cache_policy_name}\"]\r\n      origin_request_policy_id  = ordered_cache_behavior.value.path_pattern = \"/\" ? var.origin_request_policy_ids[\"whitelist_policy\"] : null\r\n      dynamic \"lambda_function_association\" {\r\n        for_each = var.enable_auth ? var.default_cache_behavior.lambda_function_association : ordered_cache_behavior.value.lambda_function_association\r\n        content {\r\n          event_type   = lambda_function_association.value.event_type\r\n          include_body = lambda_function_association.value.include_body\r\n          lambda_arn   = lambda_function_association.value.lambda_arn != \"\" ? lambda_function_association.value.lambda_arn : local.lambda_mapping[lambda_function_association.value.event_type]\r\n        }\r\n      }\r\n      compress               = ordered_cache_behavior.value.compress\r\n      viewer_protocol_policy = ordered_cache_behavior.value.viewer_protocol_policy\r\n    }\r\n\r\nI got :\r\n\r\n        \u2502 Error: Missing newline after argument\r\n    \u2502 \r\n    \u2502   on main.tf line 111, in resource \"aws_cloudfront_distribution\" \"web_distribution\":\r\n    \u2502  111:       origin_request_policy_id  = ordered_cache_behavior.value.path_pattern = \"/\" ? var.origin_request_policy_ids[\"origin_1H_1D_plp_pdp_whitelist_whitelist_none\"] : null\r\n    \u2502 \r\n    \u2502 An argument definition must end with a newline.\r\nI still dont know why I am getting the error, so what I basically wanna do is to define origin_request_policy_id based on if path pattern is / .\r\nam I missing something?", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}, {"Id": "286388381", "PostHistoryTypeId": "1", "PostId": "75161419", "RevisionGUID": "0cd0c491-35fa-4ce7-9831-39cafe3a69fd", "CreationDate": "2023-01-18T15:16:37.387", "UserId": "13311923", "Text": "An argument definition must end with a newline", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}, {"Id": "286388382", "PostHistoryTypeId": "3", "PostId": "75161419", "RevisionGUID": "0cd0c491-35fa-4ce7-9831-39cafe3a69fd", "CreationDate": "2023-01-18T15:16:37.387", "UserId": "13311923", "Text": "<terraform>", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}], "answers": [{"Id": "75165891", "PostTypeId": "2", "ParentId": "75161419", "CreationDate": "2023-01-18T22:26:15.827", "Score": "1", "Body": "<p>Terraform's parser is rejecting what you wrote here because you used the <code>=</code> symbol in the middle of an expression. Terraform doesn't understand what you intended and so it's guessing that the expression ends after <code>ordered_cache_behavior.value.path_pattern</code> and then complaining that there isn't a newline at that point.</p>\n<p>However, I think what you really intended to do here was test for equality between <code>ordered_cache_behavior.value.path_pattern</code> and <code>&quot;/&quot;</code>. The operator for equality test is <code>==</code> rather than <code>=</code>, so you can add the extra equals character to make this valid:</p>\n<pre><code>  origin_request_policy_id  = ordered_cache_behavior.value.path_pattern == &quot;/&quot; ? var.origin_request_policy_ids[&quot;whitelist_policy&quot;] : null\n</code></pre>\n<p>Because this expression is long and has multiple complex parts, I might suggest rewriting it to be a multi-line expression like this for readability, but of course that's subjective and optional:</p>\n<pre><code>  origin_request_policy_id = (\n    ordered_cache_behavior.value.path_pattern == &quot;/&quot; ?\n    var.origin_request_policy_ids[&quot;whitelist_policy&quot;] :\n    null\n  )\n</code></pre>\n", "OwnerUserId": "281848", "LastActivityDate": "2023-01-18T22:26:15.827", "CommentCount": "0", "ContentLicense": "CC BY-SA 4.0", "history": [{"Id": "286413860", "PostHistoryTypeId": "2", "PostId": "75165891", "RevisionGUID": "f759ffa8-c4c9-4ba2-b630-48ea52d65cb0", "CreationDate": "2023-01-18T22:26:15.827", "UserId": "281848", "Text": "Terraform's parser is rejecting what you wrote here because you used the `=` symbol in the middle of an expression. Terraform doesn't understand what you intended and so it's guessing that the expression ends after `ordered_cache_behavior.value.path_pattern` and then complaining that there isn't a newline at that point.\r\n\r\nHowever, I think what you really intended to do here was test for equality between `ordered_cache_behavior.value.path_pattern` and `\"/\"`. The operator for equality test is `==` rather than `=`, so you can add the extra equals character to make this valid:\r\n\r\n```\r\n  origin_request_policy_id  = ordered_cache_behavior.value.path_pattern == \"/\" ? var.origin_request_policy_ids[\"whitelist_policy\"] : null\r\n```\r\n\r\nBecause this expression is long and has multiple complex parts, I might suggest rewriting it to be a multi-line expression like this for readability, but of course that's subjective and optional:\r\n\r\n```\r\n  origin_request_policy_id = (\r\n    ordered_cache_behavior.value.path_pattern == \"/\" ?\r\n    var.origin_request_policy_ids[\"whitelist_policy\"] :\r\n    null\r\n  )\r\n```\r\n", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": [{"source": "Text", "text": "However, I think what you really intended to do here was test for equality between `ordered_cache_behavior.value.path_pattern` and `\"/\"`. ", "keywords": ["test"]}, {"source": "Text", "text": "The operator for equality test is `==` rather than `=`, so you can add the extra equals character to make this valid: ``` origin_request_policy_id = ordered_cache_behavior.value.path_pattern == \"/\" ? var.origin_request_policy_ids[\"whitelist_policy\"] : null ``` ", "keywords": ["test"]}]}], "filtered-sentences": [{"source": "Body", "text": "However, I think what you really intended to do here was test for equality between ordered_cache_behavior.value.path_pattern and \"/\". ", "keywords": ["test"]}, {"source": "Body", "text": "The operator for equality test is == rather than =, so you can add the extra equals character to make this valid: Because this expression is long and has multiple complex parts, I might suggest rewriting it to be a multi-line expression like this for readability, but of course that's subjective and optional:", "keywords": ["test"]}]}, {"Id": "75161659", "PostTypeId": "2", "ParentId": "75161419", "CreationDate": "2023-01-18T15:35:39.757", "Score": "0", "Body": "<p>I think that you can't assign something in an definition in the same line.</p>\n<pre><code> origin_request_policy_id  = ordered_cache_behavior.value.path_pattern = &quot;/&quot;...\n</code></pre>\n", "OwnerUserId": "15557668", "LastActivityDate": "2023-01-18T15:35:39.757", "CommentCount": "1", "ContentLicense": "CC BY-SA 4.0", "comments": [{"Id": "132667135", "PostId": "75161659", "Score": "0", "Text": "As it\u2019s currently written, your answer is unclear. Please [edit] to add additional details that will help others understand how this addresses the question asked. You can find more information on how to write good answers [in the help center](/help/how-to-answer).", "CreationDate": "2023-01-20T07:46:11.410", "UserId": "-1", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}], "history": [{"Id": "286389639", "PostHistoryTypeId": "2", "PostId": "75161659", "RevisionGUID": "776f11ed-1de4-4bd6-8210-e45445e84099", "CreationDate": "2023-01-18T15:35:39.757", "UserId": "15557668", "Text": "I think that you can't assign something in an definition in the same line.\r\n\r\n     origin_request_policy_id  = ordered_cache_behavior.value.path_pattern = \"/\"...\r\n", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}], "filtered-sentences": []}], "contains-topic": true, "filtered-sentences": []}