{"Id": "69416024", "PostTypeId": "1", "CreationDate": "2021-10-02T10:26:52.120", "Score": "0", "ViewCount": "878", "Body": "<p>I want to create folders/files from the combination of template files &amp; vars from a main.tf in an output.tf.</p>\n<p>I saw a module that seems perfect for my objective but I need to apply specific names for my files.</p>\n<pre><code>resource &quot;template_dir&quot; &quot;config&quot; {\n  source_dir      = &quot;...&quot;\n  destination_dir = &quot;...&quot;\n\n  vars = {\n    example_name = var.example_name\n  }\n}\n</code></pre>\n<p>Right now I using the next combination of two modules:</p>\n<pre><code>data &quot;template_file&quot; &quot;example_template&quot; {\n  template = file(&quot;${path.module}/templates/proyect-name/one/something.yml&quot;)\n  vars = {\n    example_name = var.example_name\n  }\n}\n\nresource &quot;local_file&quot; &quot;example_file&quot; {\n  content = data.template_file.example_template.rendered\n  filename = &quot;${var.outputs_final_path}/${var.example_name}/${var.example_name}_something.yml&quot;\n}\n</code></pre>\n<p>But I end up having 600+ lines of code....is there a &quot;cleaner&quot; way to create it?</p>\n", "OwnerUserId": "16576665", "LastActivityDate": "2021-10-02T10:26:52.120", "Title": "Create template files from output.tf - Terraform", "Tags": "<terraform-provider-aws>", "AnswerCount": "0", "CommentCount": "3", "FavoriteCount": "0", "ContentLicense": "CC BY-SA 4.0", "comments": [{"Id": "122692594", "PostId": "69416024", "Score": "0", "Text": "I'm not sure I understand your use-case completely, but a combination of\nhttps://www.terraform.io/docs/language/functions/templatefile.html\nand  \nhttps://registry.terraform.io/providers/hashicorp/local/latest/docs/resources/file\nshould do the trick. \nAdding a `count` to your resource depending on your vars will produce n(`count`) files", "CreationDate": "2021-10-02T10:30:48.537", "UserId": "1895443", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}, {"Id": "122750995", "PostId": "69416024", "Score": "0", "Text": "Hi, yes works but defining a tree structure of folder/files with two modules cost 600+ lines of code. template_dir do it flawlessly in a unique module but don't let me specify the name of some files (depends on project name var). I also try creating with templete_dir and local_file to try a kind of rename file but doesn't work...\nIf templete_dir knew how to interpret variables in the filenames used as templates...", "CreationDate": "2021-10-05T09:59:41.720", "UserId": "16576665", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": [{"source": "Text", "text": "Hi, yes works but defining a tree structure of folder/files with two modules cost 600+ lines of code. template_dir do it flawlessly in a unique module but don't let me specify the name of some files (depends on project name var). ", "keywords": ["cost"]}]}, {"Id": "122752876", "PostId": "69416024", "Score": "0", "Text": "Something like https://discuss.hashicorp.com/t/looking-for-a-way-to-render-template-directories-including-templated-directory-names/19843 but without using  hashicorp/dir/template", "CreationDate": "2021-10-05T11:17:53.427", "UserId": "16576665", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}], "history": [{"Id": "254977624", "PostHistoryTypeId": "2", "PostId": "69416024", "RevisionGUID": "73233616-f8f7-4f5c-88cd-2c1f5fe00b11", "CreationDate": "2021-10-02T10:26:52.120", "UserId": "16576665", "Text": "I want to create folders/files from the combination of template files & vars from a main.tf in an output.tf.\r\n\r\nI saw a module that seems perfect for my objective but I need to apply specific names for my files.\r\n\r\n    resource \"template_dir\" \"config\" {\r\n      source_dir      = \"...\"\r\n      destination_dir = \"...\"\r\n    \r\n      vars = {\r\n        example_name = var.example_name\r\n      }\r\n    }\r\n\r\nRight now I using the next combination of two modules:\r\n\r\n    data \"template_file\" \"example_template\" {\r\n      template = file(\"${path.module}/templates/proyect-name/one/something.yml\")\r\n      vars = {\r\n        example_name = var.example_name\r\n      }\r\n    }\r\n\r\n    resource \"local_file\" \"example_file\" {\r\n      content = data.template_file.example_template.rendered\r\n      filename = \"${var.outputs_final_path}/${var.example_name}/${var.example_name}_something.yml\"\r\n    }\r\n    \r\n\r\n\r\n\r\nBut I end up having 600+ lines of code....is there a \"cleaner\" way to create it?", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}, {"Id": "254977626", "PostHistoryTypeId": "1", "PostId": "69416024", "RevisionGUID": "73233616-f8f7-4f5c-88cd-2c1f5fe00b11", "CreationDate": "2021-10-02T10:26:52.120", "UserId": "16576665", "Text": "Create template files from output.tf - Terraform", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}, {"Id": "254977627", "PostHistoryTypeId": "3", "PostId": "69416024", "RevisionGUID": "73233616-f8f7-4f5c-88cd-2c1f5fe00b11", "CreationDate": "2021-10-02T10:26:52.120", "UserId": "16576665", "Text": "<terraform-provider-aws>", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}], "contains-topic": true, "filtered-sentences": []}