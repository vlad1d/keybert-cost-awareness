{"Id": "70800812", "PostTypeId": "1", "AcceptedAnswerId": "70802171", "CreationDate": "2022-01-21T11:50:28.563", "Score": "1", "ViewCount": "7477", "Body": "<p>i\u2019m trying to create multiple Network interfaces by using for_each and locals, here is my code</p>\n<pre><code>locals {\n  network_interfaces = {\n    a = {\n      subnet_id      = module.vpc.public_subnets[0],\n      security_group = [aws_security_group.ssh.id],\n    },\n\n    b = {\n      subnet_id       = module.vpc.public_subnets[0],\n      security_groups = [aws_security_group.ssh.id],\n    },\n    c = {\n      subnet_id       = module.vpc.public_subnets[1],\n      security_groups = [aws_security_group.ssh.id],\n    },\n    d = {\n      subnet_id       = module.vpc.public_subnets[1],\n      security_groups = [aws_security_group.ssh.id],\n    },\n\n  }\n\n}\n</code></pre>\n<p>and here i\u2019m trying to iterate over the local.network_interfaces with for_each so I can create 4 network interfaces</p>\n<pre><code>resource &quot;aws_network_interface&quot; &quot;this&quot; {\n  for_each  = local.network_interfaces\n  subnet_id = each.value.subnet_id\n  security_groups = each.value.security_groups\n  tags = {\n    Name = &quot;${each.key}_network_interface&quot;\n  }\n}\n</code></pre>\n<p>but when i run Terraform apply, it gives me this error</p>\n<pre><code>\u2502 Error: Unsupported attribute\n\u2502 \n\u2502   on main.tf line 61, in resource &quot;aws_network_interface&quot; &quot;this&quot;:\n\u2502   61:   security_groups = each.value.security_groups\n\u2502     \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n\u2502     \u2502 each.value is object with 2 attributes\n\u2502 \n\u2502 This object does not have an attribute named &quot;security_groups&quot;\n</code></pre>\n<p>any help will be appreciated</p>\n", "OwnerUserId": "10735209", "LastActivityDate": "2022-01-21T13:36:46.773", "Title": "Error: Unsupported attribute , each.value is object with 2 attributes", "Tags": "<terraform><terraform-provider-aws><aws-networking>", "AnswerCount": "1", "CommentCount": "0", "ContentLicense": "CC BY-SA 4.0", "history": [{"Id": "262433045", "PostHistoryTypeId": "2", "PostId": "70800812", "RevisionGUID": "fa707c56-3f07-4682-8ec5-02df9c1926ec", "CreationDate": "2022-01-21T11:50:28.563", "UserId": "10735209", "Text": "i\u2019m trying to create multiple Network interfaces by using for_each and locals, here is my code\r\n\r\n    locals {\r\n      network_interfaces = {\r\n        a = {\r\n          subnet_id      = module.vpc.public_subnets[0],\r\n          security_group = [aws_security_group.ssh.id],\r\n        },\r\n    \r\n        b = {\r\n          subnet_id       = module.vpc.public_subnets[0],\r\n          security_groups = [aws_security_group.ssh.id],\r\n        },\r\n        c = {\r\n          subnet_id       = module.vpc.public_subnets[1],\r\n          security_groups = [aws_security_group.ssh.id],\r\n        },\r\n        d = {\r\n          subnet_id       = module.vpc.public_subnets[1],\r\n          security_groups = [aws_security_group.ssh.id],\r\n        },\r\n    \r\n      }\r\n    \r\n    }\r\n\r\nand here i\u2019m trying to iterate over the local.network_interfaces with for_each so I can create 4 network interfaces\r\n\r\n    resource \"aws_network_interface\" \"this\" {\r\n      for_each  = local.network_interfaces\r\n      subnet_id = each.value.subnet_id\r\n      security_groups = each.value.security_groups\r\n      tags = {\r\n        Name = \"${each.key}_network_interface\"\r\n      }\r\n    }\r\n\r\n\r\nbut when i run Terraform apply, it gives me this error\r\n\r\n    \u2502 Error: Unsupported attribute\r\n    \u2502 \r\n    \u2502   on main.tf line 61, in resource \"aws_network_interface\" \"this\":\r\n    \u2502   61:   security_groups = each.value.security_groups\r\n    \u2502     \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\r\n    \u2502     \u2502 each.value is object with 2 attributes\r\n    \u2502 \r\n    \u2502 This object does not have an attribute named \"security_groups\"\r\n\r\nany help will be appreciated\r\n\r\n", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}, {"Id": "262433047", "PostHistoryTypeId": "1", "PostId": "70800812", "RevisionGUID": "fa707c56-3f07-4682-8ec5-02df9c1926ec", "CreationDate": "2022-01-21T11:50:28.563", "UserId": "10735209", "Text": "Error: Unsupported attribute , each.value is object with 2 attributes", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}, {"Id": "262433048", "PostHistoryTypeId": "3", "PostId": "70800812", "RevisionGUID": "fa707c56-3f07-4682-8ec5-02df9c1926ec", "CreationDate": "2022-01-21T11:50:28.563", "UserId": "10735209", "Text": "<terraform><terraform-provider-aws><aws-networking>", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}], "answers": [{"Id": "70802171", "PostTypeId": "2", "ParentId": "70800812", "CreationDate": "2022-01-21T13:36:46.773", "Score": "3", "Body": "<p>The <code>object</code> key corresponding to the security groups in the value for the <code>map</code> with the <code>a</code> key needs to match the keys in the other <code>object</code> values in the maps:</p>\n<pre><code>a = {\n  subnet_id       = module.vpc.public_subnets[0],\n  security_groups = [aws_security_group.ssh.id],\n},\n</code></pre>\n", "OwnerUserId": "5343387", "LastActivityDate": "2022-01-21T13:36:46.773", "CommentCount": "1", "ContentLicense": "CC BY-SA 4.0", "comments": [{"Id": "125168690", "PostId": "70802171", "Score": "0", "Text": "What an error hahaha, thanks a lot, I didn't pay attention to the \"s\" in the end of the attribute name", "CreationDate": "2022-01-21T14:27:17.453", "UserId": "10735209", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": [{"source": "Text", "text": "What an error hahaha, thanks a lot, I didn't pay attention to the \"s\" in the end of the attribute name", "keywords": ["pay"]}]}], "history": [{"Id": "262440060", "PostHistoryTypeId": "2", "PostId": "70802171", "RevisionGUID": "c230cc43-94dc-4d2c-8c43-5052e6715b34", "CreationDate": "2022-01-21T13:36:46.773", "UserId": "5343387", "Text": "The `object` key corresponding to the security groups in the value for the `map` with the `a` key needs to match the keys in the other `object` values in the maps:\r\n\r\n    a = {\r\n      subnet_id       = module.vpc.public_subnets[0],\r\n      security_groups = [aws_security_group.ssh.id],\r\n    },", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}], "filtered-sentences": []}], "contains-topic": true, "filtered-sentences": []}