{"Id": "62271543", "PostTypeId": "1", "AcceptedAnswerId": "62273105", "CreationDate": "2020-06-08T21:33:40.087", "Score": "0", "ViewCount": "2065", "Body": "<p>Using Terraform, how do I set the Azure SQL Database (and Azure Elastic Pool) LicenseType property to enable Azure Hybrid Use Benefit (aka AHUB, aka AHB)?</p>\n\n<p>Here's an example using Powershell:</p>\n\n<pre><code># Azure SQL Database:\nSet-AzSqlDatabase -DatabaseName $sqlDb.DatabaseName -ResourceGroupName $sqlDb.ResourceGroupName -ServerName $sqlDb.ServerName -LicenseType \"BasePrice\"\n\n# Azure SQL Database Elastic Pool:\nSet-AzSqlElasticPool -ElasticPoolName $elasticPool.elasticPoolName -ResourceGroupName $elasticPool.ResourceGroupName -ServerName $elasticPool.ServerName -LicenseType \"BasePrice\"\n</code></pre>\n\n<p>The property is easily set using Az CLI too.</p>\n\n<p>This is a very important property (from a cost perspective) and I cannot find mention of it anywhere in the context of Terraform.</p>\n\n<p>Thanks!</p>\n", "OwnerUserId": "6046815", "LastActivityDate": "2021-05-15T01:05:58.907", "Title": "Setting LicenseType property of Azure SQL Database to enable Azure Hybrid Use Benefit (AHUB) using Terraform?", "Tags": "<azure-sql-database><terraform-provider-azure><azure-elasticpool>", "AnswerCount": "3", "CommentCount": "0", "ContentLicense": "CC BY-SA 4.0", "history": [{"Id": "223619831", "PostHistoryTypeId": "2", "PostId": "62271543", "RevisionGUID": "85d57060-e5ed-4f80-b665-93132e04d3b0", "CreationDate": "2020-06-08T21:33:40.087", "UserId": "6046815", "Text": "Using Terraform, how do I set the Azure SQL Database (and Azure Elastic Pool) LicenseType property to enable Azure Hybrid Use Benefit (aka AHUB, aka AHB)?\r\n\r\nHere's an example using Powershell:\r\n\r\n```\r\n# Azure SQL Database:\r\nSet-AzSqlDatabase -DatabaseName $sqlDb.DatabaseName -ResourceGroupName $sqlDb.ResourceGroupName -ServerName $sqlDb.ServerName -LicenseType \"BasePrice\"\r\n\r\n# Azure SQL Database Elastic Pool:\r\nSet-AzSqlElasticPool -ElasticPoolName $elasticPool.elasticPoolName -ResourceGroupName $elasticPool.ResourceGroupName -ServerName $elasticPool.ServerName -LicenseType \"BasePrice\"\r\n```\r\n\r\nThe property is easily set using Az CLI too.\r\n\r\nThis is a very important property (from a cost perspective) and I cannot find mention of it anywhere in the context of Terraform.\r\n\r\nThanks!", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": [{"source": "Text", "text": "This is a very important property (from a cost perspective) and I cannot find mention of it anywhere in the context of Terraform. ", "keywords": ["cost"]}]}, {"Id": "223619832", "PostHistoryTypeId": "1", "PostId": "62271543", "RevisionGUID": "85d57060-e5ed-4f80-b665-93132e04d3b0", "CreationDate": "2020-06-08T21:33:40.087", "UserId": "6046815", "Text": "Setting LicenseType property of Azure SQL Database to enable Azure Hybrid Use Benefit (AHUB) using Terraform?", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}, {"Id": "223619833", "PostHistoryTypeId": "3", "PostId": "62271543", "RevisionGUID": "85d57060-e5ed-4f80-b665-93132e04d3b0", "CreationDate": "2020-06-08T21:33:40.087", "UserId": "6046815", "Text": "<azure-sql-database><terraform-provider-azure><azure-elasticpool>", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}], "answers": [{"Id": "62273105", "PostTypeId": "2", "ParentId": "62271543", "CreationDate": "2020-06-09T00:19:49.630", "Score": "1", "Body": "<p>From Terraform documentation </p>\n\n<p>license_type - (Optional) Specifies the license type applied to this database. Possible values are LicenseIncluded and BasePrice.</p>\n\n<p>Here is the link \n<a href=\"https://www.terraform.io/docs/providers/azurerm/r/mssql_elasticpool.html#license_type\" rel=\"nofollow noreferrer\">https://www.terraform.io/docs/providers/azurerm/r/mssql_elasticpool.html#license_type</a></p>\n", "OwnerUserId": "4645059", "LastActivityDate": "2020-06-09T00:19:49.630", "CommentCount": "2", "ContentLicense": "CC BY-SA 4.0", "comments": [{"Id": "110273368", "PostId": "62273105", "Score": "0", "Text": "Thanks @alexey that helps for Azure SQL Database Elastic Pools, however, it doesn't address Azure SQL Databases that are not associated with Elastic Pools.  Any idea how it's done on a singleton database outside of a pool?", "CreationDate": "2020-06-12T19:08:00.963", "UserId": "6046815", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}, {"Id": "110273575", "PostId": "62273105", "Score": "0", "Text": "Oh! Found something very promising: https://www.terraform.io/docs/providers/azurerm/r/mssql_database.html", "CreationDate": "2020-06-12T19:15:38.537", "UserId": "6046815", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}], "history": [{"Id": "223626459", "PostHistoryTypeId": "2", "PostId": "62273105", "RevisionGUID": "3c0cfb4e-5b7f-48c2-b97d-3cb9055e5afe", "CreationDate": "2020-06-09T00:19:49.630", "UserId": "4645059", "Text": "From Terraform documentation \r\n\r\nlicense_type - (Optional) Specifies the license type applied to this database. Possible values are LicenseIncluded and BasePrice.\r\n\r\nHere is the link \r\nhttps://www.terraform.io/docs/providers/azurerm/r/mssql_elasticpool.html#license_type", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}], "filtered-sentences": []}, {"Id": "67542449", "PostTypeId": "2", "ParentId": "62271543", "CreationDate": "2021-05-15T01:05:58.907", "Score": "0", "Body": "<p>Hashicorp's site doesn't make this setting clear. The setting description is present, but the expanded description of the possible values is not. Combining Hashicorp's site with Microsoft's, we get:</p>\n<p>license_type - (Optional) Specifies the license type applied to this database. Possible values are:</p>\n<ul>\n<li>'LicenseIncluded' if you need a license</li>\n<li>'BasePrice' if you have a license and are eligible for the Azure Hybrid Benefit</li>\n</ul>\n<p>Sources:</p>\n<ul>\n<li><a href=\"https://registry.terraform.io/providers/hashicorp/azurerm/latest/docs/resources/mssql_database#license_type\" rel=\"nofollow noreferrer\">https://registry.terraform.io/providers/hashicorp/azurerm/latest/docs/resources/mssql_database#license_type</a></li>\n<li><a href=\"https://learn.microsoft.com/en-us/dotnet/api/microsoft.azure.management.sql.models.database.licensetype?view=azure-dotnet\" rel=\"nofollow noreferrer\">https://learn.microsoft.com/en-us/dotnet/api/microsoft.azure.management.sql.models.database.licensetype?view=azure-dotnet</a></li>\n</ul>\n", "OwnerUserId": "15930467", "LastActivityDate": "2021-05-15T01:05:58.907", "CommentCount": "0", "ContentLicense": "CC BY-SA 4.0", "history": [{"Id": "246614977", "PostHistoryTypeId": "2", "PostId": "67542449", "RevisionGUID": "04b1ed07-ad3f-49d1-8a95-1db93b759cd9", "CreationDate": "2021-05-15T01:05:58.907", "UserId": "15930467", "Text": "Hashicorp's site doesn't make this setting clear. The setting description is present, but the expanded description of the possible values is not. Combining Hashicorp's site with Microsoft's, we get:\r\n\r\nlicense_type - (Optional) Specifies the license type applied to this database. Possible values are:\r\n - 'LicenseIncluded' if you need a license\r\n - 'BasePrice' if you have a license and are eligible for the Azure Hybrid Benefit\r\n\r\nSources: \r\n\r\n - https://registry.terraform.io/providers/hashicorp/azurerm/latest/docs/resources/mssql_database#license_type\r\n - https://learn.microsoft.com/en-us/dotnet/api/microsoft.azure.management.sql.models.database.licensetype?view=azure-dotnet\r\n\r\n", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}], "filtered-sentences": []}, {"Id": "65721701", "PostTypeId": "2", "ParentId": "62271543", "CreationDate": "2021-01-14T15:17:00.017", "Score": "0", "Body": "<p>Why does it seem <code>LicenseIncluded</code> = the &quot;Save Money&quot; box being unchecked. I would have thought <code>LicenseIncluded</code> would have add the box checked and <code>BasePrice</code> would be unchecked, but in practice it is the opposite.</p>\n", "OwnerUserId": "4270353", "LastActivityDate": "2021-01-14T15:17:00.017", "CommentCount": "1", "ContentLicense": "CC BY-SA 4.0", "comments": [{"Id": "129338953", "PostId": "65721701", "Score": "0", "Text": "I guess the logic is `BasePrice` - only pay for infra (since you already have licenses somewhere else), and `LicenseIncluded` - also pay licensing fees, because you want licenses included with this offering.", "CreationDate": "2022-08-04T11:42:25.010", "UserId": "5251896", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": [{"source": "Text", "text": "I guess the logic is `BasePrice` - only pay for infra (since you already have licenses somewhere else), and `LicenseIncluded` - also pay licensing fees, because you want licenses included with this offering.", "keywords": ["pay"]}]}], "history": [{"Id": "238748779", "PostHistoryTypeId": "2", "PostId": "65721701", "RevisionGUID": "f7f06ff2-1c39-44e3-880b-df2b1a7bca01", "CreationDate": "2021-01-14T15:17:00.017", "UserId": "4270353", "Text": "Why does it seem `LicenseIncluded` = the \"Save Money\" box being unchecked. I would have thought `LicenseIncluded` would have add the box checked and `BasePrice` would be unchecked, but in practice it is the opposite.\r\n\r\n", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}], "filtered-sentences": []}], "contains-topic": true, "filtered-sentences": [{"source": "Body", "text": "This is a very important property (from a cost perspective) and I cannot find mention of it anywhere in the context of Terraform. ", "keywords": ["cost"]}]}