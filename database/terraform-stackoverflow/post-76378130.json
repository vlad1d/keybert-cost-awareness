{"Id": "76378130", "PostTypeId": "1", "AcceptedAnswerId": "76384305", "CreationDate": "2023-06-01T01:20:40.107", "Score": "0", "ViewCount": "24", "Body": "<p>I'm trying to create an alarm for AppRunner. My AppRunner service is running fine.</p>\n<p>Here is the code for the alarm. It keeps showing &quot;Insufficient data&quot;. Weirdly enough, creating an alarm manually also results in the same no data message. I've tried memory metrics but same thing. Any ideas?</p>\n<pre><code>resource &quot;aws_cloudwatch_metric_alarm&quot; &quot;apprunner_cpu&quot; {\n  alarm_name                = &quot;&lt;redacted&gt;&quot;\n  comparison_operator       = &quot;GreaterThanOrEqualToThreshold&quot;\n  evaluation_periods        = 2\n  metric_name               = &quot;CPUUtilization&quot;\n  namespace                 = &quot;AWS/AppRunner&quot;\n  period                    = 60\n  statistic                 = &quot;Average&quot;\n  threshold                 = 80\n  alarm_description         = &quot;AppRunner CPU utilization&quot;\n  insufficient_data_actions = []\n\n  dimensions = {\n    ServiceName = aws_apprunner_service.main.service_name\n    ServiceID   = aws_apprunner_service.main.service_id\n  }\n}\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/LYULg.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/LYULg.png\" alt=\"enter image description here\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/QvrQH.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/QvrQH.png\" alt=\"enter image description here\" /></a></p>\n", "OwnerUserId": "3231778", "LastActivityDate": "2023-06-01T17:22:55.460", "Title": "AppRunner CloudWatch Alarm not showing metrics", "Tags": "<amazon-web-services><terraform><amazon-cloudwatch><terraform-provider-aws><aws-app-runner>", "AnswerCount": "1", "CommentCount": "0", "ContentLicense": "CC BY-SA 4.0", "history": [{"Id": "293576516", "PostHistoryTypeId": "2", "PostId": "76378130", "RevisionGUID": "3182b527-224d-4b86-a629-f4db87327baa", "CreationDate": "2023-06-01T01:20:40.107", "UserId": "3231778", "Text": "I'm trying to create an alarm for AppRunner. My AppRunner service is running fine.\r\n\r\nHere is the code for the alarm. It keeps showing \"Insufficient data\". Weirdly enough, creating an alarm manually also results in the same no data message. I've tried memory metrics but same thing. Any ideas?\r\n\r\n```terraform\r\nresource \"aws_cloudwatch_metric_alarm\" \"apprunner_cpu\" {\r\n  alarm_name                = \"<redacted>\"\r\n  comparison_operator       = \"GreaterThanOrEqualToThreshold\"\r\n  evaluation_periods        = 2\r\n  metric_name               = \"CPUUtilization\"\r\n  namespace                 = \"AWS/AppRunner\"\r\n  period                    = 60\r\n  statistic                 = \"Average\"\r\n  threshold                 = 80\r\n  alarm_description         = \"AppRunner CPU utilization\"\r\n  insufficient_data_actions = []\r\n\r\n  dimensions = {\r\n    ServiceName = aws_apprunner_service.main.service_name\r\n    ServiceID   = aws_apprunner_service.main.service_id\r\n  }\r\n}\r\n```\r\n\r\n[![enter image description here][1]][1]\r\n\r\n[![enter image description here][2]][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/LYULg.png\r\n  [2]: https://i.stack.imgur.com/QvrQH.png", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": [{"source": "Text", "text": "Any ideas? ```terraform resource \"aws_cloudwatch_metric_alarm\" \"apprunner_cpu\" { alarm_name = \"\" comparison_operator = \"GreaterThanOrEqualToThreshold\" evaluation_periods = 2 metric_name = \"CPUUtilization\" namespace = \"AWS/AppRunner\" period = 60 statistic = \"Average\" threshold = 80 alarm_description = \"AppRunner CPU utilization\" insufficient_data_actions = [] dimensions = { ServiceName = aws_apprunner_service.main.service_name ServiceID = aws_apprunner_service.main.service_id } } ``` [![enter image description here][1]][1] [![enter image description here][2]][2] [1]: https://i.stack.imgur.com/LYULg.png [2]: https://i.stack.imgur.com/QvrQH.png", "keywords": ["cpu"]}]}, {"Id": "293576518", "PostHistoryTypeId": "1", "PostId": "76378130", "RevisionGUID": "3182b527-224d-4b86-a629-f4db87327baa", "CreationDate": "2023-06-01T01:20:40.107", "UserId": "3231778", "Text": "AppRunner CloudWatch Alarm not showing metrics", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}, {"Id": "293576519", "PostHistoryTypeId": "3", "PostId": "76378130", "RevisionGUID": "3182b527-224d-4b86-a629-f4db87327baa", "CreationDate": "2023-06-01T01:20:40.107", "UserId": "3231778", "Text": "<amazon-web-services><terraform><amazon-cloudwatch><terraform-provider-aws><aws-app-runner>", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}], "answers": [{"Id": "76384305", "PostTypeId": "2", "ParentId": "76378130", "CreationDate": "2023-06-01T17:22:55.460", "Score": "0", "Body": "<p>Ok, so I discovered that after hitting some consistent requests during the defined evaluation period, data was loaded into the alarm. I can assume that this is due to the idle container features.</p>\n<p><a href=\"https://i.stack.imgur.com/c9xPr.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/c9xPr.png\" alt=\"enter image description here\" /></a></p>\n<p>From the App Runner <a href=\"https://aws.amazon.com/apprunner/pricing/\" rel=\"nofollow noreferrer\">pricing page</a>:</p>\n<blockquote>\n<p>When your application is idle, you pay per GB of memory for provisioned container instances which keep your application warm and eliminate cold starts. When requests come in, your application responds in milliseconds, and you pay for the vCPU and memory consumed by your active container instances as your application is processing requests.</p>\n</blockquote>\n<p>Found some more info on <a href=\"https://github.com/aws/apprunner-roadmap/issues/105\" rel=\"nofollow noreferrer\">this issue</a>.</p>\n", "OwnerUserId": "3231778", "LastActivityDate": "2023-06-01T17:22:55.460", "CommentCount": "0", "ContentLicense": "CC BY-SA 4.0", "history": [{"Id": "293613189", "PostHistoryTypeId": "2", "PostId": "76384305", "RevisionGUID": "585ed6e4-7ba1-4653-a2ca-21a7c490125c", "CreationDate": "2023-06-01T17:22:55.460", "UserId": "3231778", "Text": "Ok, so I discovered that after hitting some consistent requests during the defined evaluation period, data was loaded into the alarm. I can assume that this is due to the idle container features.\r\n\r\n[![enter image description here][1]][1]\r\n\r\nFrom the App Runner [pricing page](https://aws.amazon.com/apprunner/pricing/):\r\n\r\n> When your application is idle, you pay per GB of memory for provisioned container instances which keep your application warm and eliminate cold starts. When requests come in, your application responds in milliseconds, and you pay for the vCPU and memory consumed by your active container instances as your application is processing requests.\r\n\r\nFound some more info on [this issue](https://github.com/aws/apprunner-roadmap/issues/105).\r\n\r\n  [1]: https://i.stack.imgur.com/c9xPr.png", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": [{"source": "Text", "text": "From the App Runner [pricing page](https://aws.amazon.com/apprunner/pricing/): > When your application is idle, you pay per GB of memory for provisioned container instances which keep your application warm and eliminate cold starts. ", "keywords": ["pay"]}, {"source": "Text", "text": "When requests come in, your application responds in milliseconds, and you pay for the vCPU and memory consumed by your active container instances as your application is processing requests. ", "keywords": ["pay"]}]}], "filtered-sentences": [{"source": "Body", "text": "From the App Runner pricing page: When your application is idle, you pay per GB of memory for provisioned container instances which keep your application warm and eliminate cold starts. ", "keywords": ["pay"]}, {"source": "Body", "text": "When requests come in, your application responds in milliseconds, and you pay for the vCPU and memory consumed by your active container instances as your application is processing requests. ", "keywords": ["pay"]}]}], "contains-topic": true, "filtered-sentences": []}