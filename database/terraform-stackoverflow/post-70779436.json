{"Id": "70779436", "PostTypeId": "1", "CreationDate": "2022-01-20T00:27:41.397", "Score": "0", "ViewCount": "736", "Body": "<p><a href=\"https://i.stack.imgur.com/ntYgV.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n<pre><code>locals {\n  AnomalyMonitorName = &quot;all-services-cost-monitor&quot;\n  AnomalyMonitor = {\n    MonitorName      = local.AnomalyMonitorName\n    MonitorType      = &quot;DIMENSIONAL&quot;\n    MonitorDimension = &quot;SERVICE&quot;\n  }\n}\n\nresource &quot;null_resource&quot; &quot;cost_anomaly_monitor&quot; {\n  provisioner &quot;local-exec&quot; {\n    command = &lt;&lt;CMD\n      aws ce create-anomaly-monitor --anomaly-monitor \\\n        '${jsonencode(local.AnomalyMonitor)}'\n    CMD\n  }\n</code></pre>\n<p>But I m getting below validation error limit exceeded on Dimensional spend monitor creation</p>\n", "OwnerUserId": "17979280", "LastEditorUserId": "17979280", "LastEditDate": "2022-01-20T16:40:36.057", "LastActivityDate": "2022-03-02T16:52:01.180", "Title": "Trying to create new feature cost anamoly monitor using terraform with aws cli", "Tags": "<amazon-web-services><terraform><aws-cli><aws-cost-explorer>", "AnswerCount": "1", "CommentCount": "1", "ContentLicense": "CC BY-SA 4.0", "comments": [{"Id": "125127640", "PostId": "70779436", "Score": "3", "Text": "You haven't provide the FULL error message.", "CreationDate": "2022-01-20T00:33:57.530", "UserId": "248823", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}], "history": [{"Id": "262322258", "PostHistoryTypeId": "2", "PostId": "70779436", "RevisionGUID": "e9eda667-c76a-4089-94e9-539893d36a97", "CreationDate": "2022-01-20T00:27:41.397", "UserId": "17979280", "Text": "```\r\nlocals {\r\n  AnomalyMonitorName = \"all-services-cost-monitor\"\r\n  AnomalyMonitor = {\r\n    MonitorName      = local.AnomalyMonitorName\r\n    MonitorType      = \"DIMENSIONAL\"\r\n    MonitorDimension = \"SERVICE\"\r\n  }\r\n}\r\n\r\nresource \"null_resource\" \"cost_anomaly_monitor\" {\r\n  provisioner \"local-exec\" {\r\n    command = <<CMD\r\n      aws ce create-anomaly-monitor --anomaly-monitor \\\r\n        '${jsonencode(local.AnomalyMonitor)}'\r\n    CMD\r\n  }\r\n```\r\nBut I m getting below validation error limit exceeded on Dimensional spend monitor creation\r\n", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": [{"source": "Text", "text": "``` locals { AnomalyMonitorName = \"all-services-cost-monitor\" AnomalyMonitor = { MonitorName = local.AnomalyMonitorName MonitorType = \"DIMENSIONAL\" MonitorDimension = \"SERVICE\" } } resource \"null_resource\" \"cost_anomaly_monitor\" { provisioner \"local-exec\" { command = <<CMD aws ce create-anomaly-monitor --anomaly-monitor \\ '${jsonencode(local.AnomalyMonitor)}' CMD } ``` But I m getting below validation error limit exceeded on Dimensional spend monitor creation", "keywords": ["cost"]}]}, {"Id": "262322260", "PostHistoryTypeId": "1", "PostId": "70779436", "RevisionGUID": "e9eda667-c76a-4089-94e9-539893d36a97", "CreationDate": "2022-01-20T00:27:41.397", "UserId": "17979280", "Text": "Trying to create new feature cost anamoly monitor using terraform with aws cli", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": [{"source": "Text", "text": "Trying to create new feature cost anamoly monitor using terraform with aws cli", "keywords": ["cost", "feature"]}]}, {"Id": "262322261", "PostHistoryTypeId": "3", "PostId": "70779436", "RevisionGUID": "e9eda667-c76a-4089-94e9-539893d36a97", "CreationDate": "2022-01-20T00:27:41.397", "UserId": "17979280", "Text": "<amazon-web-services><terraform><aws-cli><aws-cost-explorer>", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}, {"Id": "262377165", "PostHistoryTypeId": "5", "PostId": "70779436", "RevisionGUID": "52d90531-bfd2-4185-bd40-449ebadddb8c", "CreationDate": "2022-01-20T16:40:36.057", "UserId": "17979280", "Comment": "added 81 characters in body", "Text": "[enter image description here][1]\r\n```\r\nlocals {\r\n  AnomalyMonitorName = \"all-services-cost-monitor\"\r\n  AnomalyMonitor = {\r\n    MonitorName      = local.AnomalyMonitorName\r\n    MonitorType      = \"DIMENSIONAL\"\r\n    MonitorDimension = \"SERVICE\"\r\n  }\r\n}\r\n\r\nresource \"null_resource\" \"cost_anomaly_monitor\" {\r\n  provisioner \"local-exec\" {\r\n    command = <<CMD\r\n      aws ce create-anomaly-monitor --anomaly-monitor \\\r\n        '${jsonencode(local.AnomalyMonitor)}'\r\n    CMD\r\n  }\r\n```\r\nBut I m getting below validation error limit exceeded on Dimensional spend monitor creation\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/ntYgV.png", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": [{"source": "Text", "text": "[enter image description here][1] ``` locals { AnomalyMonitorName = \"all-services-cost-monitor\" AnomalyMonitor = { MonitorName = local.AnomalyMonitorName MonitorType = \"DIMENSIONAL\" MonitorDimension = \"SERVICE\" } } resource \"null_resource\" \"cost_anomaly_monitor\" { provisioner \"local-exec\" { command = <<CMD aws ce create-anomaly-monitor --anomaly-monitor \\ '${jsonencode(local.AnomalyMonitor)}' CMD } ``` But I m getting below validation error limit exceeded on Dimensional spend monitor creation [1]: https://i.stack.imgur.com/ntYgV.png", "keywords": ["cost"]}]}], "answers": [{"Id": "71325604", "PostTypeId": "2", "ParentId": "70779436", "CreationDate": "2022-03-02T15:56:07.707", "Score": "0", "Body": "<p>I think the problem is that you're trying to create more than one &quot;DIMENSIONAL-&gt;SERVICES&quot; monitor, as far as I know, it monitors all AWS Services (so it would be redundant to have two monitors checking the same thing, when you try to create a second one on the console it shows the following message: <code>Only 1 AWS services monitor type can be created for an account. Remove any existing monitors to create a new AWS service monitor.</code>). If you were to create a monitor of type CUSTOM it should let you.</p>\n<p>Check under AWS Cost Management -&gt; Cost Anomaly Detection -&gt; Cost Monitors and it's very likely that you will have a &quot;DIMENSIONAL-&gt;SERVICES&quot; monitor in there, delete it and recreate through your Terraform code and should not raise any errors.</p>\n<p>PS. When I say &quot;DIMENSIONAL-&gt;SERVICES&quot; it will show in your Console as &quot;AWS services&quot;, I call it like that because from <a href=\"https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-ce-anomalymonitor.html\" rel=\"nofollow noreferrer\">the docs</a> a Monitor of type <code>DIMENSIONAL</code> will always have a dimension of <code>SERVICE</code>. As a side note, if you are on a linked account you can only create a SERVICE monitor, so make sure you test it on the payer account.</p>\n", "OwnerUserId": "12270722", "LastEditorUserId": "12270722", "LastEditDate": "2022-03-02T16:52:01.180", "LastActivityDate": "2022-03-02T16:52:01.180", "CommentCount": "0", "ContentLicense": "CC BY-SA 4.0", "history": [{"Id": "265222889", "PostHistoryTypeId": "2", "PostId": "71325604", "RevisionGUID": "6c1ba87f-d4f4-4439-8bed-43ac02678601", "CreationDate": "2022-03-02T15:56:07.707", "UserId": "12270722", "Text": "I think the problem is that you're trying to create more than one \"DIMENSIONAL->SERVICES\" monitor, as far as I know, it monitors all AWS Services (so it would be redundant to have two monitors checking the same thing). If you were to create a monitor of type CUSTOM it should let you.\r\n\r\nCheck under AWS Cost Management -> Cost Anomaly Detection -> Cost Monitors and it's very likely that you will have a \"DIMENSIONAL->SERVICES\" monitor in there, delete it and recreate through your Terraform code and should not raise any errors.\r\n\r\nPS. When I say \"DIMENSIONAL->SERVICES\" it will show in your Console as \"AWS services\", I call it like that because from [the docs][1] a Monitor of type `DIMENSIONAL` will always have a dimension of `SERVICE`\r\n\r\n\r\n  [1]: https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-ce-anomalymonitor.html", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": [{"source": "Text", "text": "Check under AWS Cost Management -> Cost Anomaly Detection -> Cost Monitors and it's very likely that you will have a \"DIMENSIONAL->SERVICES\" monitor in there, delete it and recreate through your Terraform code and should not raise any errors. ", "keywords": ["cost"]}]}, {"Id": "265226793", "PostHistoryTypeId": "5", "PostId": "71325604", "RevisionGUID": "78941105-3a30-409a-a4ad-3dfdbb4430b4", "CreationDate": "2022-03-02T16:52:01.180", "UserId": "12270722", "Comment": "added 134 characters in body", "Text": "I think the problem is that you're trying to create more than one \"DIMENSIONAL->SERVICES\" monitor, as far as I know, it monitors all AWS Services (so it would be redundant to have two monitors checking the same thing, when you try to create a second one on the console it shows the following message: `Only 1 AWS services monitor type can be created for an account. Remove any existing monitors to create a new AWS service monitor.`). If you were to create a monitor of type CUSTOM it should let you.\r\n\r\nCheck under AWS Cost Management -> Cost Anomaly Detection -> Cost Monitors and it's very likely that you will have a \"DIMENSIONAL->SERVICES\" monitor in there, delete it and recreate through your Terraform code and should not raise any errors.\r\n\r\nPS. When I say \"DIMENSIONAL->SERVICES\" it will show in your Console as \"AWS services\", I call it like that because from [the docs][1] a Monitor of type `DIMENSIONAL` will always have a dimension of `SERVICE`. As a side note, if you are on a linked account you can only create a SERVICE monitor, so make sure you test it on the payer account.\r\n\r\n\r\n  [1]: https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-ce-anomalymonitor.html", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": [{"source": "Text", "text": "Check under AWS Cost Management -> Cost Anomaly Detection -> Cost Monitors and it's very likely that you will have a \"DIMENSIONAL->SERVICES\" monitor in there, delete it and recreate through your Terraform code and should not raise any errors. ", "keywords": ["cost"]}, {"source": "Text", "text": "As a side note, if you are on a linked account you can only create a SERVICE monitor, so make sure you test it on the payer account. ", "keywords": ["test"]}]}], "filtered-sentences": [{"source": "Body", "text": "Check under AWS Cost Management -> Cost Anomaly Detection -> Cost Monitors and it's very likely that you will have a \"DIMENSIONAL->SERVICES\" monitor in there, delete it and recreate through your Terraform code and should not raise any errors. ", "keywords": ["cost"]}, {"source": "Body", "text": "As a side note, if you are on a linked account you can only create a SERVICE monitor, so make sure you test it on the payer account.", "keywords": ["test"]}]}], "contains-topic": true, "filtered-sentences": [{"source": "Title", "text": "Trying to create new feature cost anamoly monitor using terraform with aws cli", "keywords": ["cost", "feature"]}]}