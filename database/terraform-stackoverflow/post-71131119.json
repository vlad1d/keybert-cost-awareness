{"Id": "71131119", "PostTypeId": "1", "CreationDate": "2022-02-15T17:50:37.120", "Score": "1", "ViewCount": "110", "Body": "<p>New to GCP and use IAC for our Terraform. I've managed to build most of the initial organisation config in Terraform no problem with the exception of Cloud Identity and Organisation Policies. I'm using gcloud provided login credentials. Whenever I try to build for those two services I get this:</p>\n<blockquote>\n<p>Error creating Group: googleapi: Error 403: Your application has authenticated using end user credentials from the Google Cloud SDK or Google Cloud Shell which are not supported by the cloudidentity.googleapis.com. We recommend configuring the billing/quota_project setting in gcloud or using a service account through the auth/impersonate_service_account setting. For more information about service accounts and how to use them in your application, see <a href=\"https://cloud.google.com/docs/authentication/\" rel=\"nofollow noreferrer\">https://cloud.google.com/docs/authentication/</a>. If you are getting this error with curl or similar tools, you may need to specify 'X-Goog-User-Project' HTTP header for quota and billing purposes. For more information regarding 'X-Goog-User-Project' header, please check <a href=\"https://cloud.google.com/apis/docs/system-parameters\" rel=\"nofollow noreferrer\">https://cloud.google.com/apis/docs/system-parameters</a>.</p>\n</blockquote>\n<p>So in this case i'm using the Google Cloud SDK, so the error makes sense. However, the two options it presents don't work:</p>\n<ul>\n<li>Setting a quota project makes no difference</li>\n<li>I can't create a service account at the organisational level (and when I create one within a project it can't configure these organisational level constructs)</li>\n</ul>\n<p>So how do I go about Terraforming these services?</p>\n<p>Thanks.</p>\n", "OwnerUserId": "18216068", "LastActivityDate": "2022-02-15T17:50:37.120", "Title": "How do you deploy Cloud Identity or Organisation Policies in GCP via Terraform?", "Tags": "<google-cloud-platform><terraform>", "AnswerCount": "0", "CommentCount": "0", "ContentLicense": "CC BY-SA 4.0", "history": [{"Id": "264188713", "PostHistoryTypeId": "2", "PostId": "71131119", "RevisionGUID": "686da939-18a0-4ed0-803e-826c2d375108", "CreationDate": "2022-02-15T17:50:37.120", "UserId": "18216068", "Text": "New to GCP and use IAC for our Terraform. I've managed to build most of the initial organisation config in Terraform no problem with the exception of Cloud Identity and Organisation Policies. I'm using gcloud provided login credentials. Whenever I try to build for those two services I get this:\r\n\r\n>Error creating Group: googleapi: Error 403: Your application has authenticated using end user credentials from the Google Cloud SDK or Google Cloud Shell which are not supported by the cloudidentity.googleapis.com. We recommend configuring the billing/quota_project setting in gcloud or using a service account through the auth/impersonate_service_account setting. For more information about service accounts and how to use them in your application, see https://cloud.google.com/docs/authentication/. If you are getting this error with curl or similar tools, you may need to specify 'X-Goog-User-Project' HTTP header for quota and billing purposes. For more information regarding 'X-Goog-User-Project' header, please check https://cloud.google.com/apis/docs/system-parameters.\r\n\r\nSo in this case i'm using the Google Cloud SDK, so the error makes sense. However, the two options it presents don't work:\r\n- Setting a quota project makes no difference\r\n- I can't create a service account at the organisational level (and when I create one within a project it can't configure these organisational level constructs)\r\n\r\nSo how do I go about Terraforming these services?\r\n\r\nThanks.", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": [{"source": "Text", "text": "We recommend configuring the billing/quota_project setting in gcloud or using a service account through the auth/impersonate_service_account setting. ", "keywords": ["bill"]}, {"source": "Text", "text": "If you are getting this error with curl or similar tools, you may need to specify 'X-Goog-User-Project' HTTP header for quota and billing purposes. ", "keywords": ["bill"]}]}, {"Id": "264188715", "PostHistoryTypeId": "1", "PostId": "71131119", "RevisionGUID": "686da939-18a0-4ed0-803e-826c2d375108", "CreationDate": "2022-02-15T17:50:37.120", "UserId": "18216068", "Text": "How do you deploy Cloud Identity or Organisation Policies in GCP via Terraform?", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}, {"Id": "264188716", "PostHistoryTypeId": "3", "PostId": "71131119", "RevisionGUID": "686da939-18a0-4ed0-803e-826c2d375108", "CreationDate": "2022-02-15T17:50:37.120", "UserId": "18216068", "Text": "<google-cloud-platform><terraform>", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}], "contains-topic": false, "filtered-sentences": [{"source": "Body", "text": "We recommend configuring the billing/quota_project setting in gcloud or using a service account through the auth/impersonate_service_account setting. ", "keywords": ["bill"]}, {"source": "Body", "text": "If you are getting this error with curl or similar tools, you may need to specify 'X-Goog-User-Project' HTTP header for quota and billing purposes. ", "keywords": ["bill"]}]}