{"Id": "46859122", "PostTypeId": "1", "AcceptedAnswerId": "48145920", "CreationDate": "2017-10-21T01:03:02.507", "Score": "6", "ViewCount": "1077", "Body": "<p>As per terraform doc, uri for the aws_api_gateway_integration should be </p>\n\n<pre><code>resource \"aws_api_gateway_integration\" \"integration\" {\n\n    ...\n    ...\n    uri = \"arn:aws:apigateway:{region}:firehose:PutRecord/{service_api}\"\n\n}   \n</code></pre>\n\n<p>I am not able to figure out what the service_api should be. Can you please help?</p>\n\n<p><a href=\"https://www.terraform.io/docs/providers/aws/r/api_gateway_integration.html\" rel=\"nofollow noreferrer\">https://www.terraform.io/docs/providers/aws/r/api_gateway_integration.html</a></p>\n", "OwnerUserId": "589331", "LastEditorUserId": "174777", "LastEditDate": "2018-05-21T05:38:30.047", "LastActivityDate": "2018-08-08T20:56:49.927", "Title": "What should be service api for aws_api_gateway_integration with firehose in terraform", "Tags": "<aws-api-gateway><terraform><amazon-kinesis-firehose>", "AnswerCount": "2", "CommentCount": "1", "ContentLicense": "CC BY-SA 3.0", "comments": [{"Id": "81092003", "PostId": "46859122", "Score": "1", "Text": "Have you found an answer to this question? I have the same problem and I am stuck at this point.", "CreationDate": "2017-11-02T09:41:40.513", "UserId": "837835", "ContentLicense": "CC BY-SA 3.0", "filtered-sentences": []}], "history": [{"Id": "158802447", "PostHistoryTypeId": "2", "PostId": "46859122", "RevisionGUID": "57e311fd-6692-41bd-ac60-7a1bdbfabe15", "CreationDate": "2017-10-21T01:03:02.507", "UserId": "589331", "Text": "As per terraform doc, uri for the aws_api_gateway_integration should be \r\n\r\nresource \"aws_api_gateway_integration\" \"integration\" {\r\n...\r\n...\r\nuri = \"arn:aws:apigateway:{region}:firehose:PutRecord/{service_api}\"\r\n}    \r\n\r\nI am not able to figure out what the service_api should be. Can you please help?\r\n\r\nhttps://www.terraform.io/docs/providers/aws/r/api_gateway_integration.html", "ContentLicense": "CC BY-SA 3.0", "filtered-sentences": []}, {"Id": "158802448", "PostHistoryTypeId": "1", "PostId": "46859122", "RevisionGUID": "57e311fd-6692-41bd-ac60-7a1bdbfabe15", "CreationDate": "2017-10-21T01:03:02.507", "UserId": "589331", "Text": "What should be service api for aws_api_gateway_integration with firehose in terraform", "ContentLicense": "CC BY-SA 3.0", "filtered-sentences": []}, {"Id": "158802449", "PostHistoryTypeId": "3", "PostId": "46859122", "RevisionGUID": "57e311fd-6692-41bd-ac60-7a1bdbfabe15", "CreationDate": "2017-10-21T01:03:02.507", "UserId": "589331", "Text": "<aws-api-gateway><terraform><aws-kinesis-firehose>", "ContentLicense": "CC BY-SA 3.0", "filtered-sentences": []}, {"Id": "158822994", "PostHistoryTypeId": "5", "PostId": "46859122", "RevisionGUID": "23abb66c-b595-4f26-92fc-1ddf30fbbcdf", "CreationDate": "2017-10-21T08:14:57.710", "UserId": "498256", "Comment": "added 48 characters in body", "Text": "As per terraform doc, uri for the aws_api_gateway_integration should be \r\n\r\n    resource \"aws_api_gateway_integration\" \"integration\" {\r\n    \r\n        ...\r\n        ...\r\n        uri = \"arn:aws:apigateway:{region}:firehose:PutRecord/{service_api}\"\r\n    \r\n    }   \r\n\r\n \r\n\r\nI am not able to figure out what the service_api should be. Can you please help?\r\n\r\nhttps://www.terraform.io/docs/providers/aws/r/api_gateway_integration.html", "ContentLicense": "CC BY-SA 3.0", "filtered-sentences": []}, {"Id": "173843291", "PostHistoryTypeId": "6", "PostId": "46859122", "RevisionGUID": "d846677e-116e-431e-9b11-aca0f2572ade", "CreationDate": "2018-05-21T05:38:30.047", "UserId": "174777", "Comment": "edited tags", "Text": "<aws-api-gateway><terraform><amazon-kinesis-firehose>", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}], "answers": [{"Id": "47072395", "PostTypeId": "2", "ParentId": "46859122", "CreationDate": "2017-11-02T10:00:32.373", "Score": "2", "Body": "<p>I found an example <a href=\"https://github.com/udacity/kinesis_tf\" rel=\"nofollow noreferrer\">here</a>:</p>\n\n<pre><code>type                    = \"AWS\"\nintegration_http_method = \"POST\"\nuri                     = \"arn:aws:apigateway:${var.aws_region}:kinesis:action/DescribeStream\"\n</code></pre>\n\n<p>Example taken from <a href=\"https://github.com/udacity/kinesis_tf/blob/master/api_describe_stream.tf\" rel=\"nofollow noreferrer\">here</a>:</p>\n", "OwnerUserId": "837835", "LastActivityDate": "2017-11-02T10:00:32.373", "CommentCount": "1", "ContentLicense": "CC BY-SA 3.0", "comments": [{"Id": "83269853", "PostId": "47072395", "Score": "1", "Text": "Soren, I was able to get it working using \"arn:aws:apigateway:${var.aws_region}:firehose:action/PutRecord\". Hope it helps. Also i got the entire serverless stack working using api gateway and firehose. You can ask me if you have any other questions.", "CreationDate": "2018-01-08T07:29:19.450", "UserId": "589331", "ContentLicense": "CC BY-SA 3.0", "filtered-sentences": []}], "history": [{"Id": "159692094", "PostHistoryTypeId": "2", "PostId": "47072395", "RevisionGUID": "5a0dddab-091c-482f-8af7-701012690ecb", "CreationDate": "2017-11-02T10:00:32.373", "UserId": "837835", "Text": "I found an example [here](https://github.com/udacity/kinesis_tf):\r\n\r\n\r\n    type                    = \"AWS\"\r\n    integration_http_method = \"POST\"\r\n    uri                     = \"arn:aws:apigateway:${var.aws_region}:kinesis:action/DescribeStream\"\r\n\r\nExample taken from [here](https://github.com/udacity/kinesis_tf/blob/master/api_describe_stream.tf):\r\n", "ContentLicense": "CC BY-SA 3.0", "filtered-sentences": []}], "filtered-sentences": []}, {"Id": "48145920", "PostTypeId": "2", "ParentId": "46859122", "CreationDate": "2018-01-08T07:29:36.960", "Score": "4", "Body": "<pre><code>  type = \"AWS\"\n  integration_http_method = \"POST\"\n  uri = \"arn:aws:apigateway:${var.aws_region}:firehose:action/PutRecord\"\n</code></pre>\n", "OwnerUserId": "589331", "LastEditorUserId": "81623", "LastEditDate": "2018-08-08T20:56:49.927", "LastActivityDate": "2018-08-08T20:56:49.927", "CommentCount": "3", "ContentLicense": "CC BY-SA 4.0", "comments": [{"Id": "86386463", "PostId": "48145920", "Score": "2", "Text": "beware copy+pasting the URI above - it contains zero-width whitespace characters - it prints like it should but it really is `arn:aws:apigateway:us-east-1:firehose:action/PutRec\\u200c\\u200bord` and that will lead to an `UnknownOperationException` on API Gateway - cost me hours.", "CreationDate": "2018-04-06T07:35:09.527", "UserId": "1065584", "ContentLicense": "CC BY-SA 3.0", "filtered-sentences": [{"source": "Text", "text": "beware copy+pasting the URI above - it contains zero-width whitespace characters - it prints like it should but it really is `arn:aws:apigateway:us-east-1:firehose:action/PutRec\\u200c\\u200bord` and that will lead to an `UnknownOperationException` on API Gateway - cost me hours.", "keywords": ["cost"]}]}, {"Id": "126423893", "PostId": "48145920", "Score": "0", "Text": "@squidfunk It looks like the original answer was edited to remove the zero width whitespace. Can you verify for future users?", "CreationDate": "2022-03-18T15:59:48.663", "UserId": "10297686", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}, {"Id": "126570528", "PostId": "48145920", "Score": "1", "Text": "@CSBatchelor yes, I can confirm that the zero-width whitespace characters were removed from this answer, so copying it should work now.", "CreationDate": "2022-03-25T10:28:47.013", "UserId": "1065584", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}], "history": [{"Id": "164202985", "PostHistoryTypeId": "2", "PostId": "48145920", "RevisionGUID": "936dd2dc-7bf5-4894-a294-ec70ab0e1223", "CreationDate": "2018-01-08T07:29:36.960", "UserId": "589331", "Text": "      type = \"AWS\"\r\n      integration_http_method = \"POST\"\r\n      uri = \"arn:aws:apigateway:${var.aws_region}:firehose:action/PutRec\u200c\u200bord\"\r\n\r\n", "ContentLicense": "CC BY-SA 3.0", "filtered-sentences": []}, {"Id": "179373149", "PostHistoryTypeId": "5", "PostId": "48145920", "RevisionGUID": "c6c04ce9-b45d-4506-bc2b-1f65eacfbc32", "CreationDate": "2018-08-08T20:56:49.927", "UserId": "81623", "Comment": "Remove zero-width whitespace chars as described in Martin Donath's comment", "Text": "      type = \"AWS\"\r\n      integration_http_method = \"POST\"\r\n      uri = \"arn:aws:apigateway:${var.aws_region}:firehose:action/PutRecord\"\r\n\r\n", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}], "filtered-sentences": []}], "contains-topic": false, "filtered-sentences": []}