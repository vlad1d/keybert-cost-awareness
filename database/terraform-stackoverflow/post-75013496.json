{"Id": "75013496", "PostTypeId": "1", "AcceptedAnswerId": "75016294", "CreationDate": "2023-01-05T03:13:02.137", "Score": "1", "ViewCount": "438", "Body": "<p>I'm trying to use <code>azurerm_app_service_virtual_network_swift_connection</code> with <code>azurerm_linux_function_app</code> but am getting this error even though I'm on a Pay As You Go sub.</p>\n<pre><code>\u2502 Error: creating/updating App Service VNet association between &quot;rd-func8-func&quot; (Resource Group &quot;rg-rd-func8&quot;) and Virtual Network &quot;rdfunc8-vnet&quot;: web.AppsClient#CreateOrUpdateSwiftVirtualNetworkConnectionWithCheck: Failure responding to request: StatusCode=400 -- Original Error: autorest/azure: Service returned an error. Status=400 Code=&quot;BadRequest&quot; Message=&quot;Feature Create Swift Virtual Network is not allowed for a free trial subscription.&quot; Details=[{&quot;Message&quot;:&quot;Feature Create Swift Virtual Network is not allowed for a free trial subscription.&quot;},{&quot;Code&quot;:&quot;BadRequest&quot;},{&quot;ErrorEntity&quot;:{&quot;Code&quot;:&quot;BadRequest&quot;,&quot;ExtendedCode&quot;:&quot;52018&quot;,&quot;Message&quot;:&quot;Feature Create Swift Virtual Network is not allowed for a free trial subscription.&quot;,&quot;MessageTemplate&quot;:&quot;Feature {0} is not allowed for a free trial subscription.&quot;,&quot;Parameters&quot;:[&quot;Create Swift Virtual Network&quot;]}}]\n\u2502 \n\u2502   with module.function.azurerm_app_service_virtual_network_swift_connection.example,\n\u2502   on modules/function/function.tf line 28, in resource &quot;azurerm_app_service_virtual_network_swift_connection&quot; &quot;example&quot;:\n\u2502   28: resource &quot;azurerm_app_service_virtual_network_swift_connection&quot; &quot;example&quot; {\n</code></pre>\n<p>TF looks like this</p>\n<pre><code>resource &quot;azurerm_linux_function_app&quot; &quot;this&quot; {\n  name                      = lower(format(&quot;%s-%s-func&quot;, var.client_name, var.project_name))\n  resource_group_name       = var.resource_group_name\n  location                  = var.resource_group_location\n\n  storage_account_name = var.storage_account_name\n  storage_account_access_key = var.storage_account_access_key\n\n  service_plan_id = var.service_plan_id\n\n  app_settings = {\n    FUNCTIONS_WORKER_RUNTIME = &quot;node&quot;\n  }\n\n  site_config {\n    application_stack {\n      node_version = 18\n    }\n  }\n}\n\nresource &quot;azurerm_app_service_virtual_network_swift_connection&quot; &quot;example&quot; {\n  app_service_id = azurerm_linux_function_app.this.id\n  subnet_id      = var.virtual_network_subnet_id\n}\n</code></pre>\n<p>Azure Portal Subscription\n<a href=\"https://i.stack.imgur.com/9H1LV.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/9H1LV.png\" alt=\"enter image description here\" /></a></p>\n", "OwnerUserId": "8767607", "LastEditorUserId": "8767607", "LastEditDate": "2023-01-05T03:23:31.400", "LastActivityDate": "2023-01-05T09:29:59.090", "Title": "Terraform - Feature Create Swift Virtual Network is not allowed for a free trial subscription - on Pay As You Go subscription", "Tags": "<azure><terraform><azure-functions><vnet><azure-rm>", "AnswerCount": "1", "CommentCount": "0", "ContentLicense": "CC BY-SA 4.0", "history": [{"Id": "285532025", "PostHistoryTypeId": "2", "PostId": "75013496", "RevisionGUID": "5860bc54-1012-480a-bc81-2b837d603bb6", "CreationDate": "2023-01-05T03:13:02.137", "UserId": "8767607", "Text": "I'm trying to use `azurerm_app_service_virtual_network_swift_connection` with `azurerm_linux_function_app` but am getting this error even though I'm on a Pay as you go sub.\r\n```\r\n\u2502 Error: creating/updating App Service VNet association between \"rd-func8-func\" (Resource Group \"rg-rd-func8\") and Virtual Network \"rdfunc8-vnet\": web.AppsClient#CreateOrUpdateSwiftVirtualNetworkConnectionWithCheck: Failure responding to request: StatusCode=400 -- Original Error: autorest/azure: Service returned an error. Status=400 Code=\"BadRequest\" Message=\"Feature Create Swift Virtual Network is not allowed for a free trial subscription.\" Details=[{\"Message\":\"Feature Create Swift Virtual Network is not allowed for a free trial subscription.\"},{\"Code\":\"BadRequest\"},{\"ErrorEntity\":{\"Code\":\"BadRequest\",\"ExtendedCode\":\"52018\",\"Message\":\"Feature Create Swift Virtual Network is not allowed for a free trial subscription.\",\"MessageTemplate\":\"Feature {0} is not allowed for a free trial subscription.\",\"Parameters\":[\"Create Swift Virtual Network\"]}}]\r\n\u2502 \r\n\u2502   with module.function.azurerm_app_service_virtual_network_swift_connection.example,\r\n\u2502   on modules/function/function.tf line 28, in resource \"azurerm_app_service_virtual_network_swift_connection\" \"example\":\r\n\u2502   28: resource \"azurerm_app_service_virtual_network_swift_connection\" \"example\" {\r\n```\r\n\r\nTF looks like this\r\n```\r\nresource \"azurerm_linux_function_app\" \"this\" {\r\n  name                      = lower(format(\"%s-%s-func\", var.client_name, var.project_name))\r\n  resource_group_name       = var.resource_group_name\r\n  location                  = var.resource_group_location\r\n\r\n  storage_account_name = var.storage_account_name\r\n  storage_account_access_key = var.storage_account_access_key\r\n\r\n  service_plan_id = var.service_plan_id\r\n\r\n  app_settings = {\r\n    FUNCTIONS_WORKER_RUNTIME = \"node\"\r\n  }\r\n\r\n  site_config {\r\n    application_stack {\r\n      node_version = 18\r\n    }\r\n  }\r\n}\r\n\r\nresource \"azurerm_app_service_virtual_network_swift_connection\" \"example\" {\r\n  app_service_id = azurerm_linux_function_app.this.id\r\n  subnet_id      = var.virtual_network_subnet_id\r\n}\r\n```", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": [{"source": "Text", "text": "I'm trying to use `azurerm_app_service_virtual_network_swift_connection` with `azurerm_linux_function_app` but am getting this error even though I'm on a Pay as you go sub. ", "keywords": ["pay"]}, {"source": "Text", "text": "Status=400 Code=\"BadRequest\" Message=\"Feature Create Swift Virtual Network is not allowed for a free trial subscription.\" Details=[{\"Message\":\"Feature Create Swift Virtual Network is not allowed for a free trial subscription.\"},{\"Code\":\"BadRequest\"},{\"ErrorEntity\":{\"Code\":\"BadRequest\",\"ExtendedCode\":\"52018\",\"Message\":\"Feature Create Swift Virtual Network is not allowed for a free trial subscription.\",\"MessageTemplate\":\"Feature {0} is not allowed for a free trial subscription.\",\"Parameters\":[\"Create Swift Virtual Network\"]}}] \u2502 \u2502 with module.function.azurerm_app_service_virtual_network_swift_connection.example, \u2502 on modules/function/function.tf line 28, in resource \"azurerm_app_service_virtual_network_swift_connection\" \"example\": \u2502 28: resource \"azurerm_app_service_virtual_network_swift_connection\" \"example\" { ``` TF looks like this ``` resource \"azurerm_linux_function_app\" \"this\" { name = lower(format(\"%s-%s-func\", var.client_name, var.project_name)) resource_group_name = var.resource_group_name location = var.resource_group_location storage_account_name = var.storage_account_name storage_account_access_key = var.storage_account_access_key service_plan_id = var.service_plan_id app_settings = { FUNCTIONS_WORKER_RUNTIME = \"node\" } site_config { application_stack { node_version = 18 } } } resource \"azurerm_app_service_virtual_network_swift_connection\" \"example\" { app_service_id = azurerm_linux_function_app.this.id subnet_id = var.virtual_network_subnet_id ", "keywords": ["feature"]}]}, {"Id": "285532027", "PostHistoryTypeId": "1", "PostId": "75013496", "RevisionGUID": "5860bc54-1012-480a-bc81-2b837d603bb6", "CreationDate": "2023-01-05T03:13:02.137", "UserId": "8767607", "Text": "Terraform - Feature Create Swift Virtual Network is not allowed for a free trial subscription - on Pay as you go subscription", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": [{"source": "Text", "text": "Terraform - Feature Create Swift Virtual Network is not allowed for a free trial subscription - on Pay as you go subscription", "keywords": ["pay", "feature"]}]}, {"Id": "285532028", "PostHistoryTypeId": "3", "PostId": "75013496", "RevisionGUID": "5860bc54-1012-480a-bc81-2b837d603bb6", "CreationDate": "2023-01-05T03:13:02.137", "UserId": "8767607", "Text": "<azure><terraform><azure-functions><vnet><azure-rm>", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}, {"Id": "285532029", "PostHistoryTypeId": "66", "PostId": "75013496", "RevisionGUID": "5860bc54-1012-480a-bc81-2b837d603bb6", "CreationDate": "2023-01-05T03:13:02.137", "UserId": "8767607", "filtered-sentences": []}, {"Id": "285532349", "PostHistoryTypeId": "5", "PostId": "75013496", "RevisionGUID": "35d3e889-9143-4b06-ab49-3eda1b83ddbe", "CreationDate": "2023-01-05T03:23:31.400", "UserId": "8767607", "Comment": "added 116 characters in body", "Text": "I'm trying to use `azurerm_app_service_virtual_network_swift_connection` with `azurerm_linux_function_app` but am getting this error even though I'm on a Pay As You Go sub.\r\n```\r\n\u2502 Error: creating/updating App Service VNet association between \"rd-func8-func\" (Resource Group \"rg-rd-func8\") and Virtual Network \"rdfunc8-vnet\": web.AppsClient#CreateOrUpdateSwiftVirtualNetworkConnectionWithCheck: Failure responding to request: StatusCode=400 -- Original Error: autorest/azure: Service returned an error. Status=400 Code=\"BadRequest\" Message=\"Feature Create Swift Virtual Network is not allowed for a free trial subscription.\" Details=[{\"Message\":\"Feature Create Swift Virtual Network is not allowed for a free trial subscription.\"},{\"Code\":\"BadRequest\"},{\"ErrorEntity\":{\"Code\":\"BadRequest\",\"ExtendedCode\":\"52018\",\"Message\":\"Feature Create Swift Virtual Network is not allowed for a free trial subscription.\",\"MessageTemplate\":\"Feature {0} is not allowed for a free trial subscription.\",\"Parameters\":[\"Create Swift Virtual Network\"]}}]\r\n\u2502 \r\n\u2502   with module.function.azurerm_app_service_virtual_network_swift_connection.example,\r\n\u2502   on modules/function/function.tf line 28, in resource \"azurerm_app_service_virtual_network_swift_connection\" \"example\":\r\n\u2502   28: resource \"azurerm_app_service_virtual_network_swift_connection\" \"example\" {\r\n```\r\n\r\nTF looks like this\r\n```\r\nresource \"azurerm_linux_function_app\" \"this\" {\r\n  name                      = lower(format(\"%s-%s-func\", var.client_name, var.project_name))\r\n  resource_group_name       = var.resource_group_name\r\n  location                  = var.resource_group_location\r\n\r\n  storage_account_name = var.storage_account_name\r\n  storage_account_access_key = var.storage_account_access_key\r\n\r\n  service_plan_id = var.service_plan_id\r\n\r\n  app_settings = {\r\n    FUNCTIONS_WORKER_RUNTIME = \"node\"\r\n  }\r\n\r\n  site_config {\r\n    application_stack {\r\n      node_version = 18\r\n    }\r\n  }\r\n}\r\n\r\nresource \"azurerm_app_service_virtual_network_swift_connection\" \"example\" {\r\n  app_service_id = azurerm_linux_function_app.this.id\r\n  subnet_id      = var.virtual_network_subnet_id\r\n}\r\n```\r\nAzure Portal Subscription\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/9H1LV.png", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": [{"source": "Text", "text": "I'm trying to use `azurerm_app_service_virtual_network_swift_connection` with `azurerm_linux_function_app` but am getting this error even though I'm on a Pay As You Go sub. ", "keywords": ["pay"]}, {"source": "Text", "text": "Status=400 Code=\"BadRequest\" Message=\"Feature Create Swift Virtual Network is not allowed for a free trial subscription.\" Details=[{\"Message\":\"Feature Create Swift Virtual Network is not allowed for a free trial subscription.\"},{\"Code\":\"BadRequest\"},{\"ErrorEntity\":{\"Code\":\"BadRequest\",\"ExtendedCode\":\"52018\",\"Message\":\"Feature Create Swift Virtual Network is not allowed for a free trial subscription.\",\"MessageTemplate\":\"Feature {0} is not allowed for a free trial subscription.\",\"Parameters\":[\"Create Swift Virtual Network\"]}}] \u2502 \u2502 with module.function.azurerm_app_service_virtual_network_swift_connection.example, \u2502 on modules/function/function.tf line 28, in resource \"azurerm_app_service_virtual_network_swift_connection\" \"example\": \u2502 28: resource \"azurerm_app_service_virtual_network_swift_connection\" \"example\" { ``` TF looks like this ``` resource \"azurerm_linux_function_app\" \"this\" { name = lower(format(\"%s-%s-func\", var.client_name, var.project_name)) resource_group_name = var.resource_group_name location = var.resource_group_location storage_account_name = var.storage_account_name storage_account_access_key = var.storage_account_access_key service_plan_id = var.service_plan_id app_settings = { FUNCTIONS_WORKER_RUNTIME = \"node\" } site_config { application_stack { node_version = 18 } } } resource \"azurerm_app_service_virtual_network_swift_connection\" \"example\" { app_service_id = azurerm_linux_function_app.this.id subnet_id = var.virtual_network_subnet_id } ``` Azure Portal Subscription [![enter image description here][1]][1] [1]: https://i.stack.imgur.com/9H1LV.png", "keywords": ["feature"]}]}, {"Id": "285532446", "PostHistoryTypeId": "4", "PostId": "75013496", "RevisionGUID": "35d3e889-9143-4b06-ab49-3eda1b83ddbe", "CreationDate": "2023-01-05T03:23:31.400", "UserId": "8767607", "Comment": "added 116 characters in body", "Text": "Terraform - Feature Create Swift Virtual Network is not allowed for a free trial subscription - on Pay As You Go subscription", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": [{"source": "Text", "text": "Terraform - Feature Create Swift Virtual Network is not allowed for a free trial subscription - on Pay As You Go subscription", "keywords": ["pay", "feature"]}]}], "answers": [{"Id": "75016294", "PostTypeId": "2", "ParentId": "75013496", "CreationDate": "2023-01-05T09:29:59.090", "Score": "1", "Body": "<p><strong>I tried to reproduce the same in my environment to Create Swift Virtual Network with Pay-as-You-Go subscription using terraform, As I got same error:</strong></p>\n<p><img src=\"https://i.stack.imgur.com/EfAEy.png\" alt=\"enter image description here\" /></p>\n<p>I also got same error with below <strong>App service Plan Sku</strong> on <strong>Pay-as-You-Go</strong> subscription Account.</p>\n<pre><code>resource &quot;azurerm_service_plan&quot; &quot;example&quot; {\n  name                = &quot;example-app-service-plan&quot;\n  resource_group_name = azurerm_resource_group.example.name\n  location            = azurerm_resource_group.example.location\n  os_type             = &quot;Linux&quot;\n  sku_name            = &quot;Y1&quot;\n}\n</code></pre>\n<p>To resolve the error, kindly choose listed App service plan.</p>\n<p><img src=\"https://i.stack.imgur.com/Ef8mc.png\" alt=\"enter image description here\" /></p>\n<p>For testing I choose the <strong>Premium v2 P1V2</strong> Plan.</p>\n<p><strong>Terraform code:</strong></p>\n<pre><code>provider &quot;azurerm&quot; {\n  features {}\n}\n\nresource &quot;azurerm_resource_group&quot; &quot;example&quot; {\n  name     = &quot;example-resources&quot;\n  location = &quot;West Europe&quot;\n}\n\nresource &quot;azurerm_storage_account&quot; &quot;example&quot; {\n  name                     = &quot;thejalinuxstorage1&quot;\n  resource_group_name      = azurerm_resource_group.example.name\n  location                 = azurerm_resource_group.example.location\n  account_tier             = &quot;Standard&quot;\n  account_replication_type = &quot;LRS&quot;\n}\n\nresource &quot;azurerm_virtual_network&quot; &quot;example&quot; {\n  name                = &quot;example-virtual-network&quot;\n  address_space       = [&quot;10.0.0.0/16&quot;]\n  location            = azurerm_resource_group.example.location\n  resource_group_name = azurerm_resource_group.example.name\n}\n\nresource &quot;azurerm_subnet&quot; &quot;example&quot; {\n  name                 = &quot;example-subnet&quot;\n  resource_group_name  = azurerm_resource_group.example.name\n  virtual_network_name = azurerm_virtual_network.example.name\n  address_prefixes     = [&quot;10.0.1.0/24&quot;]\n\n  delegation {\n    name = &quot;example-delegation&quot;\n\n    service_delegation {\n      name    = &quot;Microsoft.Web/serverFarms&quot;\n      actions = [&quot;Microsoft.Network/virtualNetworks/subnets/action&quot;]\n    }\n  }\n}\n\nresource &quot;azurerm_service_plan&quot; &quot;example&quot; {\n  name                = &quot;example-app-service-plan&quot;\n  resource_group_name = azurerm_resource_group.example.name\n  location            = azurerm_resource_group.example.location\n  os_type             = &quot;Linux&quot;\n  sku_name            = &quot;P1v2&quot;\n}\n\nresource &quot;azurerm_linux_function_app&quot; &quot;venkat&quot; {\n  name                = &quot;venkat-linux-function-app&quot;\n  resource_group_name = azurerm_resource_group.example.name\n  location            = azurerm_resource_group.example.location\n\n  storage_account_name       = azurerm_storage_account.example.name\n  storage_account_access_key = azurerm_storage_account.example.primary_access_key\n  service_plan_id            = azurerm_service_plan.example.id\n\n  site_config {}\n}\n\nresource &quot;azurerm_app_service_virtual_network_swift_connection&quot; &quot;thejaswiftconnection&quot; {\n  app_service_id = azurerm_linux_function_app.venkat.id\n  subnet_id      = azurerm_subnet.example.id\n}\n</code></pre>\n<p><strong>Terraform Apply:</strong></p>\n<p><img src=\"https://i.stack.imgur.com/fbbyu.png\" alt=\"enter image description here\" /></p>\n<p>Successfully created resources once ran the code.</p>\n<p><img src=\"https://i.stack.imgur.com/0xVOU.png\" alt=\"enter image description here\" /></p>\n<p>Reference: <a href=\"https://registry.terraform.io/providers/hashicorp/azurerm/latest/docs/resources/app_service_virtual_network_swift_connection\" rel=\"nofollow noreferrer\">azurerm_app_service_virtual_network_swift_connection</a></p>\n", "OwnerUserId": "20465725", "LastActivityDate": "2023-01-05T09:29:59.090", "CommentCount": "0", "ContentLicense": "CC BY-SA 4.0", "history": [{"Id": "285547671", "PostHistoryTypeId": "2", "PostId": "75016294", "RevisionGUID": "e83d9e4d-3229-49cd-8b09-51ef2192340c", "CreationDate": "2023-01-05T09:29:59.090", "UserId": "20465725", "Text": "**I tried to reproduce the same in my environment to Create Swift Virtual Network with Pay-as-You-Go subscription using terraform, As I got same error:**\r\n\r\n![enter image description here](https://i.stack.imgur.com/EfAEy.png)\r\n\r\nI also got same error with below **App service Plan Sku** on **Pay-as-You-Go** subscription Account.\r\n\r\n    resource \"azurerm_service_plan\" \"example\" {\r\n      name                = \"example-app-service-plan\"\r\n      resource_group_name = azurerm_resource_group.example.name\r\n      location            = azurerm_resource_group.example.location\r\n      os_type             = \"Linux\"\r\n      sku_name            = \"Y1\"\r\n    }\r\n\r\n\r\n\r\nTo resolve the error, kindly choose listed App service plan.\r\n\r\n![enter image description here](https://i.stack.imgur.com/Ef8mc.png)\r\n\r\nFor testing I choose the **Premium v2 P1V2** Plan.\r\n\r\n**Terraform code:**\r\n\r\n    provider \"azurerm\" {\r\n      features {}\r\n    }\r\n    \r\n    resource \"azurerm_resource_group\" \"example\" {\r\n      name     = \"example-resources\"\r\n      location = \"West Europe\"\r\n    }\r\n    \r\n    resource \"azurerm_storage_account\" \"example\" {\r\n      name                     = \"thejalinuxstorage1\"\r\n      resource_group_name      = azurerm_resource_group.example.name\r\n      location                 = azurerm_resource_group.example.location\r\n      account_tier             = \"Standard\"\r\n      account_replication_type = \"LRS\"\r\n    }\r\n    \r\n    resource \"azurerm_virtual_network\" \"example\" {\r\n      name                = \"example-virtual-network\"\r\n      address_space       = [\"10.0.0.0/16\"]\r\n      location            = azurerm_resource_group.example.location\r\n      resource_group_name = azurerm_resource_group.example.name\r\n    }\r\n    \r\n    resource \"azurerm_subnet\" \"example\" {\r\n      name                 = \"example-subnet\"\r\n      resource_group_name  = azurerm_resource_group.example.name\r\n      virtual_network_name = azurerm_virtual_network.example.name\r\n      address_prefixes     = [\"10.0.1.0/24\"]\r\n    \r\n      delegation {\r\n        name = \"example-delegation\"\r\n    \r\n        service_delegation {\r\n          name    = \"Microsoft.Web/serverFarms\"\r\n          actions = [\"Microsoft.Network/virtualNetworks/subnets/action\"]\r\n        }\r\n      }\r\n    }\r\n    \r\n    resource \"azurerm_service_plan\" \"example\" {\r\n      name                = \"example-app-service-plan\"\r\n      resource_group_name = azurerm_resource_group.example.name\r\n      location            = azurerm_resource_group.example.location\r\n      os_type             = \"Linux\"\r\n      sku_name            = \"P1v2\"\r\n    }\r\n    \r\n    resource \"azurerm_linux_function_app\" \"venkat\" {\r\n      name                = \"venkat-linux-function-app\"\r\n      resource_group_name = azurerm_resource_group.example.name\r\n      location            = azurerm_resource_group.example.location\r\n    \r\n      storage_account_name       = azurerm_storage_account.example.name\r\n      storage_account_access_key = azurerm_storage_account.example.primary_access_key\r\n      service_plan_id            = azurerm_service_plan.example.id\r\n    \r\n      site_config {}\r\n    }\r\n    \r\n    resource \"azurerm_app_service_virtual_network_swift_connection\" \"thejaswiftconnection\" {\r\n      app_service_id = azurerm_linux_function_app.venkat.id\r\n      subnet_id      = azurerm_subnet.example.id\r\n    }\r\n\r\n\r\n\r\n**Terraform Apply:**\r\n\r\n![enter image description here](https://i.stack.imgur.com/fbbyu.png)\r\n\r\nSuccessfully created resources once ran the code.\r\n\r\n![enter image description here](https://i.stack.imgur.com/0xVOU.png) \r\n\r\nReference: [azurerm_app_service_virtual_network_swift_connection](https://registry.terraform.io/providers/hashicorp/azurerm/latest/docs/resources/app_service_virtual_network_swift_connection)\r\n", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": [{"source": "Text", "text": "**I tried to reproduce the same in my environment to Create Swift Virtual Network with Pay-as-You-Go subscription using terraform, As I got same error:** ![enter image description here](https://i.stack.imgur.com/EfAEy.png) I also got same error with below **App service Plan Sku** on **Pay-as-You-Go** subscription Account. resource \"azurerm_service_plan\" \"example\" { name = \"example-app-service-plan\" resource_group_name = azurerm_resource_group.example.name location = azurerm_resource_group.example.location os_type = \"Linux\" sku_name = \"Y1\" } To resolve the error, kindly choose listed App service plan. ![enter image description here](https://i.stack.imgur.com/Ef8mc.png) For testing I choose the **Premium v2 P1V2** Plan. **Terraform code:** provider \"azurerm\" { features {} } resource \"azurerm_resource_group\" \"example\" { name = \"example-resources\" location = \"West Europe\" } resource \"azurerm_storage_account\" \"example\" { name = \"thejalinuxstorage1\" resource_group_name = azurerm_resource_group.example.name location = azurerm_resource_group.example.location account_tier = \"Standard\" account_replication_type = \"LRS\" } resource \"azurerm_virtual_network\" \"example\" { name = \"example-virtual-network\" address_space = [\"10.0.0.0/16\"] location = azurerm_resource_group.example.location resource_group_name = azurerm_resource_group.example.name } resource \"azurerm_subnet\" \"example\" { name = \"example-subnet\" resource_group_name = azurerm_resource_group.example.name virtual_network_name = azurerm_virtual_network.example.name address_prefixes = [\"10.0.1.0/24\"] delegation { name = \"example-delegation\" service_delegation { name = \"Microsoft.Web/serverFarms\" actions = [\"Microsoft.Network/virtualNetworks/subnets/action\"] } } } resource \"azurerm_service_plan\" \"example\" { name = \"example-app-service-plan\" resource_group_name = azurerm_resource_group.example.name location = azurerm_resource_group.example.location os_type = \"Linux\" sku_name = \"P1v2\" } resource \"azurerm_linux_function_app\" \"venkat\" { name = \"venkat-linux-function-app\" resource_group_name = azurerm_resource_group.example.name location = azurerm_resource_group.example.location storage_account_name = azurerm_storage_account.example.name storage_account_access_key = azurerm_storage_account.example.primary_access_key service_plan_id = azurerm_service_plan.example.id site_config {} } resource \"azurerm_app_service_virtual_network_swift_connection\" \"thejaswiftconnection\" { app_service_id = azurerm_linux_function_app.venkat.id subnet_id = azurerm_subnet.example.id } **Terraform Apply:** ![enter image description here](https://i.stack.imgur.com/fbbyu.png) Successfully created resources once ran the code. ![enter image description here](https://i.stack.imgur.com/0xVOU.png) Reference: [azurerm_app_service_virtual_network_swift_connection](https://registry.terraform.io/providers/hashicorp/azurerm/latest/docs/resources/app_service_virtual_network_swift_connection)", "keywords": ["pay", "provider", "test"]}]}], "filtered-sentences": [{"source": "Body", "text": "I tried to reproduce the same in my environment to Create Swift Virtual Network with Pay-as-You-Go subscription using terraform, As I got same error: I also got same error with below App service Plan Sku on Pay-as-You-Go subscription Account. ", "keywords": ["pay"]}, {"source": "Body", "text": "For testing I choose the Premium v2 P1V2 Plan. Terraform code: Terraform Apply: Successfully created resources once ran the code. ", "keywords": ["test"]}]}], "contains-topic": true, "filtered-sentences": [{"source": "Title", "text": "Terraform - Feature Create Swift Virtual Network is not allowed for a free trial subscription - on Pay As You Go subscription", "keywords": ["pay", "feature"]}, {"source": "Body", "text": "I'm trying to use azurerm_app_service_virtual_network_swift_connection with azurerm_linux_function_app but am getting this error even though I'm on a Pay As You Go sub. ", "keywords": ["pay"]}]}