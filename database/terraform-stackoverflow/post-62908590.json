{"Id": "62908590", "PostTypeId": "1", "CreationDate": "2020-07-15T06:09:28.607", "Score": "1", "ViewCount": "4314", "Body": "<p>I am trying to create a terraform module with the help of which I can make an entry to existing Dynamo DB table.\nI have got this code which create dynamo DB table</p>\n<pre><code>resource &quot;aws_dynamodb_table&quot; &quot;basic-dynamodb-table&quot; {\n  name           = &quot;GameScores&quot;\n  billing_mode   = &quot;PROVISIONED&quot;\n  read_capacity  = 20\n  write_capacity = 20\n  hash_key       = &quot;UserId&quot;\n  range_key      = &quot;GameTitle&quot;\n\n  attribute {\n    name = &quot;UserId&quot;\n    type = &quot;S&quot;\n  }\n\n  attribute {\n    name = &quot;GameTitle&quot;\n    type = &quot;S&quot;\n  }\n\n  attribute {\n    name = &quot;TopScore&quot;\n    type = &quot;N&quot;\n  }\n\n  ttl {\n    attribute_name = &quot;TimeToExist&quot;\n    enabled        = false\n  }\n\n  global_secondary_index {\n    name               = &quot;GameTitleIndex&quot;\n    hash_key           = &quot;GameTitle&quot;\n    range_key          = &quot;TopScore&quot;\n    write_capacity     = 10\n    read_capacity      = 10\n    projection_type    = &quot;INCLUDE&quot;\n    non_key_attributes = [&quot;UserId&quot;]\n  }\n\n  tags = {\n    Name        = &quot;dynamodb-table-1&quot;\n    Environment = &quot;production&quot;\n  }\n}\n</code></pre>\n<p>Is there any way I can make changes in existing dynamo db table.</p>\n", "OwnerUserId": "13933394", "LastActivityDate": "2020-07-27T09:32:13.230", "Title": "Is it possible to update existing Dynamo DB table from Terraform", "Tags": "<amazon-dynamodb><terraform>", "AnswerCount": "1", "CommentCount": "2", "ContentLicense": "CC BY-SA 4.0", "comments": [{"Id": "111247624", "PostId": "62908590", "Score": "6", "Text": "Welcome to SO! What do you exactly mean with 'make changes'? You can change anything besides the partition & range key without terraform destroying and recreating the table. If you want to import an existing table into terraform there is `terraform import` (https://www.terraform.io/docs/import/usage.html)", "CreationDate": "2020-07-15T06:51:11.817", "UserId": "5908014", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": [{"source": "Text", "text": "What do you exactly mean with 'make changes'? ", "keywords": ["change"]}, {"source": "Text", "text": "You can change anything besides the partition & range key without terraform destroying and recreating the table. ", "keywords": ["change"]}]}, {"Id": "111267068", "PostId": "62908590", "Score": "0", "Text": "thanks mate for your warm welcome, \ncoming to the question, I don't want to create or re-create any thing, I just want to add entry in dynamo db table with the help of terraform.", "CreationDate": "2020-07-15T16:40:32.673", "UserId": "13933394", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}], "history": [{"Id": "226645573", "PostHistoryTypeId": "2", "PostId": "62908590", "RevisionGUID": "1ceaeece-afee-4b5f-9a73-dbb2e55e169b", "CreationDate": "2020-07-15T06:09:28.607", "UserId": "13933394", "Text": "I am trying to create a terraform module with the help of which I can make an entry to existing Dynamo DB table. \r\nI have got this code which create dynamo DB table \r\n\r\n\r\n    resource \"aws_dynamodb_table\" \"basic-dynamodb-table\" {\r\n      name           = \"GameScores\"\r\n      billing_mode   = \"PROVISIONED\"\r\n      read_capacity  = 20\r\n      write_capacity = 20\r\n      hash_key       = \"UserId\"\r\n      range_key      = \"GameTitle\"\r\n    \r\n      attribute {\r\n        name = \"UserId\"\r\n        type = \"S\"\r\n      }\r\n    \r\n      attribute {\r\n        name = \"GameTitle\"\r\n        type = \"S\"\r\n      }\r\n    \r\n      attribute {\r\n        name = \"TopScore\"\r\n        type = \"N\"\r\n      }\r\n    \r\n      ttl {\r\n        attribute_name = \"TimeToExist\"\r\n        enabled        = false\r\n      }\r\n    \r\n      global_secondary_index {\r\n        name               = \"GameTitleIndex\"\r\n        hash_key           = \"GameTitle\"\r\n        range_key          = \"TopScore\"\r\n        write_capacity     = 10\r\n        read_capacity      = 10\r\n        projection_type    = \"INCLUDE\"\r\n        non_key_attributes = [\"UserId\"]\r\n      }\r\n    \r\n      tags = {\r\n        Name        = \"dynamodb-table-1\"\r\n        Environment = \"production\"\r\n      }\r\n    }\r\n\r\nIs there any way I can make changes in existing dynamo db table. ", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": [{"source": "Text", "text": "I have got this code which create dynamo DB table resource \"aws_dynamodb_table\" \"basic-dynamodb-table\" { name = \"GameScores\" billing_mode = \"PROVISIONED\" read_capacity = 20 write_capacity = 20 hash_key = \"UserId\" range_key = \"GameTitle\" attribute { name = \"UserId\" type = \"S\" } attribute { name = \"GameTitle\" type = \"S\" } attribute { name = \"TopScore\" type = \"N\" } ttl { attribute_name = \"TimeToExist\" enabled = false } global_secondary_index { name = \"GameTitleIndex\" hash_key = \"GameTitle\" range_key = \"TopScore\" write_capacity = 10 read_capacity = 10 projection_type = \"INCLUDE\" non_key_attributes = [\"UserId\"] } tags = { Name = \"dynamodb-table-1\" Environment = \"production\" ", "keywords": ["bill"]}, {"source": "Text", "text": "} } Is there any way I can make changes in existing dynamo db table", "keywords": ["change"]}]}, {"Id": "226645574", "PostHistoryTypeId": "1", "PostId": "62908590", "RevisionGUID": "1ceaeece-afee-4b5f-9a73-dbb2e55e169b", "CreationDate": "2020-07-15T06:09:28.607", "UserId": "13933394", "Text": "Is it possible to update existing Dynamo DB table from Terraform", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}, {"Id": "226645575", "PostHistoryTypeId": "3", "PostId": "62908590", "RevisionGUID": "1ceaeece-afee-4b5f-9a73-dbb2e55e169b", "CreationDate": "2020-07-15T06:09:28.607", "UserId": "13933394", "Text": "<amazon-dynamodb><terraform>", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}], "answers": [{"Id": "62922024", "PostTypeId": "2", "ParentId": "62908590", "CreationDate": "2020-07-15T19:00:38.723", "Score": "4", "Body": "<p>For adding entries to a table you can take a look at the <a href=\"https://www.terraform.io/docs/providers/aws/r/dynamodb_table_item.html\" rel=\"nofollow noreferrer\">aws_dynamodb_table_item</a> resource. Here is an example that you can use to add an entry to your table:</p>\n<pre><code>resource &quot;aws_dynamodb_table_item&quot; &quot;item1&quot; {\n    table_name     = aws_dynamodb_table.basic-dynamodb-table.name\n    hash_key       = aws_dynamodb_table.basic-dynamodb-table.hash_key\n    range_key      = aws_dynamodb_table.basic-dynamodb-table.range_key\n\n    item = &lt;&lt;ITEM\n{\n    &quot;UserId&quot;: {&quot;S&quot;: &quot;user&quot;},\n    &quot;GameTitle&quot;: {&quot;S&quot;: &quot;gamex&quot;},\n    &quot;TopScore&quot;: {&quot;N&quot;: &quot;42&quot;}\n}\nITEM\n}\n</code></pre>\n", "OwnerUserId": "12194044", "LastActivityDate": "2020-07-15T19:00:38.723", "CommentCount": "3", "ContentLicense": "CC BY-SA 4.0", "comments": [{"Id": "111318112", "PostId": "62922024", "Score": "1", "Text": "it seems like it was gonna work but at the end it gave me this error:\n\naws_dynamodb_table_item.Tagging: Creating...\n\n\nError: ConditionalCheckFailedException: The conditional request failed\n\n\n  on rider.tf line 1, in resource \"aws_dynamodb_table_item\" \"Tagging\":\n   1: resource \"aws_dynamodb_table_item\" \"Tagging\" {", "CreationDate": "2020-07-17T07:19:53.687", "UserId": "13933394", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}, {"Id": "111325005", "PostId": "62922024", "Score": "0", "Text": "I\u2019m having trouble analysing the error message and it seems like your Terraform config has changed. As this is not related to the original post, I kindly ask you to open a new question for this and include your current Terraform file as well as the complete error message.", "CreationDate": "2020-07-17T11:13:09.947", "UserId": "12194044", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": [{"source": "Text", "text": "I\u2019m having trouble analysing the error message and it seems like your Terraform config has changed. ", "keywords": ["change"]}]}, {"Id": "111333367", "PostId": "62922024", "Score": "0", "Text": "I should have mentioned this earlier, as I first imported the configuration of existing dynamo db table and then tried to add one item to it. I did not change anything else.", "CreationDate": "2020-07-17T15:48:04.783", "UserId": "13933394", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": [{"source": "Text", "text": "I did not change anything else.", "keywords": ["change"]}]}], "history": [{"Id": "226700986", "PostHistoryTypeId": "2", "PostId": "62922024", "RevisionGUID": "e497ad37-3e37-415c-bfdc-42c8deaca10d", "CreationDate": "2020-07-15T19:00:38.723", "UserId": "12194044", "Text": "For adding entries to a table you can take a look at the [aws_dynamodb_table_item][1] resource. Here is an example that you can use to add an entry to your table:\r\n\r\n    resource \"aws_dynamodb_table_item\" \"item1\" {\r\n        table_name     = aws_dynamodb_table.basic-dynamodb-table.name\r\n        hash_key       = aws_dynamodb_table.basic-dynamodb-table.hash_key\r\n        range_key      = aws_dynamodb_table.basic-dynamodb-table.range_key\r\n    \r\n        item = <<ITEM\r\n    {\r\n        \"UserId\": {\"S\": \"user\"},\r\n        \"GameTitle\": {\"S\": \"gamex\"},\r\n        \"TopScore\": {\"N\": \"42\"}\r\n    }\r\n    ITEM\r\n    }\r\n\r\n\r\n  [1]: https://www.terraform.io/docs/providers/aws/r/dynamodb_table_item.html", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}], "filtered-sentences": []}], "contains-topic": true, "filtered-sentences": [{"source": "Body", "text": "I have got this code which create dynamo DB table Is there any way I can make changes in existing dynamo db table.", "keywords": ["change"]}]}