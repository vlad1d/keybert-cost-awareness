{"Id": "67461595", "PostTypeId": "1", "CreationDate": "2021-05-09T19:27:05.457", "Score": "6", "ViewCount": "5807", "Body": "<p>I would like to extract the data given from <code>terraform state show</code>. According to documentation we should use <code>terraform show -json</code> . <a href=\"https://www.terraform.io/docs/cli/commands/state/show.html\" rel=\"noreferrer\">https://www.terraform.io/docs/cli/commands/state/show.html</a></p>\n<blockquote>\n<p>The output of terraform state show is intended for human consumption,\nnot programmatic consumption. To extract state data for use in other\nsoftware, use terraform show -json and decode the result using the\ndocumented structure.</p>\n</blockquote>\n<p>Not sure how to use <code>terrafrom state show</code> in conjuction with <code>terrafrom show</code></p>\n<pre><code>$ terraform state show 'packet_device.worker'\n# packet_device.worker:\nresource &quot;packet_device&quot; &quot;worker&quot; {\n    billing_cycle = &quot;hourly&quot;\n    created       = &quot;2015-12-17T00:06:56Z&quot;\n    facility      = &quot;ewr1&quot;\n    hostname      = &quot;prod-xyz01&quot;\n    id            = &quot;6015bg2b-b8c4-4925-aad2-f0671d5d3b13&quot;\n    locked        = false\n}\n</code></pre>\n", "OwnerUserId": "584239", "LastEditorUserId": "584239", "LastEditDate": "2021-05-10T01:34:32.130", "LastActivityDate": "2021-05-11T00:12:30.903", "Title": "how to extract data from terrafrom state show", "Tags": "<terraform>", "AnswerCount": "1", "CommentCount": "4", "ContentLicense": "CC BY-SA 4.0", "comments": [{"Id": "119242209", "PostId": "67461595", "Score": "0", "Text": "`terraform state show` does not have `-json` option. So not sure what do you want to achieve?", "CreationDate": "2021-05-09T23:35:23.007", "UserId": "248823", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}, {"Id": "119243228", "PostId": "67461595", "Score": "0", "Text": "@Marcin I have updated above question. Please let me know it helps.", "CreationDate": "2021-05-10T01:37:48.967", "UserId": "584239", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}, {"Id": "119243360", "PostId": "67461595", "Score": "2", "Text": "You just use `terraform show -json`, not `terraform state show`. Have you tried that?", "CreationDate": "2021-05-10T01:51:43.777", "UserId": "248823", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}, {"Id": "119250982", "PostId": "67461595", "Score": "0", "Text": "It's not really clear what you're trying to achieve. Do you want to get the state of one resource? What do you want to do with the resulting `json`?", "CreationDate": "2021-05-10T09:49:20.853", "UserId": "1278518", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}], "history": [{"Id": "246273662", "PostHistoryTypeId": "2", "PostId": "67461595", "RevisionGUID": "94e87ff0-0144-4f1c-9b3d-6104d1024204", "CreationDate": "2021-05-09T19:27:05.457", "UserId": "584239", "Text": "\r\n\r\nI would like to extract the data given from `terraform state show`. according to documentation we should your `terraform show -json` . Not sure how to use `terrafrom state show` in conjuction with `terrafrom show`\r\n\r\n    $ terraform state show 'packet_device.worker'\r\n    # packet_device.worker:\r\n    resource \"packet_device\" \"worker\" {\r\n        billing_cycle = \"hourly\"\r\n        created       = \"2015-12-17T00:06:56Z\"\r\n        facility      = \"ewr1\"\r\n        hostname      = \"prod-xyz01\"\r\n        id            = \"6015bg2b-b8c4-4925-aad2-f0671d5d3b13\"\r\n        locked        = false\r\n    }", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": [{"source": "Text", "text": "Not sure how to use `terrafrom state show` in conjuction with `terrafrom show` $ terraform state show 'packet_device.worker' # packet_device.worker: resource \"packet_device\" \"worker\" { billing_cycle = \"hourly\" created = \"2015-12-17T00:06:56Z\" facility = \"ewr1\" hostname = \"prod-xyz01\" id = \"6015bg2b-b8c4-4925-aad2-f0671d5d3b13\" locked = false }", "keywords": ["bill"]}]}, {"Id": "246273663", "PostHistoryTypeId": "1", "PostId": "67461595", "RevisionGUID": "94e87ff0-0144-4f1c-9b3d-6104d1024204", "CreationDate": "2021-05-09T19:27:05.457", "UserId": "584239", "Text": "in Python how to append to array of namedtuple if not already added", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}, {"Id": "246273664", "PostHistoryTypeId": "3", "PostId": "67461595", "RevisionGUID": "94e87ff0-0144-4f1c-9b3d-6104d1024204", "CreationDate": "2021-05-09T19:27:05.457", "UserId": "584239", "Text": "<terraform>", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}, {"Id": "246283021", "PostHistoryTypeId": "4", "PostId": "67461595", "RevisionGUID": "30c59185-4d00-4e12-a456-0eecabc2488b", "CreationDate": "2021-05-10T01:34:32.130", "UserId": "584239", "Comment": "edited title", "Text": "how to extract data from terrafrom state show", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}, {"Id": "246283117", "PostHistoryTypeId": "5", "PostId": "67461595", "RevisionGUID": "30c59185-4d00-4e12-a456-0eecabc2488b", "CreationDate": "2021-05-10T01:34:32.130", "UserId": "584239", "Comment": "edited title", "Text": "\r\n\r\nI would like to extract the data given from `terraform state show`. According to documentation we should use `terraform show -json` . https://www.terraform.io/docs/cli/commands/state/show.html\r\n\r\n> The output of terraform state show is intended for human consumption,\r\n> not programmatic consumption. To extract state data for use in other\r\n> software, use terraform show -json and decode the result using the\r\n> documented structure.\r\n\r\n\r\nNot sure how to use `terrafrom state show` in conjuction with `terrafrom show`\r\n\r\n    $ terraform state show 'packet_device.worker'\r\n    # packet_device.worker:\r\n    resource \"packet_device\" \"worker\" {\r\n        billing_cycle = \"hourly\"\r\n        created       = \"2015-12-17T00:06:56Z\"\r\n        facility      = \"ewr1\"\r\n        hostname      = \"prod-xyz01\"\r\n        id            = \"6015bg2b-b8c4-4925-aad2-f0671d5d3b13\"\r\n        locked        = false\r\n    }", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": [{"source": "Text", "text": "Not sure how to use `terrafrom state show` in conjuction with `terrafrom show` $ terraform state show 'packet_device.worker' # packet_device.worker: resource \"packet_device\" \"worker\" { billing_cycle = \"hourly\" created = \"2015-12-17T00:06:56Z\" facility = \"ewr1\" hostname = \"prod-xyz01\" id = \"6015bg2b-b8c4-4925-aad2-f0671d5d3b13\" locked = false }", "keywords": ["bill"]}]}], "answers": [{"Id": "67479007", "PostTypeId": "2", "ParentId": "67461595", "CreationDate": "2021-05-11T00:12:30.903", "Score": "12", "Body": "<p>The <code>terraform state show</code> command displays information on a single Terraform resource and does not support the <code>-json</code> flag. The command <code>terraform show</code> dumps the entire state, and does support the <code>-json</code> flag. Unlike the output from <code>terraform state show</code>, the output of <code>terraform show -json</code> is <a href=\"https://www.terraform.io/docs/internals/json-format.html\" rel=\"noreferrer\">documented</a> and intended for programmatic consumption.</p>\n<p>If you want to obtain the info on a particular resource as displayed by <code>terraform state show</code>, you can extract it from the full-state JSON, for example by using <code>jq</code>:</p>\n<pre><code>terraform show -json | \\\njq '.values.root_module.resources[] | select(.address == &quot;packet_device.worker&quot;) | .values'\n</code></pre>\n<p>Whether this makes sense depends on what it is you're trying to do.</p>\n", "OwnerUserId": "1419616", "LastActivityDate": "2021-05-11T00:12:30.903", "CommentCount": "1", "ContentLicense": "CC BY-SA 4.0", "comments": [{"Id": "124059565", "PostId": "67479007", "Score": "0", "Text": "Thanks, works perfectly.", "CreationDate": "2021-12-01T06:48:08.900", "UserId": "12134136", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}], "history": [{"Id": "246347830", "PostHistoryTypeId": "2", "PostId": "67479007", "RevisionGUID": "2352f18d-4898-47ed-b25e-8a7060752d6a", "CreationDate": "2021-05-11T00:12:30.903", "UserId": "1419616", "Text": "The `terraform state show` command displays information on a single Terraform resource and does not support the `-json` flag. The command `terraform show` dumps the entire state, and does support the `-json` flag. Unlike the output from `terraform state show`, the output of `terraform show -json` is [documented](https://www.terraform.io/docs/internals/json-format.html) and intended for programmatic consumption.\r\n\r\nIf you want to obtain the info on a particular resource as displayed by `terraform state show`, you can extract it from the full-state JSON, for example by using `jq`:\r\n\r\n```\r\nterraform show -json | \\\r\njq '.values.root_module.resources[] | select(.address == \"packet_device.worker\") | .values'\r\n```\r\n\r\nWhether this makes sense depends on what it is you're trying to do.", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}], "filtered-sentences": []}], "contains-topic": false, "filtered-sentences": []}